(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function pS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rp={exports:{}},hu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function TI(){if($v)return hu;$v=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:a}}return hu.Fragment=e,hu.jsx=n,hu.jsxs=n,hu}var Jv;function EI(){return Jv||(Jv=1,rp.exports=TI()),rp.exports}var _=EI(),op={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function xI(){if(Qv)return Ie;Qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),x=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,V={};function Q(D,X,ue){this.props=D,this.context=X,this.refs=V,this.updater=ue||U}Q.prototype.isReactComponent={},Q.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},Q.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ne(){}ne.prototype=Q.prototype;function K(D,X,ue){this.props=D,this.context=X,this.refs=V,this.updater=ue||U}var J=K.prototype=new ne;J.constructor=K,q(J,Q.prototype),J.isPureReactComponent=!0;var ee=Array.isArray;function le(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(D,X,ue){var de=ue.ref;return{$$typeof:t,type:D,key:X,ref:de!==void 0?de:null,props:ue}}function L(D,X){return I(D.type,X,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function F(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ue){return X[ue]})}var P=/\/+/g;function Pe(D,X){return typeof D=="object"&&D!==null&&D.key!=null?F(""+D.key):X.toString(36)}function we(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(le,le):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $(D,X,ue,de,ve){var Me=typeof D;(Me==="undefined"||Me==="boolean")&&(D=null);var je=!1;if(D===null)je=!0;else switch(Me){case"bigint":case"string":case"number":je=!0;break;case"object":switch(D.$$typeof){case t:case e:je=!0;break;case v:return je=D._init,$(je(D._payload),X,ue,de,ve)}}if(je)return ve=ve(D),je=de===""?"."+Pe(D,0):de,ee(ve)?(ue="",je!=null&&(ue=je.replace(P,"$&/")+"/"),$(ve,X,ue,"",function(Gr){return Gr})):ve!=null&&(k(ve)&&(ve=L(ve,ue+(ve.key==null||D&&D.key===ve.key?"":(""+ve.key).replace(P,"$&/")+"/")+je)),X.push(ve)),1;je=0;var Gt=de===""?".":de+":";if(ee(D))for(var gt=0;gt<D.length;gt++)de=D[gt],Me=Gt+Pe(de,gt),je+=$(de,X,ue,Me,ve);else if(gt=w(D),typeof gt=="function")for(D=gt.call(D),gt=0;!(de=D.next()).done;)de=de.value,Me=Gt+Pe(de,gt++),je+=$(de,X,ue,Me,ve);else if(Me==="object"){if(typeof D.then=="function")return $(we(D),X,ue,de,ve);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return je}function ce(D,X,ue){if(D==null)return D;var de=[],ve=0;return $(D,de,"","",function(Me){return X.call(ue,Me,ve++)}),de}function _e(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(ue){(D._status===0||D._status===-1)&&(D._status=1,D._result=ue)},function(ue){(D._status===0||D._status===-1)&&(D._status=2,D._result=ue)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var He=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Qe={map:ce,forEach:function(D,X,ue){ce(D,function(){X.apply(this,arguments)},ue)},count:function(D){var X=0;return ce(D,function(){X++}),X},toArray:function(D){return ce(D,function(X){return X})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ie.Activity=E,Ie.Children=Qe,Ie.Component=Q,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=K,Ie.StrictMode=i,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(D){return M.H.useMemoCache(D)}},Ie.cache=function(D){return function(){return D.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(D,X,ue){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var de=q({},D.props),ve=D.key;if(X!=null)for(Me in X.key!==void 0&&(ve=""+X.key),X)!R.call(X,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&X.ref===void 0||(de[Me]=X[Me]);var Me=arguments.length-2;if(Me===1)de.children=ue;else if(1<Me){for(var je=Array(Me),Gt=0;Gt<Me;Gt++)je[Gt]=arguments[Gt+2];de.children=je}return I(D.type,ve,de)},Ie.createContext=function(D){return D={$$typeof:u,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},Ie.createElement=function(D,X,ue){var de,ve={},Me=null;if(X!=null)for(de in X.key!==void 0&&(Me=""+X.key),X)R.call(X,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ve[de]=X[de]);var je=arguments.length-2;if(je===1)ve.children=ue;else if(1<je){for(var Gt=Array(je),gt=0;gt<je;gt++)Gt[gt]=arguments[gt+2];ve.children=Gt}if(D&&D.defaultProps)for(de in je=D.defaultProps,je)ve[de]===void 0&&(ve[de]=je[de]);return I(D,Me,ve)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(D){return{$$typeof:f,render:D}},Ie.isValidElement=k,Ie.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:_e}},Ie.memo=function(D,X){return{$$typeof:h,type:D,compare:X===void 0?null:X}},Ie.startTransition=function(D){var X=M.T,ue={};M.T=ue;try{var de=D(),ve=M.S;ve!==null&&ve(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(le,He)}catch(Me){He(Me)}finally{X!==null&&ue.types!==null&&(X.types=ue.types),M.T=X}},Ie.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ie.use=function(D){return M.H.use(D)},Ie.useActionState=function(D,X,ue){return M.H.useActionState(D,X,ue)},Ie.useCallback=function(D,X){return M.H.useCallback(D,X)},Ie.useContext=function(D){return M.H.useContext(D)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(D,X){return M.H.useDeferredValue(D,X)},Ie.useEffect=function(D,X){return M.H.useEffect(D,X)},Ie.useEffectEvent=function(D){return M.H.useEffectEvent(D)},Ie.useId=function(){return M.H.useId()},Ie.useImperativeHandle=function(D,X,ue){return M.H.useImperativeHandle(D,X,ue)},Ie.useInsertionEffect=function(D,X){return M.H.useInsertionEffect(D,X)},Ie.useLayoutEffect=function(D,X){return M.H.useLayoutEffect(D,X)},Ie.useMemo=function(D,X){return M.H.useMemo(D,X)},Ie.useOptimistic=function(D,X){return M.H.useOptimistic(D,X)},Ie.useReducer=function(D,X,ue){return M.H.useReducer(D,X,ue)},Ie.useRef=function(D){return M.H.useRef(D)},Ie.useState=function(D){return M.H.useState(D)},Ie.useSyncExternalStore=function(D,X,ue){return M.H.useSyncExternalStore(D,X,ue)},Ie.useTransition=function(){return M.H.useTransition()},Ie.version="19.2.0",Ie}var Xv;function cg(){return Xv||(Xv=1,op.exports=xI()),op.exports}var oe=cg();const SI=pS(oe);var ap={exports:{}},mu={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function AI(){return Wv||(Wv=1,(function(t){function e($,ce){var _e=$.length;$.push(ce);e:for(;0<_e;){var He=_e-1>>>1,Qe=$[He];if(0<o(Qe,ce))$[He]=ce,$[_e]=Qe,_e=He;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ce=$[0],_e=$.pop();if(_e!==ce){$[0]=_e;e:for(var He=0,Qe=$.length,D=Qe>>>1;He<D;){var X=2*(He+1)-1,ue=$[X],de=X+1,ve=$[de];if(0>o(ue,_e))de<Qe&&0>o(ve,ue)?($[He]=ve,$[de]=_e,He=de):($[He]=ue,$[X]=_e,He=X);else if(de<Qe&&0>o(ve,_e))$[He]=ve,$[de]=_e,He=de;else break e}}return ce}function o($,ce){var _e=$.sortIndex-ce.sortIndex;return _e!==0?_e:$.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var m=[],h=[],v=1,E=null,x=3,w=!1,U=!1,q=!1,V=!1,Q=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function J($){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=$)i(h),ce.sortIndex=ce.expirationTime,e(m,ce);else break;ce=n(h)}}function ee($){if(q=!1,J($),!U)if(n(m)!==null)U=!0,le||(le=!0,F());else{var ce=n(h);ce!==null&&we(ee,ce.startTime-$)}}var le=!1,M=-1,R=5,I=-1;function L(){return V?!0:!(t.unstable_now()-I<R)}function k(){if(V=!1,le){var $=t.unstable_now();I=$;var ce=!0;try{e:{U=!1,q&&(q=!1,ne(M),M=-1),w=!0;var _e=x;try{t:{for(J($),E=n(m);E!==null&&!(E.expirationTime>$&&L());){var He=E.callback;if(typeof He=="function"){E.callback=null,x=E.priorityLevel;var Qe=He(E.expirationTime<=$);if($=t.unstable_now(),typeof Qe=="function"){E.callback=Qe,J($),ce=!0;break t}E===n(m)&&i(m),J($)}else i(m);E=n(m)}if(E!==null)ce=!0;else{var D=n(h);D!==null&&we(ee,D.startTime-$),ce=!1}}break e}finally{E=null,x=_e,w=!1}ce=void 0}}finally{ce?F():le=!1}}}var F;if(typeof K=="function")F=function(){K(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Pe=P.port2;P.port1.onmessage=k,F=function(){Pe.postMessage(null)}}else F=function(){Q(k,0)};function we($,ce){M=Q(function(){$(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function($){switch(x){case 1:case 2:case 3:var ce=3;break;default:ce=x}var _e=x;x=ce;try{return $()}finally{x=_e}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function($,ce){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var _e=x;x=$;try{return ce()}finally{x=_e}},t.unstable_scheduleCallback=function($,ce,_e){var He=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?He+_e:He):_e=He,$){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=_e+Qe,$={id:v++,callback:ce,priorityLevel:$,startTime:_e,expirationTime:Qe,sortIndex:-1},_e>He?($.sortIndex=_e,e(h,$),n(m)===null&&$===n(h)&&(q?(ne(M),M=-1):q=!0,we(ee,_e-He))):($.sortIndex=Qe,e(m,$),U||w||(U=!0,le||(le=!0,F()))),$},t.unstable_shouldYield=L,t.unstable_wrapCallback=function($){var ce=x;return function(){var _e=x;x=ce;try{return $.apply(this,arguments)}finally{x=_e}}}})(up)),up}var Zv;function bI(){return Zv||(Zv=1,lp.exports=AI()),lp.exports}var cp={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function wI(){if(eT)return ln;eT=1;var t=cg();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:h,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(m,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,v)},ln.flushSync=function(m){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=v,i.d.f()}},ln.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},ln.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},ln.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var v=h.as,E=f(v,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:w}):v==="script"&&i.d.X(m,{crossOrigin:E,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ln.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=f(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},ln.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,E=f(v,h.crossOrigin);i.d.L(m,v,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ln.preloadModule=function(m,h){if(typeof m=="string")if(h){var v=f(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},ln.requestFormReset=function(m){i.d.r(m)},ln.unstable_batchedUpdates=function(m,h){return m(h)},ln.useFormState=function(m,h,v){return u.H.useFormState(m,h,v)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.0",ln}var tT;function CI(){if(tT)return cp.exports;tT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),cp.exports=wI(),cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function II(){if(nT)return mu;nT=1;var t=bI(),e=cg(),n=CI();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var T=y.alternate;if(T===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===T.child){for(T=y.child;T;){if(T===l)return m(y),s;if(T===c)return m(y),r;T=T.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=T;else{for(var A=!1,C=y.child;C;){if(C===l){A=!0,l=y,c=T;break}if(C===c){A=!0,c=y,l=T;break}C=C.sibling}if(!A){for(C=T.child;C;){if(C===l){A=!0,l=T,c=y;break}if(C===c){A=!0,c=T,l=y;break}C=C.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),K=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function Pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case q:return"Fragment";case Q:return"Profiler";case V:return"StrictMode";case ee:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case U:return"Portal";case K:return s.displayName||"Context";case ne:return(s._context.displayName||"Context")+".Consumer";case J:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Pe(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Pe(s(r))}catch{}}return null}var we=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},He=[],Qe=-1;function D(s){return{current:s}}function X(s){0>Qe||(s.current=He[Qe],He[Qe]=null,Qe--)}function ue(s,r){Qe++,He[Qe]=s.current,s.current=r}var de=D(null),ve=D(null),Me=D(null),je=D(null);function Gt(s,r){switch(ue(Me,r),ue(ve,s),ue(de,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?yv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=yv(r),s=_v(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(de),ue(de,s)}function gt(){X(de),X(ve),X(Me)}function Gr(s){s.memoizedState!==null&&ue(je,s);var r=de.current,l=_v(r,s.type);r!==l&&(ue(ve,s),ue(de,l))}function Fo(s){ve.current===s&&(X(de),X(ve)),je.current===s&&(X(je),uu._currentValue=_e)}var Bo,Ho;function Ai(s){if(Bo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Bo=r&&r[1]||"",Ho=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bo+s+Ho}var ul=!1;function zr(s,r){if(!s||ul)return"";ul=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Z){var Y=Z}Reflect.construct(s,[],re)}else{try{re.call()}catch(Z){Y=Z}s.call(re.prototype)}}else{try{throw Error()}catch(Z){Y=Z}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Z){if(Z&&Y&&typeof Z.stack=="string")return[Z.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=c.DetermineComponentFrameRoot(),A=T[0],C=T[1];if(A&&C){var O=A.split(`
`),j=C.split(`
`);for(y=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;if(c===O.length||y===j.length)for(c=O.length-1,y=j.length-1;1<=c&&0<=y&&O[c]!==j[y];)y--;for(;1<=c&&0<=y;c--,y--)if(O[c]!==j[y]){if(c!==1||y!==1)do if(c--,y--,0>y||O[c]!==j[y]){var te=`
`+O[c].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=c&&0<=y);break}}}finally{ul=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ai(l):""}function cl(s,r){switch(s.tag){case 26:case 27:case 5:return Ai(s.type);case 16:return Ai("Lazy");case 13:return s.child!==r&&r!==null?Ai("Suspense Fallback"):Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return zr(s.type,!1);case 11:return zr(s.type.render,!1);case 1:return zr(s.type,!0);case 31:return Ai("Activity");default:return""}}function dl(s){try{var r="",l=null;do r+=cl(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,zt=t.unstable_scheduleCallback,qs=t.unstable_cancelCallback,ah=t.unstable_shouldYield,tc=t.unstable_requestPaint,mn=t.unstable_now,jr=t.unstable_getCurrentPriorityLevel,fl=t.unstable_ImmediatePriority,hl=t.unstable_UserBlockingPriority,Fs=t.unstable_NormalPriority,lh=t.unstable_LowPriority,nc=t.unstable_IdlePriority,ic=t.log,sc=t.unstable_setDisableYieldValue,ri=null,Xt=null;function Hn(s){if(typeof ic=="function"&&sc(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ri,s)}catch{}}var bt=Math.clz32?Math.clz32:oc,rc=Math.log,Go=Math.LN2;function oc(s){return s>>>=0,s===0?32:31-(rc(s)/Go|0)|0}var bi=256,Yr=262144,kt=4194304;function wi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ci(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,T=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var C=c&134217727;return C!==0?(c=C&~T,c!==0?y=wi(c):(A&=C,A!==0?y=wi(A):l||(l=C&~s,l!==0&&(y=wi(l))))):(C=c&~T,C!==0?y=wi(C):A!==0?y=wi(A):l||(l=c&~s,l!==0&&(y=wi(l)))),y===0?0:r!==0&&r!==y&&(r&T)===0&&(T=y&-y,l=r&-r,T>=l||T===32&&(l&4194048)!==0)?r:y}function oi(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function uh(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(){var s=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),s}function Ii(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Kr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ch(s,r,l,c,y,T){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var C=s.entanglements,O=s.expirationTimes,j=s.hiddenUpdates;for(l=A&~l;0<l;){var te=31-bt(l),re=1<<te;C[te]=0,O[te]=-1;var Y=j[te];if(Y!==null)for(j[te]=null,te=0;te<Y.length;te++){var Z=Y[te];Z!==null&&(Z.lane&=-536870913)}l&=~re}c!==0&&$r(s,c,0),T!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=T&~(A&~r))}function $r(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-bt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function ml(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-bt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function pl(s,r){var l=r&-r;return l=(l&42)!==0?1:Jr(l),(l&(s.suspendedLanes|r))!==0?0:l}function Jr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function is(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function lc(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:Bv(s.type))}function ai(s,r){var l=ce.p;try{return ce.p=s,r()}finally{ce.p=l}}var li=Math.random().toString(36).slice(2),Mt="__reactFiber$"+li,Kt="__reactProps$"+li,Ni="__reactContainer$"+li,zo="__reactEvents$"+li,dh="__reactListeners$"+li,uc="__reactHandles$"+li,cc="__reactResources$"+li,Ri="__reactMarker$"+li;function jo(s){delete s[Mt],delete s[Kt],delete s[zo],delete s[dh],delete s[uc]}function ki(s){var r=s[Mt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ni]||l[Mt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=bv(s);s!==null;){if(l=s[Mt])return l;s=bv(s)}return r}s=l,l=s.parentNode}return null}function Gn(s){if(s=s[Mt]||s[Ni]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Nn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Mi(s){var r=s[cc];return r||(r=s[cc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(s){s[Ri]=!0}var gl=new Set,yl={};function Di(s,r){Pi(s,r),Pi(s+"Capture",r)}function Pi(s,r){for(yl[s]=r,s=0;s<r.length;s++)gl.add(r[s])}var _l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vl={},Tl={};function dc(s){return Rt.call(Tl,s)?!0:Rt.call(vl,s)?!1:_l.test(s)?Tl[s]=!0:(vl[s]=!0,!1)}function Yo(s,r,l){if(dc(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Rn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Pt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function $t(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bs(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function El(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,T=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,T.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function et(s){if(!s._valueTracker){var r=Bs(s)?"checked":"value";s._valueTracker=El(s,r,""+s[r])}}function Qr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Bs(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Ui(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Xr=/[\n"\\]/g;function _n(s){return s.replace(Xr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ko(s,r,l,c,y,T,A,C){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+$t(r)):s.value!==""+$t(r)&&(s.value=""+$t(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?xl(s,A,$t(r)):l!=null?xl(s,A,$t(l)):c!=null&&s.removeAttribute("value"),y==null&&T!=null&&(s.defaultChecked=!!T),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+$t(C):s.removeAttribute("name")}function fc(s,r,l,c,y,T,A,C){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),r!=null||l!=null){if(!(T!=="submit"&&T!=="reset"||r!=null)){et(s);return}l=l!=null?""+$t(l):"",r=r!=null?""+$t(r):l,C||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=C?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),et(s)}function xl(s,r,l){r==="number"&&Ui(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Hs(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+$t(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function hc(s,r,l){if(r!=null&&(r=""+$t(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+$t(l):""}function Gs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(we(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=$t(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),et(s)}function vn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var mc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||mc.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Al(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Sl(s,y,c)}else for(var T in r)r.hasOwnProperty(T)&&Sl(s,T,r[T])}function $o(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(s){return zs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ui(){}var bl=null;function zn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var js=null,Vi=null;function Wr(s){var r=Gn(s);if(r&&(s=r.stateNode)){var l=s[Kt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ko(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Kt]||null;if(!y)throw Error(i(90));Ko(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Qr(c)}break e;case"textarea":hc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Hs(s,!!l.multiple,r,!1)}}}var Qo=!1;function Ys(s,r,l){if(Qo)return s(r,l);Qo=!0;try{var c=s(r);return c}finally{if(Qo=!1,(js!==null||Vi!==null)&&(ld(),js&&(r=js,s=Vi,Vi=js=null,Wr(r),s)))for(r=0;r<s.length;r++)Wr(s[r])}}function ci(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Kt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zr=!1;if(jn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Zr=!1}var Li=null,wl=null,eo=null;function Cl(){if(eo)return eo;var s,r=wl,l=r.length,c,y="value"in Li?Li.value:Li.textContent,T=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[T-c];c++);return eo=y.slice(s,1<c?1-c:void 0)}function to(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ss(){return!0}function di(){return!1}function Wt(s){function r(l,c,y,T,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=T,this.target=A,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(T):T[C]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ss:di,this.isPropagationStopped=di,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),r}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Wt(rs),Ks=E({},rs,{view:0,detail:0}),Il=Wt(Ks),$s,Xo,qi,Wo=E({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qi&&(qi&&s.type==="mousemove"?($s=s.screenX-qi.screenX,Xo=s.screenY-qi.screenY):Xo=$s=0,qi=s),$s)},movementY:function(s){return"movementY"in s?s.movementY:Xo}}),Nl=Wt(Wo),no=E({},Wo,{dataTransfer:0}),gc=Wt(no),yc=E({},Ks,{relatedTarget:0}),io=Wt(yc),Rl=E({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),_c=Wt(Rl),Zo=E({},rs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vc=Wt(Zo),Tc=E({},rs,{data:0}),Fi=Wt(Tc),Ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Sc[s])?!!r[s]:!1}function Js(){return Ac}var pn=E({},Ks,{key:function(s){if(s.key){var r=Ec[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=to(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?xc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(s){return s.type==="keypress"?to(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?to(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),bc=Wt(pn),wc=E({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),os=Wt(wc),g=E({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),S=Wt(g),b=E({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Wt(b),G=E({},Wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),W=Wt(G),fe=E({},rs,{newState:0,oldState:0}),Re=Wt(fe),wt=[9,13,27,32],Xe=jn&&"CompositionEvent"in window,yt=null;jn&&"documentMode"in document&&(yt=document.documentMode);var Yn=jn&&"TextEvent"in window&&!yt,Bi=jn&&(!Xe||yt&&8<yt&&11>=yt),fi=" ",hi=!1;function so(s,r){switch(s){case"keyup":return wt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ta=!1;function zw(s,r){switch(s){case"compositionend":return ea(r);case"keypress":return r.which!==32?null:(hi=!0,fi);case"textInput":return s=r.data,s===fi&&hi?null:s;default:return null}}function jw(s,r){if(ta)return s==="compositionend"||!Xe&&so(s,r)?(s=Cl(),eo=wl=Li=null,ta=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bi&&r.locale!=="ko"?null:r.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Yw[s.type]:r==="textarea"}function Ny(s,r,l,c){js?Vi?Vi.push(c):Vi=[c]:js=c,r=pd(r,"onChange"),0<r.length&&(l=new Oi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var kl=null,Ml=null;function Kw(s){dv(s,0)}function Cc(s){var r=Nn(s);if(Qr(r))return s}function Ry(s,r){if(s==="change")return r}var ky=!1;if(jn){var fh;if(jn){var hh="oninput"in document;if(!hh){var My=document.createElement("div");My.setAttribute("oninput","return;"),hh=typeof My.oninput=="function"}fh=hh}else fh=!1;ky=fh&&(!document.documentMode||9<document.documentMode)}function Dy(){kl&&(kl.detachEvent("onpropertychange",Py),Ml=kl=null)}function Py(s){if(s.propertyName==="value"&&Cc(Ml)){var r=[];Ny(r,Ml,s,zn(s)),Ys(Kw,r)}}function $w(s,r,l){s==="focusin"?(Dy(),kl=r,Ml=l,kl.attachEvent("onpropertychange",Py)):s==="focusout"&&Dy()}function Jw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Cc(Ml)}function Qw(s,r){if(s==="click")return Cc(r)}function Xw(s,r){if(s==="input"||s==="change")return Cc(r)}function Ww(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var kn=typeof Object.is=="function"?Object.is:Ww;function Dl(s,r){if(kn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Rt.call(r,y)||!kn(s[y],r[y]))return!1}return!0}function Uy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vy(s,r){var l=Uy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Uy(l)}}function Ly(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ly(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Oy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ui(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Ui(s.document)}return r}function mh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Zw=jn&&"documentMode"in document&&11>=document.documentMode,na=null,ph=null,Pl=null,gh=!1;function qy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;gh||na==null||na!==Ui(c)||(c=na,"selectionStart"in c&&mh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pl&&Dl(Pl,c)||(Pl=c,c=pd(ph,"onSelect"),0<c.length&&(r=new Oi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=na)))}function ro(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ia={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},yh={},Fy={};jn&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function oo(s){if(yh[s])return yh[s];if(!ia[s])return s;var r=ia[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Fy)return yh[s]=r[l];return s}var By=oo("animationend"),Hy=oo("animationiteration"),Gy=oo("animationstart"),eC=oo("transitionrun"),tC=oo("transitionstart"),nC=oo("transitioncancel"),zy=oo("transitionend"),jy=new Map,_h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_h.push("scrollEnd");function mi(s,r){jy.set(s,r),Di(r,[s])}var Ic=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Kn=[],sa=0,vh=0;function Nc(){for(var s=sa,r=vh=sa=0;r<s;){var l=Kn[r];Kn[r++]=null;var c=Kn[r];Kn[r++]=null;var y=Kn[r];Kn[r++]=null;var T=Kn[r];if(Kn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}T!==0&&Yy(l,y,T)}}function Rc(s,r,l,c){Kn[sa++]=s,Kn[sa++]=r,Kn[sa++]=l,Kn[sa++]=c,vh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Th(s,r,l,c){return Rc(s,r,l,c),kc(s)}function ao(s,r){return Rc(s,null,null,r),kc(s)}function Yy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,T=s.return;T!==null;)T.childLanes|=l,c=T.alternate,c!==null&&(c.childLanes|=l),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(y=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,y&&r!==null&&(y=31-bt(l),s=T.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),T):null}function kc(s){if(50<nu)throw nu=0,Nm=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ra={};function iC(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(s,r,l,c){return new iC(s,r,l,c)}function Eh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function as(s,r){var l=s.alternate;return l===null?(l=Mn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Ky(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Mc(s,r,l,c,y,T){var A=0;if(c=s,typeof s=="function")Eh(s)&&(A=1);else if(typeof s=="string")A=lI(s,l,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=Mn(31,l,r,y),s.elementType=I,s.lanes=T,s;case q:return lo(l.children,y,T,r);case V:A=8,y|=24;break;case Q:return s=Mn(12,l,r,y|2),s.elementType=Q,s.lanes=T,s;case ee:return s=Mn(13,l,r,y),s.elementType=ee,s.lanes=T,s;case le:return s=Mn(19,l,r,y),s.elementType=le,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:A=10;break e;case ne:A=9;break e;case J:A=11;break e;case M:A=14;break e;case R:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Mn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=T,r}function lo(s,r,l,c){return s=Mn(7,s,c,r),s.lanes=l,s}function xh(s,r,l){return s=Mn(6,s,null,r),s.lanes=l,s}function $y(s){var r=Mn(18,null,null,0);return r.stateNode=s,r}function Sh(s,r,l){return r=Mn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Jy=new WeakMap;function $n(s,r){if(typeof s=="object"&&s!==null){var l=Jy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:dl(r)},Jy.set(s,r),r)}return{value:s,source:r,stack:dl(r)}}var oa=[],aa=0,Dc=null,Ul=0,Jn=[],Qn=0,Qs=null,Hi=1,Gi="";function ls(s,r){oa[aa++]=Ul,oa[aa++]=Dc,Dc=s,Ul=r}function Qy(s,r,l){Jn[Qn++]=Hi,Jn[Qn++]=Gi,Jn[Qn++]=Qs,Qs=s;var c=Hi;s=Gi;var y=32-bt(c)-1;c&=~(1<<y),l+=1;var T=32-bt(r)+y;if(30<T){var A=y-y%5;T=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Hi=1<<32-bt(r)+y|l<<y|c,Gi=T+s}else Hi=1<<T|l<<y|c,Gi=s}function Ah(s){s.return!==null&&(ls(s,1),Qy(s,1,0))}function bh(s){for(;s===Dc;)Dc=oa[--aa],oa[aa]=null,Ul=oa[--aa],oa[aa]=null;for(;s===Qs;)Qs=Jn[--Qn],Jn[Qn]=null,Gi=Jn[--Qn],Jn[Qn]=null,Hi=Jn[--Qn],Jn[Qn]=null}function Xy(s,r){Jn[Qn++]=Hi,Jn[Qn++]=Gi,Jn[Qn++]=Qs,Hi=r.id,Gi=r.overflow,Qs=s}var Zt=null,dt=null,Ge=!1,Xs=null,Xn=!1,wh=Error(i(519));function Ws(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl($n(r,s)),wh}function Wy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Mt]=s,r[Kt]=c,l){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(l=0;l<su.length;l++)Ve(su[l],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),fc(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),Gs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||pv(r.textContent,l)?(c.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),c.onScroll!=null&&Ve("scroll",r),c.onScrollEnd!=null&&Ve("scrollend",r),c.onClick!=null&&(r.onclick=ui),r=!0):r=!1,r||Ws(s,!0)}function Zy(s){for(Zt=s.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Zt=Zt.return}}function la(s){if(s!==Zt)return!1;if(!Ge)return Zy(s),Ge=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||zm(s.type,s.memoizedProps)),l=!l),l&&dt&&Ws(s),Zy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=Av(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=Av(s)}else r===27?(r=dt,fr(s.type)?(s=Jm,Jm=null,dt=s):dt=r):dt=Zt?Zn(s.stateNode.nextSibling):null;return!0}function uo(){dt=Zt=null,Ge=!1}function Ch(){var s=Xs;return s!==null&&(Sn===null?Sn=s:Sn.push.apply(Sn,s),Xs=null),s}function Vl(s){Xs===null?Xs=[s]:Xs.push(s)}var Ih=D(null),co=null,us=null;function Zs(s,r,l){ue(Ih,r._currentValue),r._currentValue=l}function cs(s){s._currentValue=Ih.current,X(Ih)}function Nh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Rh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){var A=y.child;T=T.firstContext;e:for(;T!==null;){var C=T;T=y;for(var O=0;O<r.length;O++)if(C.context===r[O]){T.lanes|=l,C=T.alternate,C!==null&&(C.lanes|=l),Nh(T.return,l,s),c||(A=null);break e}T=C.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,T=A.alternate,T!==null&&(T.lanes|=l),Nh(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function ua(s,r,l,c){s=null;for(var y=r,T=!1;y!==null;){if(!T){if((y.flags&524288)!==0)T=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var C=y.type;kn(y.pendingProps.value,A.value)||(s!==null?s.push(C):s=[C])}}else if(y===je.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(uu):s=[uu])}y=y.return}s!==null&&Rh(r,s,l,c),r.flags|=262144}function Pc(s){for(s=s.firstContext;s!==null;){if(!kn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function fo(s){co=s,us=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function en(s){return e_(co,s)}function Uc(s,r){return co===null&&fo(s),e_(s,r)}function e_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},us===null){if(s===null)throw Error(i(308));us=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else us=us.next=r;return l}var sC=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},rC=t.unstable_scheduleCallback,oC=t.unstable_NormalPriority,Ut={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new sC,data:new Map,refCount:0}}function Ll(s){s.refCount--,s.refCount===0&&rC(oC,function(){s.controller.abort()})}var Ol=null,Mh=0,ca=0,da=null;function aC(s,r){if(Ol===null){var l=Ol=[];Mh=0,ca=Um(),da={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Mh++,r.then(t_,t_),r}function t_(){if(--Mh===0&&Ol!==null){da!==null&&(da.status="fulfilled");var s=Ol;Ol=null,ca=0,da=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function lC(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var n_=$.S;$.S=function(s,r){q0=mn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&aC(s,r),n_!==null&&n_(s,r)};var ho=D(null);function Dh(){var s=ho.current;return s!==null?s:lt.pooledCache}function Vc(s,r){r===null?ue(ho,ho.current):ue(ho,r.pool)}function i_(){var s=Dh();return s===null?null:{parent:Ut._currentValue,pool:s}}var fa=Error(i(460)),Ph=Error(i(474)),Lc=Error(i(542)),Oc={then:function(){}};function s_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function r_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ui,ui),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,a_(s),s;default:if(typeof r.status=="string")r.then(ui,ui);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,a_(s),s}throw po=r,fa}}function mo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(po=l,fa):l}}var po=null;function o_(){if(po===null)throw Error(i(459));var s=po;return po=null,s}function a_(s){if(s===fa||s===Lc)throw Error(i(483))}var ha=null,ql=0;function qc(s){var r=ql;return ql+=1,ha===null&&(ha=[]),r_(ha,s,r)}function Fl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Fc(s,r){throw r.$$typeof===x?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function l_(s){function r(H,B){if(s){var z=H.deletions;z===null?(H.deletions=[B],H.flags|=16):z.push(B)}}function l(H,B){if(!s)return null;for(;B!==null;)r(H,B),B=B.sibling;return null}function c(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function y(H,B){return H=as(H,B),H.index=0,H.sibling=null,H}function T(H,B,z){return H.index=z,s?(z=H.alternate,z!==null?(z=z.index,z<B?(H.flags|=67108866,B):z):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function A(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function C(H,B,z,ie){return B===null||B.tag!==6?(B=xh(z,H.mode,ie),B.return=H,B):(B=y(B,z),B.return=H,B)}function O(H,B,z,ie){var Te=z.type;return Te===q?te(H,B,z.props.children,ie,z.key):B!==null&&(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&mo(Te)===B.type)?(B=y(B,z.props),Fl(B,z),B.return=H,B):(B=Mc(z.type,z.key,z.props,null,H.mode,ie),Fl(B,z),B.return=H,B)}function j(H,B,z,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=Sh(z,H.mode,ie),B.return=H,B):(B=y(B,z.children||[]),B.return=H,B)}function te(H,B,z,ie,Te){return B===null||B.tag!==7?(B=lo(z,H.mode,ie,Te),B.return=H,B):(B=y(B,z),B.return=H,B)}function re(H,B,z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=xh(""+B,H.mode,z),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return z=Mc(B.type,B.key,B.props,null,H.mode,z),Fl(z,B),z.return=H,z;case U:return B=Sh(B,H.mode,z),B.return=H,B;case R:return B=mo(B),re(H,B,z)}if(we(B)||F(B))return B=lo(B,H.mode,z,null),B.return=H,B;if(typeof B.then=="function")return re(H,qc(B),z);if(B.$$typeof===K)return re(H,Uc(H,B),z);Fc(H,B)}return null}function Y(H,B,z,ie){var Te=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Te!==null?null:C(H,B,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return z.key===Te?O(H,B,z,ie):null;case U:return z.key===Te?j(H,B,z,ie):null;case R:return z=mo(z),Y(H,B,z,ie)}if(we(z)||F(z))return Te!==null?null:te(H,B,z,ie,null);if(typeof z.then=="function")return Y(H,B,qc(z),ie);if(z.$$typeof===K)return Y(H,B,Uc(H,z),ie);Fc(H,z)}return null}function Z(H,B,z,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return H=H.get(z)||null,C(B,H,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return H=H.get(ie.key===null?z:ie.key)||null,O(B,H,ie,Te);case U:return H=H.get(ie.key===null?z:ie.key)||null,j(B,H,ie,Te);case R:return ie=mo(ie),Z(H,B,z,ie,Te)}if(we(ie)||F(ie))return H=H.get(z)||null,te(B,H,ie,Te,null);if(typeof ie.then=="function")return Z(H,B,z,qc(ie),Te);if(ie.$$typeof===K)return Z(H,B,z,Uc(B,ie),Te);Fc(B,ie)}return null}function ge(H,B,z,ie){for(var Te=null,Ke=null,ye=B,De=B=0,Oe=null;ye!==null&&De<z.length;De++){ye.index>De?(Oe=ye,ye=null):Oe=ye.sibling;var $e=Y(H,ye,z[De],ie);if($e===null){ye===null&&(ye=Oe);break}s&&ye&&$e.alternate===null&&r(H,ye),B=T($e,B,De),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e,ye=Oe}if(De===z.length)return l(H,ye),Ge&&ls(H,De),Te;if(ye===null){for(;De<z.length;De++)ye=re(H,z[De],ie),ye!==null&&(B=T(ye,B,De),Ke===null?Te=ye:Ke.sibling=ye,Ke=ye);return Ge&&ls(H,De),Te}for(ye=c(ye);De<z.length;De++)Oe=Z(ye,H,De,z[De],ie),Oe!==null&&(s&&Oe.alternate!==null&&ye.delete(Oe.key===null?De:Oe.key),B=T(Oe,B,De),Ke===null?Te=Oe:Ke.sibling=Oe,Ke=Oe);return s&&ye.forEach(function(yr){return r(H,yr)}),Ge&&ls(H,De),Te}function Se(H,B,z,ie){if(z==null)throw Error(i(151));for(var Te=null,Ke=null,ye=B,De=B=0,Oe=null,$e=z.next();ye!==null&&!$e.done;De++,$e=z.next()){ye.index>De?(Oe=ye,ye=null):Oe=ye.sibling;var yr=Y(H,ye,$e.value,ie);if(yr===null){ye===null&&(ye=Oe);break}s&&ye&&yr.alternate===null&&r(H,ye),B=T(yr,B,De),Ke===null?Te=yr:Ke.sibling=yr,Ke=yr,ye=Oe}if($e.done)return l(H,ye),Ge&&ls(H,De),Te;if(ye===null){for(;!$e.done;De++,$e=z.next())$e=re(H,$e.value,ie),$e!==null&&(B=T($e,B,De),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e);return Ge&&ls(H,De),Te}for(ye=c(ye);!$e.done;De++,$e=z.next())$e=Z(ye,H,De,$e.value,ie),$e!==null&&(s&&$e.alternate!==null&&ye.delete($e.key===null?De:$e.key),B=T($e,B,De),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e);return s&&ye.forEach(function(vI){return r(H,vI)}),Ge&&ls(H,De),Te}function ot(H,B,z,ie){if(typeof z=="object"&&z!==null&&z.type===q&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case w:e:{for(var Te=z.key;B!==null;){if(B.key===Te){if(Te=z.type,Te===q){if(B.tag===7){l(H,B.sibling),ie=y(B,z.props.children),ie.return=H,H=ie;break e}}else if(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&mo(Te)===B.type){l(H,B.sibling),ie=y(B,z.props),Fl(ie,z),ie.return=H,H=ie;break e}l(H,B);break}else r(H,B);B=B.sibling}z.type===q?(ie=lo(z.props.children,H.mode,ie,z.key),ie.return=H,H=ie):(ie=Mc(z.type,z.key,z.props,null,H.mode,ie),Fl(ie,z),ie.return=H,H=ie)}return A(H);case U:e:{for(Te=z.key;B!==null;){if(B.key===Te)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){l(H,B.sibling),ie=y(B,z.children||[]),ie.return=H,H=ie;break e}else{l(H,B);break}else r(H,B);B=B.sibling}ie=Sh(z,H.mode,ie),ie.return=H,H=ie}return A(H);case R:return z=mo(z),ot(H,B,z,ie)}if(we(z))return ge(H,B,z,ie);if(F(z)){if(Te=F(z),typeof Te!="function")throw Error(i(150));return z=Te.call(z),Se(H,B,z,ie)}if(typeof z.then=="function")return ot(H,B,qc(z),ie);if(z.$$typeof===K)return ot(H,B,Uc(H,z),ie);Fc(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,B!==null&&B.tag===6?(l(H,B.sibling),ie=y(B,z),ie.return=H,H=ie):(l(H,B),ie=xh(z,H.mode,ie),ie.return=H,H=ie),A(H)):l(H,B)}return function(H,B,z,ie){try{ql=0;var Te=ot(H,B,z,ie);return ha=null,Te}catch(ye){if(ye===fa||ye===Lc)throw ye;var Ke=Mn(29,ye,null,H.mode);return Ke.lanes=ie,Ke.return=H,Ke}finally{}}}var go=l_(!0),u_=l_(!1),er=!1;function Uh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function tr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function nr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=kc(s),Yy(s,null,l),r}return Rc(s,c,r,l),kc(s)}function Bl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ml(s,l)}}function Lh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,T=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};T===null?y=T=A:T=T.next=A,l=l.next}while(l!==null);T===null?y=T=r:T=T.next=r}else y=T=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:T,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Oh=!1;function Hl(){if(Oh){var s=da;if(s!==null)throw s}}function Gl(s,r,l,c){Oh=!1;var y=s.updateQueue;er=!1;var T=y.firstBaseUpdate,A=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var O=C,j=O.next;O.next=null,A===null?T=j:A.next=j,A=O;var te=s.alternate;te!==null&&(te=te.updateQueue,C=te.lastBaseUpdate,C!==A&&(C===null?te.firstBaseUpdate=j:C.next=j,te.lastBaseUpdate=O))}if(T!==null){var re=y.baseState;A=0,te=j=O=null,C=T;do{var Y=C.lane&-536870913,Z=Y!==C.lane;if(Z?(Le&Y)===Y:(c&Y)===Y){Y!==0&&Y===ca&&(Oh=!0),te!==null&&(te=te.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=s,Se=C;Y=r;var ot=l;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){re=ge.call(ot,re,Y);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,Y=typeof ge=="function"?ge.call(ot,re,Y):ge,Y==null)break e;re=E({},re,Y);break e;case 2:er=!0}}Y=C.callback,Y!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[Y]:Z.push(Y))}else Z={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},te===null?(j=te=Z,O=re):te=te.next=Z,A|=Y;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);te===null&&(O=re),y.baseState=O,y.firstBaseUpdate=j,y.lastBaseUpdate=te,T===null&&(y.shared.lanes=0),ar|=A,s.lanes=A,s.memoizedState=re}}function c_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function d_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)c_(l[s],r)}var ma=D(null),Bc=D(0);function f_(s,r){s=vs,ue(Bc,s),ue(ma,r),vs=s|r.baseLanes}function qh(){ue(Bc,vs),ue(ma,ma.current)}function Fh(){vs=Bc.current,X(ma),X(Bc)}var Dn=D(null),Wn=null;function ir(s){var r=s.alternate;ue(Ct,Ct.current&1),ue(Dn,s),Wn===null&&(r===null||ma.current!==null||r.memoizedState!==null)&&(Wn=s)}function Bh(s){ue(Ct,Ct.current),ue(Dn,s),Wn===null&&(Wn=s)}function h_(s){s.tag===22?(ue(Ct,Ct.current),ue(Dn,s),Wn===null&&(Wn=s)):sr()}function sr(){ue(Ct,Ct.current),ue(Dn,Dn.current)}function Pn(s){X(Dn),Wn===s&&(Wn=null),X(Ct)}var Ct=D(0);function Hc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Km(l)||$m(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ds=0,ke=null,st=null,Vt=null,Gc=!1,pa=!1,yo=!1,zc=0,zl=0,ga=null,uC=0;function Tt(){throw Error(i(321))}function Hh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!kn(s[l],r[l]))return!1;return!0}function Gh(s,r,l,c,y,T){return ds=T,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=s===null||s.memoizedState===null?Q_:sm,yo=!1,T=l(c,y),yo=!1,pa&&(T=p_(r,l,c,y)),m_(s),T}function m_(s){$.H=Kl;var r=st!==null&&st.next!==null;if(ds=0,Vt=st=ke=null,Gc=!1,zl=0,ga=null,r)throw Error(i(300));s===null||Lt||(s=s.dependencies,s!==null&&Pc(s)&&(Lt=!0))}function p_(s,r,l,c){ke=s;var y=0;do{if(pa&&(ga=null),zl=0,pa=!1,25<=y)throw Error(i(301));if(y+=1,Vt=st=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}$.H=X_,T=r(l,c)}while(pa);return T}function cC(){var s=$.H,r=s.useState()[0];return r=typeof r.then=="function"?jl(r):r,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(ke.flags|=1024),r}function zh(){var s=zc!==0;return zc=0,s}function jh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Yh(s){if(Gc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Gc=!1}ds=0,Vt=st=ke=null,pa=!1,zl=zc=0,ga=null}function gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ke.memoizedState=Vt=s:Vt=Vt.next=s,Vt}function It(){if(st===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var r=Vt===null?ke.memoizedState:Vt.next;if(r!==null)Vt=r,st=s;else{if(s===null)throw ke.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Vt===null?ke.memoizedState=Vt=s:Vt=Vt.next=s}return Vt}function jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(s){var r=zl;return zl+=1,ga===null&&(ga=[]),s=r_(ga,s,r),r=ke,(Vt===null?r.memoizedState:Vt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?Q_:sm),s}function Yc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return jl(s);if(s.$$typeof===K)return en(s)}throw Error(i(438,String(s)))}function Kh(s){var r=null,l=ke.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=jc(),ke.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=L;return r.index++,l}function fs(s,r){return typeof r=="function"?r(s):r}function Kc(s){var r=It();return $h(r,st,s)}function $h(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,T=c.pending;if(T!==null){if(y!==null){var A=y.next;y.next=T.next,T.next=A}r.baseQueue=y=T,c.pending=null}if(T=s.baseState,y===null)s.memoizedState=T;else{r=y.next;var C=A=null,O=null,j=r,te=!1;do{var re=j.lane&-536870913;if(re!==j.lane?(Le&re)===re:(ds&re)===re){var Y=j.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),re===ca&&(te=!0);else if((ds&Y)===Y){j=j.next,Y===ca&&(te=!0);continue}else re={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},O===null?(C=O=re,A=T):O=O.next=re,ke.lanes|=Y,ar|=Y;re=j.action,yo&&l(T,re),T=j.hasEagerState?j.eagerState:l(T,re)}else Y={lane:re,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},O===null?(C=O=Y,A=T):O=O.next=Y,ke.lanes|=re,ar|=re;j=j.next}while(j!==null&&j!==r);if(O===null?A=T:O.next=C,!kn(T,s.memoizedState)&&(Lt=!0,te&&(l=da,l!==null)))throw l;s.memoizedState=T,s.baseState=A,s.baseQueue=O,c.lastRenderedState=T}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Jh(s){var r=It(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,T=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do T=s(T,A.action),A=A.next;while(A!==y);kn(T,r.memoizedState)||(Lt=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),l.lastRenderedState=T}return[T,c]}function g_(s,r,l){var c=ke,y=It(),T=Ge;if(T){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!kn((st||y).memoizedState,l);if(A&&(y.memoizedState=l,Lt=!0),y=y.queue,Wh(v_.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Vt!==null&&Vt.memoizedState.tag&1){if(c.flags|=2048,ya(9,{destroy:void 0},__.bind(null,c,y,l,r),null),lt===null)throw Error(i(349));T||(ds&127)!==0||y_(c,r,l)}return l}function y_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=ke.updateQueue,r===null?(r=jc(),ke.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function __(s,r,l,c){r.value=l,r.getSnapshot=c,T_(r)&&E_(s)}function v_(s,r,l){return l(function(){T_(r)&&E_(s)})}function T_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!kn(s,l)}catch{return!0}}function E_(s){var r=ao(s,2);r!==null&&An(r,s,2)}function Qh(s){var r=gn();if(typeof s=="function"){var l=s;if(s=l(),yo){Hn(!0);try{l()}finally{Hn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:s},r}function x_(s,r,l,c){return s.baseState=l,$h(s,st,typeof c=="function"?c:fs)}function dC(s,r,l,c,y){if(Qc(s))throw Error(i(485));if(s=r.action,s!==null){var T={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){T.listeners.push(A)}};$.T!==null?l(!0):T.isTransition=!1,c(T),l=r.pending,l===null?(T.next=r.pending=T,S_(r,T)):(T.next=l.next,r.pending=l.next=T)}}function S_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var T=$.T,A={};$.T=A;try{var C=l(y,c),O=$.S;O!==null&&O(A,C),A_(s,r,C)}catch(j){Xh(s,r,j)}finally{T!==null&&A.types!==null&&(T.types=A.types),$.T=T}}else try{T=l(y,c),A_(s,r,T)}catch(j){Xh(s,r,j)}}function A_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){b_(s,r,c)},function(c){return Xh(s,r,c)}):b_(s,r,l)}function b_(s,r,l){r.status="fulfilled",r.value=l,w_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,S_(s,l)))}function Xh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,w_(r),r=r.next;while(r!==c)}s.action=null}function w_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function C_(s,r){return r}function I_(s,r){if(Ge){var l=lt.formState;if(l!==null){e:{var c=ke;if(Ge){if(dt){t:{for(var y=dt,T=Xn;y.nodeType!==8;){if(!T){y=null;break t}if(y=Zn(y.nextSibling),y===null){y=null;break t}}T=y.data,y=T==="F!"||T==="F"?y:null}if(y){dt=Zn(y.nextSibling),c=y.data==="F!";break e}}Ws(c)}c=!1}c&&(r=l[0])}}return l=gn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:r},l.queue=c,l=K_.bind(null,ke,c),c.dispatch=l,c=Qh(!1),T=im.bind(null,ke,!1,c.queue),c=gn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=dC.bind(null,ke,y,T,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function N_(s){var r=It();return R_(r,st,s)}function R_(s,r,l){if(r=$h(s,r,C_)[0],s=Kc(fs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=jl(r)}catch(A){throw A===fa?Lc:A}else c=r;r=It();var y=r.queue,T=y.dispatch;return l!==r.memoizedState&&(ke.flags|=2048,ya(9,{destroy:void 0},fC.bind(null,y,l),null)),[c,T,s]}function fC(s,r){s.action=r}function k_(s){var r=It(),l=st;if(l!==null)return R_(r,l,s);It(),r=r.memoizedState,l=It();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ya(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=jc(),ke.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function M_(){return It().memoizedState}function $c(s,r,l,c){var y=gn();ke.flags|=s,y.memoizedState=ya(1|r,{destroy:void 0},l,c===void 0?null:c)}function Jc(s,r,l,c){var y=It();c=c===void 0?null:c;var T=y.memoizedState.inst;st!==null&&c!==null&&Hh(c,st.memoizedState.deps)?y.memoizedState=ya(r,T,l,c):(ke.flags|=s,y.memoizedState=ya(1|r,T,l,c))}function D_(s,r){$c(8390656,8,s,r)}function Wh(s,r){Jc(2048,8,s,r)}function hC(s){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=jc(),ke.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function P_(s){var r=It().memoizedState;return hC({ref:r,nextImpl:s}),function(){if((We&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function U_(s,r){return Jc(4,2,s,r)}function V_(s,r){return Jc(4,4,s,r)}function L_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function O_(s,r,l){l=l!=null?l.concat([s]):null,Jc(4,4,L_.bind(null,r,s),l)}function Zh(){}function q_(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Hh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function F_(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Hh(r,c[1]))return c[0];if(c=s(),yo){Hn(!0);try{s()}finally{Hn(!1)}}return l.memoizedState=[c,r],c}function em(s,r,l){return l===void 0||(ds&1073741824)!==0&&(Le&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=B0(),ke.lanes|=s,ar|=s,l)}function B_(s,r,l,c){return kn(l,r)?l:ma.current!==null?(s=em(s,l,c),kn(s,r)||(Lt=!0),s):(ds&42)===0||(ds&1073741824)!==0&&(Le&261930)===0?(Lt=!0,s.memoizedState=l):(s=B0(),ke.lanes|=s,ar|=s,r)}function H_(s,r,l,c,y){var T=ce.p;ce.p=T!==0&&8>T?T:8;var A=$.T,C={};$.T=C,im(s,!1,r,l);try{var O=y(),j=$.S;if(j!==null&&j(C,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var te=lC(O,c);Yl(s,r,te,Ln(s))}else Yl(s,r,c,Ln(s))}catch(re){Yl(s,r,{then:function(){},status:"rejected",reason:re},Ln())}finally{ce.p=T,A!==null&&C.types!==null&&(A.types=C.types),$.T=A}}function mC(){}function tm(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=G_(s).queue;H_(s,y,r,_e,l===null?mC:function(){return z_(s),l(c)})}function G_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function z_(s){var r=G_(s);r.next===null&&(r=s.alternate.memoizedState),Yl(s,r.next.queue,{},Ln())}function nm(){return en(uu)}function j_(){return It().memoizedState}function Y_(){return It().memoizedState}function pC(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ln();s=tr(l);var c=nr(r,s,l);c!==null&&(An(c,r,l),Bl(c,r,l)),r={cache:kh()},s.payload=r;return}r=r.return}}function gC(s,r,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qc(s)?$_(r,l):(l=Th(s,r,l,c),l!==null&&(An(l,s,c),J_(l,r,c)))}function K_(s,r,l){var c=Ln();Yl(s,r,l,c)}function Yl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qc(s))$_(r,y);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var A=r.lastRenderedState,C=T(A,l);if(y.hasEagerState=!0,y.eagerState=C,kn(C,A))return Rc(s,r,y,0),lt===null&&Nc(),!1}catch{}finally{}if(l=Th(s,r,y,c),l!==null)return An(l,s,c),J_(l,r,c),!0}return!1}function im(s,r,l,c){if(c={lane:2,revertLane:Um(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qc(s)){if(r)throw Error(i(479))}else r=Th(s,l,c,2),r!==null&&An(r,s,2)}function Qc(s){var r=s.alternate;return s===ke||r!==null&&r===ke}function $_(s,r){pa=Gc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function J_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ml(s,l)}}var Kl={readContext:en,use:Yc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Kl.useEffectEvent=Tt;var Q_={readContext:en,use:Yc,useCallback:function(s,r){return gn().memoizedState=[s,r===void 0?null:r],s},useContext:en,useEffect:D_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,$c(4194308,4,L_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return $c(4194308,4,s,r)},useInsertionEffect:function(s,r){$c(4,2,s,r)},useMemo:function(s,r){var l=gn();r=r===void 0?null:r;var c=s();if(yo){Hn(!0);try{s()}finally{Hn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=gn();if(l!==void 0){var y=l(r);if(yo){Hn(!0);try{l(r)}finally{Hn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=gC.bind(null,ke,s),[c.memoizedState,s]},useRef:function(s){var r=gn();return s={current:s},r.memoizedState=s},useState:function(s){s=Qh(s);var r=s.queue,l=K_.bind(null,ke,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Zh,useDeferredValue:function(s,r){var l=gn();return em(l,s,r)},useTransition:function(){var s=Qh(!1);return s=H_.bind(null,ke,s.queue,!0,!1),gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=ke,y=gn();if(Ge){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),lt===null)throw Error(i(349));(Le&127)!==0||y_(c,r,l)}y.memoizedState=l;var T={value:l,getSnapshot:r};return y.queue=T,D_(v_.bind(null,c,T,s),[s]),c.flags|=2048,ya(9,{destroy:void 0},__.bind(null,c,T,l,r),null),l},useId:function(){var s=gn(),r=lt.identifierPrefix;if(Ge){var l=Gi,c=Hi;l=(c&~(1<<32-bt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=zc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=uC++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:nm,useFormState:I_,useActionState:I_,useOptimistic:function(s){var r=gn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=im.bind(null,ke,!0,l),l.dispatch=r,[s,r]},useMemoCache:Kh,useCacheRefresh:function(){return gn().memoizedState=pC.bind(null,ke)},useEffectEvent:function(s){var r=gn(),l={impl:s};return r.memoizedState=l,function(){if((We&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},sm={readContext:en,use:Yc,useCallback:q_,useContext:en,useEffect:Wh,useImperativeHandle:O_,useInsertionEffect:U_,useLayoutEffect:V_,useMemo:F_,useReducer:Kc,useRef:M_,useState:function(){return Kc(fs)},useDebugValue:Zh,useDeferredValue:function(s,r){var l=It();return B_(l,st.memoizedState,s,r)},useTransition:function(){var s=Kc(fs)[0],r=It().memoizedState;return[typeof s=="boolean"?s:jl(s),r]},useSyncExternalStore:g_,useId:j_,useHostTransitionStatus:nm,useFormState:N_,useActionState:N_,useOptimistic:function(s,r){var l=It();return x_(l,st,s,r)},useMemoCache:Kh,useCacheRefresh:Y_};sm.useEffectEvent=P_;var X_={readContext:en,use:Yc,useCallback:q_,useContext:en,useEffect:Wh,useImperativeHandle:O_,useInsertionEffect:U_,useLayoutEffect:V_,useMemo:F_,useReducer:Jh,useRef:M_,useState:function(){return Jh(fs)},useDebugValue:Zh,useDeferredValue:function(s,r){var l=It();return st===null?em(l,s,r):B_(l,st.memoizedState,s,r)},useTransition:function(){var s=Jh(fs)[0],r=It().memoizedState;return[typeof s=="boolean"?s:jl(s),r]},useSyncExternalStore:g_,useId:j_,useHostTransitionStatus:nm,useFormState:k_,useActionState:k_,useOptimistic:function(s,r){var l=It();return st!==null?x_(l,st,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Kh,useCacheRefresh:Y_};X_.useEffectEvent=P_;function rm(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var om={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Ln(),y=tr(c);y.payload=r,l!=null&&(y.callback=l),r=nr(s,y,c),r!==null&&(An(r,s,c),Bl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Ln(),y=tr(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=nr(s,y,c),r!==null&&(An(r,s,c),Bl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Ln(),c=tr(l);c.tag=2,r!=null&&(c.callback=r),r=nr(s,c,l),r!==null&&(An(r,s,l),Bl(r,s,l))}};function W_(s,r,l,c,y,T,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,T,A):r.prototype&&r.prototype.isPureReactComponent?!Dl(l,c)||!Dl(y,T):!0}function Z_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&om.enqueueReplaceState(r,r.state,null)}function _o(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function e0(s){Ic(s)}function t0(s){console.error(s)}function n0(s){Ic(s)}function Xc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function i0(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function am(s,r,l){return l=tr(l),l.tag=3,l.payload={element:null},l.callback=function(){Xc(s,r)},l}function s0(s){return s=tr(s),s.tag=3,s}function r0(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var T=c.value;s.payload=function(){return y(T)},s.callback=function(){i0(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){i0(r,l,c),typeof y!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function yC(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&ua(r,l,y,!0),l=Dn.current,l!==null){switch(l.tag){case 31:case 13:return Wn===null?ud():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Oc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Mm(s,c,y)),!1;case 22:return l.flags|=65536,c===Oc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Mm(s,c,y)),!1}throw Error(i(435,l.tag))}return Mm(s,c,y),ud(),!1}if(Ge)return r=Dn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==wh&&(s=Error(i(422),{cause:c}),Vl($n(s,l)))):(c!==wh&&(r=Error(i(423),{cause:c}),Vl($n(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=$n(c,l),y=am(s.stateNode,c,y),Lh(s,y),Et!==4&&(Et=2)),!1;var T=Error(i(520),{cause:c});if(T=$n(T,l),tu===null?tu=[T]:tu.push(T),Et!==4&&(Et=2),r===null)return!0;c=$n(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=am(l.stateNode,c,s),Lh(l,s),!1;case 1:if(r=l.type,T=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(lr===null||!lr.has(T))))return l.flags|=65536,y&=-y,l.lanes|=y,y=s0(y),r0(y,s,l,c),Lh(l,y),!1}l=l.return}while(l!==null);return!1}var lm=Error(i(461)),Lt=!1;function tn(s,r,l,c){r.child=s===null?u_(r,null,l,c):go(r,s.child,l,c)}function o0(s,r,l,c,y){l=l.render;var T=r.ref;if("ref"in c){var A={};for(var C in c)C!=="ref"&&(A[C]=c[C])}else A=c;return fo(r),c=Gh(s,r,l,A,T,y),C=zh(),s!==null&&!Lt?(jh(s,r,y),hs(s,r,y)):(Ge&&C&&Ah(r),r.flags|=1,tn(s,r,c,y),r.child)}function a0(s,r,l,c,y){if(s===null){var T=l.type;return typeof T=="function"&&!Eh(T)&&T.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=T,l0(s,r,T,c,y)):(s=Mc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(T=s.child,!gm(s,y)){var A=T.memoizedProps;if(l=l.compare,l=l!==null?l:Dl,l(A,c)&&s.ref===r.ref)return hs(s,r,y)}return r.flags|=1,s=as(T,c),s.ref=r.ref,s.return=r,r.child=s}function l0(s,r,l,c,y){if(s!==null){var T=s.memoizedProps;if(Dl(T,c)&&s.ref===r.ref)if(Lt=!1,r.pendingProps=c=T,gm(s,y))(s.flags&131072)!==0&&(Lt=!0);else return r.lanes=s.lanes,hs(s,r,y)}return um(s,r,l,c,y)}function u0(s,r,l,c){var y=c.children,T=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(T=T!==null?T.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~T}else c=0,r.child=null;return c0(s,r,T,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Vc(r,T!==null?T.cachePool:null),T!==null?f_(r,T):qh(),h_(r);else return c=r.lanes=536870912,c0(s,r,T!==null?T.baseLanes|l:l,l,c)}else T!==null?(Vc(r,T.cachePool),f_(r,T),sr(),r.memoizedState=null):(s!==null&&Vc(r,null),qh(),sr());return tn(s,r,y,l),r.child}function $l(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function c0(s,r,l,c,y){var T=Dh();return T=T===null?null:{parent:Ut._currentValue,pool:T},r.memoizedState={baseLanes:l,cachePool:T},s!==null&&Vc(r,null),qh(),h_(r),s!==null&&ua(s,r,c,!0),r.childLanes=y,null}function Wc(s,r){return r=ed({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function d0(s,r,l){return go(r,s.child,null,l),s=Wc(r,r.pendingProps),s.flags|=2,Pn(r),r.memoizedState=null,s}function _C(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ge){if(c.mode==="hidden")return s=Wc(r,c),r.lanes=536870912,$l(null,s);if(Bh(r),(s=dt)?(s=Sv(s,Xn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Qs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=$y(s),l.return=r,r.child=l,Zt=r,dt=null)):s=null,s===null)throw Ws(r);return r.lanes=536870912,null}return Wc(r,c)}var T=s.memoizedState;if(T!==null){var A=T.dehydrated;if(Bh(r),y)if(r.flags&256)r.flags&=-257,r=d0(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Lt||ua(s,r,l,!1),y=(l&s.childLanes)!==0,Lt||y){if(c=lt,c!==null&&(A=pl(c,l),A!==0&&A!==T.retryLane))throw T.retryLane=A,ao(s,A),An(c,s,A),lm;ud(),r=d0(s,r,l)}else s=T.treeContext,dt=Zn(A.nextSibling),Zt=r,Ge=!0,Xs=null,Xn=!1,s!==null&&Xy(r,s),r=Wc(r,c),r.flags|=4096;return r}return s=as(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Zc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function um(s,r,l,c,y){return fo(r),l=Gh(s,r,l,c,void 0,y),c=zh(),s!==null&&!Lt?(jh(s,r,y),hs(s,r,y)):(Ge&&c&&Ah(r),r.flags|=1,tn(s,r,l,y),r.child)}function f0(s,r,l,c,y,T){return fo(r),r.updateQueue=null,l=p_(r,c,l,y),m_(s),c=zh(),s!==null&&!Lt?(jh(s,r,T),hs(s,r,T)):(Ge&&c&&Ah(r),r.flags|=1,tn(s,r,l,T),r.child)}function h0(s,r,l,c,y){if(fo(r),r.stateNode===null){var T=ra,A=l.contextType;typeof A=="object"&&A!==null&&(T=en(A)),T=new l(c,T),r.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=om,r.stateNode=T,T._reactInternals=r,T=r.stateNode,T.props=c,T.state=r.memoizedState,T.refs={},Uh(r),A=l.contextType,T.context=typeof A=="object"&&A!==null?en(A):ra,T.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(rm(r,l,A,c),T.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(A=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),A!==T.state&&om.enqueueReplaceState(T,T.state,null),Gl(r,c,T,y),Hl(),T.state=r.memoizedState),typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){T=r.stateNode;var C=r.memoizedProps,O=_o(l,C);T.props=O;var j=T.context,te=l.contextType;A=ra,typeof te=="object"&&te!==null&&(A=en(te));var re=l.getDerivedStateFromProps;te=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,te||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C||j!==A)&&Z_(r,T,c,A),er=!1;var Y=r.memoizedState;T.state=Y,Gl(r,c,T,y),Hl(),j=r.memoizedState,C||Y!==j||er?(typeof re=="function"&&(rm(r,l,re,c),j=r.memoizedState),(O=er||W_(r,l,O,c,Y,j,A))?(te||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(r.flags|=4194308)):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=j),T.props=c,T.state=j,T.context=A,c=O):(typeof T.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{T=r.stateNode,Vh(s,r),A=r.memoizedProps,te=_o(l,A),T.props=te,re=r.pendingProps,Y=T.context,j=l.contextType,O=ra,typeof j=="object"&&j!==null&&(O=en(j)),C=l.getDerivedStateFromProps,(j=typeof C=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(A!==re||Y!==O)&&Z_(r,T,c,O),er=!1,Y=r.memoizedState,T.state=Y,Gl(r,c,T,y),Hl();var Z=r.memoizedState;A!==re||Y!==Z||er||s!==null&&s.dependencies!==null&&Pc(s.dependencies)?(typeof C=="function"&&(rm(r,l,C,c),Z=r.memoizedState),(te=er||W_(r,l,te,c,Y,Z,O)||s!==null&&s.dependencies!==null&&Pc(s.dependencies))?(j||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(c,Z,O),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(c,Z,O)),typeof T.componentDidUpdate=="function"&&(r.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof T.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),T.props=c,T.state=Z,T.context=O,c=te):(typeof T.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return T=c,Zc(s,r),c=(r.flags&128)!==0,T||c?(T=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:T.render(),r.flags|=1,s!==null&&c?(r.child=go(r,s.child,null,y),r.child=go(r,null,l,y)):tn(s,r,l,y),r.memoizedState=T.state,s=r.child):s=hs(s,r,y),s}function m0(s,r,l,c){return uo(),r.flags|=256,tn(s,r,l,c),r.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dm(s){return{baseLanes:s,cachePool:i_()}}function fm(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Vn),s}function p0(s,r,l){var c=r.pendingProps,y=!1,T=(r.flags&128)!==0,A;if((A=T)||(A=s!==null&&s.memoizedState===null?!1:(Ct.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ge){if(y?ir(r):sr(),(s=dt)?(s=Sv(s,Xn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Qs!==null?{id:Hi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=$y(s),l.return=r,r.child=l,Zt=r,dt=null)):s=null,s===null)throw Ws(r);return $m(s)?r.lanes=32:r.lanes=536870912,null}var C=c.children;return c=c.fallback,y?(sr(),y=r.mode,C=ed({mode:"hidden",children:C},y),c=lo(c,y,l,null),C.return=r,c.return=r,C.sibling=c,r.child=C,c=r.child,c.memoizedState=dm(l),c.childLanes=fm(s,A,l),r.memoizedState=cm,$l(null,c)):(ir(r),hm(r,C))}var O=s.memoizedState;if(O!==null&&(C=O.dehydrated,C!==null)){if(T)r.flags&256?(ir(r),r.flags&=-257,r=mm(s,r,l)):r.memoizedState!==null?(sr(),r.child=s.child,r.flags|=128,r=null):(sr(),C=c.fallback,y=r.mode,c=ed({mode:"visible",children:c.children},y),C=lo(C,y,l,null),C.flags|=2,c.return=r,C.return=r,c.sibling=C,r.child=c,go(r,s.child,null,l),c=r.child,c.memoizedState=dm(l),c.childLanes=fm(s,A,l),r.memoizedState=cm,r=$l(null,c));else if(ir(r),$m(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var j=A.dgst;A=j,c=Error(i(419)),c.stack="",c.digest=A,Vl({value:c,source:null,stack:null}),r=mm(s,r,l)}else if(Lt||ua(s,r,l,!1),A=(l&s.childLanes)!==0,Lt||A){if(A=lt,A!==null&&(c=pl(A,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,ao(s,c),An(A,s,c),lm;Km(C)||ud(),r=mm(s,r,l)}else Km(C)?(r.flags|=192,r.child=s.child,r=null):(s=O.treeContext,dt=Zn(C.nextSibling),Zt=r,Ge=!0,Xs=null,Xn=!1,s!==null&&Xy(r,s),r=hm(r,c.children),r.flags|=4096);return r}return y?(sr(),C=c.fallback,y=r.mode,O=s.child,j=O.sibling,c=as(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,j!==null?C=as(j,C):(C=lo(C,y,l,null),C.flags|=2),C.return=r,c.return=r,c.sibling=C,r.child=c,$l(null,c),c=r.child,C=s.child.memoizedState,C===null?C=dm(l):(y=C.cachePool,y!==null?(O=Ut._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=i_(),C={baseLanes:C.baseLanes|l,cachePool:y}),c.memoizedState=C,c.childLanes=fm(s,A,l),r.memoizedState=cm,$l(s.child,c)):(ir(r),l=s.child,s=l.sibling,l=as(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function hm(s,r){return r=ed({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function ed(s,r){return s=Mn(22,s,null,r),s.lanes=0,s}function mm(s,r,l){return go(r,s.child,null,l),s=hm(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function g0(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Nh(s.return,r,l)}function pm(s,r,l,c,y,T){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:T}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=T)}function y0(s,r,l){var c=r.pendingProps,y=c.revealOrder,T=c.tail;c=c.children;var A=Ct.current,C=(A&2)!==0;if(C?(A=A&1|2,r.flags|=128):A&=1,ue(Ct,A),tn(s,r,c,l),c=Ge?Ul:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&g0(s,l,r);else if(s.tag===19)g0(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Hc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),pm(r,!1,y,l,T,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Hc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}pm(r,!0,l,null,T,c);break;case"together":pm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function hs(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),ar|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(ua(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=as(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=as(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function gm(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Pc(s)))}function vC(s,r,l){switch(r.tag){case 3:Gt(r,r.stateNode.containerInfo),Zs(r,Ut,s.memoizedState.cache),uo();break;case 27:case 5:Gr(r);break;case 4:Gt(r,r.stateNode.containerInfo);break;case 10:Zs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Bh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ir(r),r.flags|=128,null):(l&r.child.childLanes)!==0?p0(s,r,l):(ir(r),s=hs(s,r,l),s!==null?s.sibling:null);ir(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(ua(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return y0(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(Ct,Ct.current),c)break;return null;case 22:return r.lanes=0,u0(s,r,l,r.pendingProps);case 24:Zs(r,Ut,s.memoizedState.cache)}return hs(s,r,l)}function _0(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Lt=!0;else{if(!gm(s,l)&&(r.flags&128)===0)return Lt=!1,vC(s,r,l);Lt=(s.flags&131072)!==0}else Lt=!1,Ge&&(r.flags&1048576)!==0&&Qy(r,Ul,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=mo(r.elementType),r.type=s,typeof s=="function")Eh(s)?(c=_o(s,c),r.tag=1,r=h0(null,r,s,c,l)):(r.tag=0,r=um(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===J){r.tag=11,r=o0(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=a0(null,r,s,c,l);break e}}throw r=Pe(s)||s,Error(i(306,r,""))}}return r;case 0:return um(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=_o(c,r.pendingProps),h0(s,r,c,y,l);case 3:e:{if(Gt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var T=r.memoizedState;y=T.element,Vh(s,r),Gl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Zs(r,Ut,c),c!==T.cache&&Rh(r,[Ut],l,!0),Hl(),c=A.element,T.isDehydrated)if(T={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){r=m0(s,r,c,l);break e}else if(c!==y){y=$n(Error(i(424)),r),Vl(y),r=m0(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dt=Zn(s.firstChild),Zt=r,Ge=!0,Xs=null,Xn=!0,l=u_(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(uo(),c===y){r=hs(s,r,l);break e}tn(s,r,c,l)}r=r.child}return r;case 26:return Zc(s,r),s===null?(l=Nv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ge||(l=r.type,s=r.pendingProps,c=gd(Me.current).createElement(l),c[Mt]=r,c[Kt]=s,nn(c,l,s),Dt(c),r.stateNode=c):r.memoizedState=Nv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Gr(r),s===null&&Ge&&(c=r.stateNode=wv(r.type,r.pendingProps,Me.current),Zt=r,Xn=!0,y=dt,fr(r.type)?(Jm=y,dt=Zn(c.firstChild)):dt=y),tn(s,r,r.pendingProps.children,l),Zc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ge&&((y=c=dt)&&(c=JC(c,r.type,r.pendingProps,Xn),c!==null?(r.stateNode=c,Zt=r,dt=Zn(c.firstChild),Xn=!1,y=!0):y=!1),y||Ws(r)),Gr(r),y=r.type,T=r.pendingProps,A=s!==null?s.memoizedProps:null,c=T.children,zm(y,T)?c=null:A!==null&&zm(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Gh(s,r,cC,null,null,l),uu._currentValue=y),Zc(s,r),tn(s,r,c,l),r.child;case 6:return s===null&&Ge&&((s=l=dt)&&(l=QC(l,r.pendingProps,Xn),l!==null?(r.stateNode=l,Zt=r,dt=null,s=!0):s=!1),s||Ws(r)),null;case 13:return p0(s,r,l);case 4:return Gt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=go(r,null,c,l):tn(s,r,c,l),r.child;case 11:return o0(s,r,r.type,r.pendingProps,l);case 7:return tn(s,r,r.pendingProps,l),r.child;case 8:return tn(s,r,r.pendingProps.children,l),r.child;case 12:return tn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Zs(r,r.type,c.value),tn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,fo(r),y=en(y),c=c(y),r.flags|=1,tn(s,r,c,l),r.child;case 14:return a0(s,r,r.type,r.pendingProps,l);case 15:return l0(s,r,r.type,r.pendingProps,l);case 19:return y0(s,r,l);case 31:return _C(s,r,l);case 22:return u0(s,r,l,r.pendingProps);case 24:return fo(r),c=en(Ut),s===null?(y=Dh(),y===null&&(y=lt,T=kh(),y.pooledCache=T,T.refCount++,T!==null&&(y.pooledCacheLanes|=l),y=T),r.memoizedState={parent:c,cache:y},Uh(r),Zs(r,Ut,y)):((s.lanes&l)!==0&&(Vh(s,r),Gl(r,null,null,l),Hl()),y=s.memoizedState,T=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Zs(r,Ut,c)):(c=T.cache,Zs(r,Ut,c),c!==y.cache&&Rh(r,[Ut],l,!0))),tn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ms(s){s.flags|=4}function ym(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(j0())s.flags|=8192;else throw po=Oc,Ph}else s.flags&=-16777217}function v0(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pv(r))if(j0())s.flags|=8192;else throw po=Oc,Ph}function td(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ac():536870912,s.lanes|=r,Ea|=r)}function Jl(s,r){if(!Ge)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ft(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function TC(s,r,l){var c=r.pendingProps;switch(bh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),cs(Ut),gt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(la(r)?ms(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ch())),ft(r),null;case 26:var y=r.type,T=r.memoizedState;return s===null?(ms(r),T!==null?(ft(r),v0(r,T)):(ft(r),ym(r,y,null,c,l))):T?T!==s.memoizedState?(ms(r),ft(r),v0(r,T)):(ft(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ms(r),ft(r),ym(r,y,s,c,l)),null;case 27:if(Fo(r),l=Me.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ft(r),null}s=de.current,la(r)?Wy(r):(s=wv(y,c,l),r.stateNode=s,ms(r))}return ft(r),null;case 5:if(Fo(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ft(r),null}if(T=de.current,la(r))Wy(r);else{var A=gd(Me.current);switch(T){case 1:T=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:T=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":T=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":T=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":T=A.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?T.multiple=!0:c.size&&(T.size=c.size);break;default:T=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}T[Mt]=r,T[Kt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)T.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=T;e:switch(nn(T,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ms(r)}}return ft(r),ym(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ms(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Me.current,la(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Mt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||pv(s.nodeValue,l)),s||Ws(r,!0)}else s=gd(s).createTextNode(c),s[Mt]=r,r.stateNode=s}return ft(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=la(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Mt]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),s=!1}else l=Ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Pn(r),r):(Pn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ft(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=la(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Mt]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),y=!1}else y=Ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Pn(r),r):(Pn(r),null)}return Pn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),T=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),T!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),td(r,r.updateQueue),ft(r),null);case 4:return gt(),s===null&&qm(r.stateNode.containerInfo),ft(r),null;case 10:return cs(r.type),ft(r),null;case 19:if(X(Ct),c=r.memoizedState,c===null)return ft(r),null;if(y=(r.flags&128)!==0,T=c.rendering,T===null)if(y)Jl(c,!1);else{if(Et!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(T=Hc(s),T!==null){for(r.flags|=128,Jl(c,!1),s=T.updateQueue,r.updateQueue=s,td(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Ky(l,s),l=l.sibling;return ue(Ct,Ct.current&1|2),Ge&&ls(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&mn()>od&&(r.flags|=128,y=!0,Jl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Hc(T),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,td(r,s),Jl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!T.alternate&&!Ge)return ft(r),null}else 2*mn()-c.renderingStartTime>od&&l!==536870912&&(r.flags|=128,y=!0,Jl(c,!1),r.lanes=4194304);c.isBackwards?(T.sibling=r.child,r.child=T):(s=c.last,s!==null?s.sibling=T:r.child=T,c.last=T)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=mn(),s.sibling=null,l=Ct.current,ue(Ct,y?l&1|2:l&1),Ge&&ls(r,c.treeForkCount),s):(ft(r),null);case 22:case 23:return Pn(r),Fh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),l=r.updateQueue,l!==null&&td(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&X(ho),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),cs(Ut),ft(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function EC(s,r){switch(bh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return cs(Ut),gt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Fo(r),null;case 31:if(r.memoizedState!==null){if(Pn(r),r.alternate===null)throw Error(i(340));uo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Pn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));uo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return X(Ct),null;case 4:return gt(),null;case 10:return cs(r.type),null;case 22:case 23:return Pn(r),Fh(),s!==null&&X(ho),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return cs(Ut),null;case 25:return null;default:return null}}function T0(s,r){switch(bh(r),r.tag){case 3:cs(Ut),gt();break;case 26:case 27:case 5:Fo(r);break;case 4:gt();break;case 31:r.memoizedState!==null&&Pn(r);break;case 13:Pn(r);break;case 19:X(Ct);break;case 10:cs(r.type);break;case 22:case 23:Pn(r),Fh(),s!==null&&X(ho);break;case 24:cs(Ut)}}function Ql(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var T=l.create,A=l.inst;c=T(),A.destroy=c}l=l.next}while(l!==y)}}catch(C){nt(r,r.return,C)}}function rr(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var T=y.next;c=T;do{if((c.tag&s)===s){var A=c.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,y=r;var O=l,j=C;try{j()}catch(te){nt(y,O,te)}}}c=c.next}while(c!==T)}}catch(te){nt(r,r.return,te)}}function E0(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{d_(r,l)}catch(c){nt(s,s.return,c)}}}function x0(s,r,l){l.props=_o(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function Xl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function zi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function S0(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function _m(s,r,l){try{var c=s.stateNode;GC(c,s.type,l,r),c[Kt]=r}catch(y){nt(s,s.return,y)}}function A0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fr(s.type)||s.tag===4}function vm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tm(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ui));else if(c!==4&&(c===27&&fr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Tm(s,r,l),s=s.sibling;s!==null;)Tm(s,r,l),s=s.sibling}function nd(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&fr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(nd(s,r,l),s=s.sibling;s!==null;)nd(s,r,l),s=s.sibling}function b0(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);nn(r,c,l),r[Mt]=s,r[Kt]=l}catch(T){nt(s,s.return,T)}}var ps=!1,Ot=!1,Em=!1,w0=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function xC(s,r){if(s=s.containerInfo,Hm=Sd,s=Oy(s),mh(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,T=c.focusNode;c=c.focusOffset;try{l.nodeType,T.nodeType}catch{l=null;break e}var A=0,C=-1,O=-1,j=0,te=0,re=s,Y=null;t:for(;;){for(var Z;re!==l||y!==0&&re.nodeType!==3||(C=A+y),re!==T||c!==0&&re.nodeType!==3||(O=A+c),re.nodeType===3&&(A+=re.nodeValue.length),(Z=re.firstChild)!==null;)Y=re,re=Z;for(;;){if(re===s)break t;if(Y===l&&++j===y&&(C=A),Y===T&&++te===c&&(O=A),(Z=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=Z}l=C===-1||O===-1?null:{start:C,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gm={focusedElem:s,selectionRange:l},Sd=!1,Jt=r;Jt!==null;)if(r=Jt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Jt=s;else for(;Jt!==null;){switch(r=Jt,T=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,l=r,y=T.memoizedProps,T=T.memoizedState,c=l.stateNode;try{var ge=_o(l.type,y);s=c.getSnapshotBeforeUpdate(ge,T),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){nt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Ym(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ym(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Jt=s;break}Jt=r.return}}function C0(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ys(s,l),c&4&&Ql(5,l);break;case 1:if(ys(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){nt(l,l.return,A)}else{var y=_o(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(l,l.return,A)}}c&64&&E0(l),c&512&&Xl(l,l.return);break;case 3:if(ys(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{d_(s,r)}catch(A){nt(l,l.return,A)}}break;case 27:r===null&&c&4&&b0(l);case 26:case 5:ys(s,l),r===null&&c&4&&S0(l),c&512&&Xl(l,l.return);break;case 12:ys(s,l);break;case 31:ys(s,l),c&4&&R0(s,l);break;case 13:ys(s,l),c&4&&k0(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=kC.bind(null,l),XC(s,l))));break;case 22:if(c=l.memoizedState!==null||ps,!c){r=r!==null&&r.memoizedState!==null||Ot,y=ps;var T=Ot;ps=c,(Ot=r)&&!T?_s(s,l,(l.subtreeFlags&8772)!==0):ys(s,l),ps=y,Ot=T}break;case 30:break;default:ys(s,l)}}function I0(s){var r=s.alternate;r!==null&&(s.alternate=null,I0(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&jo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var _t=null,Tn=!1;function gs(s,r,l){for(l=l.child;l!==null;)N0(s,r,l),l=l.sibling}function N0(s,r,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ri,l)}catch{}switch(l.tag){case 26:Ot||zi(l,r),gs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ot||zi(l,r);var c=_t,y=Tn;fr(l.type)&&(_t=l.stateNode,Tn=!1),gs(s,r,l),ou(l.stateNode),_t=c,Tn=y;break;case 5:Ot||zi(l,r);case 6:if(c=_t,y=Tn,_t=null,gs(s,r,l),_t=c,Tn=y,_t!==null)if(Tn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(l.stateNode)}catch(T){nt(l,r,T)}else try{_t.removeChild(l.stateNode)}catch(T){nt(l,r,T)}break;case 18:_t!==null&&(Tn?(s=_t,Ev(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Na(s)):Ev(_t,l.stateNode));break;case 4:c=_t,y=Tn,_t=l.stateNode.containerInfo,Tn=!0,gs(s,r,l),_t=c,Tn=y;break;case 0:case 11:case 14:case 15:rr(2,l,r),Ot||rr(4,l,r),gs(s,r,l);break;case 1:Ot||(zi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&x0(l,r,c)),gs(s,r,l);break;case 21:gs(s,r,l);break;case 22:Ot=(c=Ot)||l.memoizedState!==null,gs(s,r,l),Ot=c;break;default:gs(s,r,l)}}function R0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Na(s)}catch(l){nt(r,r.return,l)}}}function k0(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Na(s)}catch(l){nt(r,r.return,l)}}function SC(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new w0),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new w0),r;default:throw Error(i(435,s.tag))}}function id(s,r){var l=SC(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=MC.bind(null,s,c);c.then(y,y)}})}function En(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],T=s,A=r,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(fr(C.type)){_t=C.stateNode,Tn=!1;break e}break;case 5:_t=C.stateNode,Tn=!1;break e;case 3:case 4:_t=C.stateNode.containerInfo,Tn=!0;break e}C=C.return}if(_t===null)throw Error(i(160));N0(T,A,y),_t=null,Tn=!1,T=y.alternate,T!==null&&(T.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)M0(r,s),r=r.sibling}var pi=null;function M0(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:En(r,s),xn(s),c&4&&(rr(3,s,s.return),Ql(3,s),rr(5,s,s.return));break;case 1:En(r,s),xn(s),c&512&&(Ot||l===null||zi(l,l.return)),c&64&&ps&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=pi;if(En(r,s),xn(s),c&512&&(Ot||l===null||zi(l,l.return)),c&4){var T=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":T=y.getElementsByTagName("title")[0],(!T||T[Ri]||T[Mt]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=y.createElement(c),y.head.insertBefore(T,y.querySelector("head > title"))),nn(T,c,l),T[Mt]=s,Dt(T),c=T;break e;case"link":var A=Mv("link","href",y).get(c+(l.href||""));if(A){for(var C=0;C<A.length;C++)if(T=A[C],T.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&T.getAttribute("rel")===(l.rel==null?null:l.rel)&&T.getAttribute("title")===(l.title==null?null:l.title)&&T.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(C,1);break t}}T=y.createElement(c),nn(T,c,l),y.head.appendChild(T);break;case"meta":if(A=Mv("meta","content",y).get(c+(l.content||""))){for(C=0;C<A.length;C++)if(T=A[C],T.getAttribute("content")===(l.content==null?null:""+l.content)&&T.getAttribute("name")===(l.name==null?null:l.name)&&T.getAttribute("property")===(l.property==null?null:l.property)&&T.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&T.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(C,1);break t}}T=y.createElement(c),nn(T,c,l),y.head.appendChild(T);break;default:throw Error(i(468,c))}T[Mt]=s,Dt(T),c=T}s.stateNode=c}else Dv(y,s.type,s.stateNode);else s.stateNode=kv(y,c,s.memoizedProps);else T!==c?(T===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):T.count--,c===null?Dv(y,s.type,s.stateNode):kv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&_m(s,s.memoizedProps,l.memoizedProps)}break;case 27:En(r,s),xn(s),c&512&&(Ot||l===null||zi(l,l.return)),l!==null&&c&4&&_m(s,s.memoizedProps,l.memoizedProps);break;case 5:if(En(r,s),xn(s),c&512&&(Ot||l===null||zi(l,l.return)),s.flags&32){y=s.stateNode;try{vn(y,"")}catch(ge){nt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,_m(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Em=!0);break;case 6:if(En(r,s),xn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){nt(s,s.return,ge)}}break;case 3:if(vd=null,y=pi,pi=yd(r.containerInfo),En(r,s),pi=y,xn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Na(r.containerInfo)}catch(ge){nt(s,s.return,ge)}Em&&(Em=!1,D0(s));break;case 4:c=pi,pi=yd(s.stateNode.containerInfo),En(r,s),xn(s),pi=c;break;case 12:En(r,s),xn(s);break;case 31:En(r,s),xn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,id(s,c)));break;case 13:En(r,s),xn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(rd=mn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,id(s,c)));break;case 22:y=s.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,j=ps,te=Ot;if(ps=j||y,Ot=te||O,En(r,s),Ot=te,ps=j,xn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||O||ps||Ot||vo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){O=l=r;try{if(T=O.stateNode,y)A=T.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=O.stateNode;var re=O.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){nt(O,O.return,ge)}}}else if(r.tag===6){if(l===null){O=r;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(ge){nt(O,O.return,ge)}}}else if(r.tag===18){if(l===null){O=r;try{var Z=O.stateNode;y?xv(Z,!0):xv(O.stateNode,!1)}catch(ge){nt(O,O.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,id(s,l))));break;case 19:En(r,s),xn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,id(s,c)));break;case 30:break;case 21:break;default:En(r,s),xn(s)}}function xn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(A0(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,T=vm(s);nd(s,T,y);break;case 5:var A=l.stateNode;l.flags&32&&(vn(A,""),l.flags&=-33);var C=vm(s);nd(s,C,A);break;case 3:case 4:var O=l.stateNode.containerInfo,j=vm(s);Tm(s,j,O);break;default:throw Error(i(161))}}catch(te){nt(s,s.return,te)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function D0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;D0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ys(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)C0(s,r.alternate,r),r=r.sibling}function vo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:rr(4,r,r.return),vo(r);break;case 1:zi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&x0(r,r.return,l),vo(r);break;case 27:ou(r.stateNode);case 26:case 5:zi(r,r.return),vo(r);break;case 22:r.memoizedState===null&&vo(r);break;case 30:vo(r);break;default:vo(r)}s=s.sibling}}function _s(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,T=r,A=T.flags;switch(T.tag){case 0:case 11:case 15:_s(y,T,l),Ql(4,T);break;case 1:if(_s(y,T,l),c=T,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(j){nt(c,c.return,j)}if(c=T,y=c.updateQueue,y!==null){var C=c.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)c_(O[y],C)}catch(j){nt(c,c.return,j)}}l&&A&64&&E0(T),Xl(T,T.return);break;case 27:b0(T);case 26:case 5:_s(y,T,l),l&&c===null&&A&4&&S0(T),Xl(T,T.return);break;case 12:_s(y,T,l);break;case 31:_s(y,T,l),l&&A&4&&R0(y,T);break;case 13:_s(y,T,l),l&&A&4&&k0(y,T);break;case 22:T.memoizedState===null&&_s(y,T,l),Xl(T,T.return);break;case 30:break;default:_s(y,T,l)}r=r.sibling}}function xm(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Ll(l))}function Sm(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Ll(s))}function gi(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)P0(s,r,l,c),r=r.sibling}function P0(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:gi(s,r,l,c),y&2048&&Ql(9,r);break;case 1:gi(s,r,l,c);break;case 3:gi(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Ll(s)));break;case 12:if(y&2048){gi(s,r,l,c),s=r.stateNode;try{var T=r.memoizedProps,A=T.id,C=T.onPostCommit;typeof C=="function"&&C(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){nt(r,r.return,O)}}else gi(s,r,l,c);break;case 31:gi(s,r,l,c);break;case 13:gi(s,r,l,c);break;case 23:break;case 22:T=r.stateNode,A=r.alternate,r.memoizedState!==null?T._visibility&2?gi(s,r,l,c):Wl(s,r):T._visibility&2?gi(s,r,l,c):(T._visibility|=2,_a(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&xm(A,r);break;case 24:gi(s,r,l,c),y&2048&&Sm(r.alternate,r);break;default:gi(s,r,l,c)}}function _a(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var T=s,A=r,C=l,O=c,j=A.flags;switch(A.tag){case 0:case 11:case 15:_a(T,A,C,O,y),Ql(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?_a(T,A,C,O,y):Wl(T,A):(te._visibility|=2,_a(T,A,C,O,y)),y&&j&2048&&xm(A.alternate,A);break;case 24:_a(T,A,C,O,y),y&&j&2048&&Sm(A.alternate,A);break;default:_a(T,A,C,O,y)}r=r.sibling}}function Wl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Wl(l,c),y&2048&&xm(c.alternate,c);break;case 24:Wl(l,c),y&2048&&Sm(c.alternate,c);break;default:Wl(l,c)}r=r.sibling}}var Zl=8192;function va(s,r,l){if(s.subtreeFlags&Zl)for(s=s.child;s!==null;)U0(s,r,l),s=s.sibling}function U0(s,r,l){switch(s.tag){case 26:va(s,r,l),s.flags&Zl&&s.memoizedState!==null&&uI(l,pi,s.memoizedState,s.memoizedProps);break;case 5:va(s,r,l);break;case 3:case 4:var c=pi;pi=yd(s.stateNode.containerInfo),va(s,r,l),pi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Zl,Zl=16777216,va(s,r,l),Zl=c):va(s,r,l));break;default:va(s,r,l)}}function V0(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function eu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Jt=c,O0(c,s)}V0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)L0(s),s=s.sibling}function L0(s){switch(s.tag){case 0:case 11:case 15:eu(s),s.flags&2048&&rr(9,s,s.return);break;case 3:eu(s);break;case 12:eu(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,sd(s)):eu(s);break;default:eu(s)}}function sd(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Jt=c,O0(c,s)}V0(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:rr(8,r,r.return),sd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,sd(r));break;default:sd(r)}s=s.sibling}}function O0(s,r){for(;Jt!==null;){var l=Jt;switch(l.tag){case 0:case 11:case 15:rr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ll(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Jt=c;else e:for(l=s;Jt!==null;){c=Jt;var y=c.sibling,T=c.return;if(I0(c),c===l){Jt=null;break e}if(y!==null){y.return=T,Jt=y;break e}Jt=T}}}var AC={getCacheForType:function(s){var r=en(Ut),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return en(Ut).controller.signal}},bC=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,Ue=null,Le=0,tt=0,Un=null,or=!1,Ta=!1,Am=!1,vs=0,Et=0,ar=0,To=0,bm=0,Vn=0,Ea=0,tu=null,Sn=null,wm=!1,rd=0,q0=0,od=1/0,ad=null,lr=null,jt=0,ur=null,xa=null,Ts=0,Cm=0,Im=null,F0=null,nu=0,Nm=null;function Ln(){return(We&2)!==0&&Le!==0?Le&-Le:$.T!==null?Um():lc()}function B0(){if(Vn===0)if((Le&536870912)===0||Ge){var s=Yr;Yr<<=1,(Yr&3932160)===0&&(Yr=262144),Vn=s}else Vn=536870912;return s=Dn.current,s!==null&&(s.flags|=32),Vn}function An(s,r,l){(s===lt&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(Sa(s,0),cr(s,Le,Vn,!1)),Kr(s,l),((We&2)===0||s!==lt)&&(s===lt&&((We&2)===0&&(To|=l),Et===4&&cr(s,Le,Vn,!1)),ji(s))}function H0(s,r,l){if((We&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||oi(s,r),y=c?IC(s,r):km(s,r,!0),T=c;do{if(y===0){Ta&&!c&&cr(s,r,0,!1);break}else{if(l=s.current.alternate,T&&!wC(l)){y=km(s,r,!1),T=!1;continue}if(y===2){if(T=r,s.errorRecoveryDisabledLanes&T)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var C=s;y=tu;var O=C.current.memoizedState.isDehydrated;if(O&&(Sa(C,A).flags|=256),A=km(C,A,!1),A!==2){if(Am&&!O){C.errorRecoveryDisabledLanes|=T,To|=T,y=4;break e}T=Sn,Sn=y,T!==null&&(Sn===null?Sn=T:Sn.push.apply(Sn,T))}y=A}if(T=!1,y!==2)continue}}if(y===1){Sa(s,0),cr(s,r,0,!0);break}e:{switch(c=s,T=y,T){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:cr(c,r,Vn,!or);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=rd+300-mn(),10<y)){if(cr(c,r,Vn,!or),Ci(c,0,!0)!==0)break e;Ts=r,c.timeoutHandle=vv(G0.bind(null,c,l,Sn,ad,wm,r,Vn,To,Ea,or,T,"Throttled",-0,0),y);break e}G0(c,l,Sn,ad,wm,r,Vn,To,Ea,or,T,null,-0,0)}}break}while(!0);ji(s)}function G0(s,r,l,c,y,T,A,C,O,j,te,re,Y,Z){if(s.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},U0(r,T,re);var ge=(T&62914560)===T?rd-mn():(T&4194048)===T?q0-mn():0;if(ge=cI(re,ge),ge!==null){Ts=T,s.cancelPendingCommit=ge(X0.bind(null,s,r,T,l,c,y,A,C,O,te,re,null,Y,Z)),cr(s,T,A,!j);return}}X0(s,r,T,l,c,y,A,C,O)}function wC(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],T=y.getSnapshot;y=y.value;try{if(!kn(T(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cr(s,r,l,c){r&=~bm,r&=~To,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var T=31-bt(y),A=1<<T;c[T]=-1,y&=~A}l!==0&&$r(s,l,r)}function ld(){return(We&6)===0?(iu(0),!1):!0}function Rm(){if(Ue!==null){if(tt===0)var s=Ue.return;else s=Ue,us=co=null,Yh(s),ha=null,ql=0,s=Ue;for(;s!==null;)T0(s.alternate,s),s=s.return;Ue=null}}function Sa(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,YC(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Ts=0,Rm(),lt=s,Ue=l=as(s.current,null),Le=r,tt=0,Un=null,or=!1,Ta=oi(s,r),Am=!1,Ea=Vn=bm=To=ar=Et=0,Sn=tu=null,wm=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-bt(c),T=1<<y;r|=s[y],c&=~T}return vs=r,Nc(),l}function z0(s,r){ke=null,$.H=Kl,r===fa||r===Lc?(r=o_(),tt=3):r===Ph?(r=o_(),tt=4):tt=r===lm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Ue===null&&(Et=1,Xc(s,$n(r,s.current)))}function j0(){var s=Dn.current;return s===null?!0:(Le&4194048)===Le?Wn===null:(Le&62914560)===Le||(Le&536870912)!==0?s===Wn:!1}function Y0(){var s=$.H;return $.H=Kl,s===null?Kl:s}function K0(){var s=$.A;return $.A=AC,s}function ud(){Et=4,or||(Le&4194048)!==Le&&Dn.current!==null||(Ta=!0),(ar&134217727)===0&&(To&134217727)===0||lt===null||cr(lt,Le,Vn,!1)}function km(s,r,l){var c=We;We|=2;var y=Y0(),T=K0();(lt!==s||Le!==r)&&(ad=null,Sa(s,r)),r=!1;var A=Et;e:do try{if(tt!==0&&Ue!==null){var C=Ue,O=Un;switch(tt){case 8:Rm(),A=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(r=!0);var j=tt;if(tt=0,Un=null,Aa(s,C,O,j),l&&Ta){A=0;break e}break;default:j=tt,tt=0,Un=null,Aa(s,C,O,j)}}CC(),A=Et;break}catch(te){z0(s,te)}while(!0);return r&&s.shellSuspendCounter++,us=co=null,We=c,$.H=y,$.A=T,Ue===null&&(lt=null,Le=0,Nc()),A}function CC(){for(;Ue!==null;)$0(Ue)}function IC(s,r){var l=We;We|=2;var c=Y0(),y=K0();lt!==s||Le!==r?(ad=null,od=mn()+500,Sa(s,r)):Ta=oi(s,r);e:do try{if(tt!==0&&Ue!==null){r=Ue;var T=Un;t:switch(tt){case 1:tt=0,Un=null,Aa(s,r,T,1);break;case 2:case 9:if(s_(T)){tt=0,Un=null,J0(r);break}r=function(){tt!==2&&tt!==9||lt!==s||(tt=7),ji(s)},T.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:s_(T)?(tt=0,Un=null,J0(r)):(tt=0,Un=null,Aa(s,r,T,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var C=Ue;if(A?Pv(A):C.stateNode.complete){tt=0,Un=null;var O=C.sibling;if(O!==null)Ue=O;else{var j=C.return;j!==null?(Ue=j,cd(j)):Ue=null}break t}}tt=0,Un=null,Aa(s,r,T,5);break;case 6:tt=0,Un=null,Aa(s,r,T,6);break;case 8:Rm(),Et=6;break e;default:throw Error(i(462))}}NC();break}catch(te){z0(s,te)}while(!0);return us=co=null,$.H=c,$.A=y,We=l,Ue!==null?0:(lt=null,Le=0,Nc(),Et)}function NC(){for(;Ue!==null&&!ah();)$0(Ue)}function $0(s){var r=_0(s.alternate,s,vs);s.memoizedProps=s.pendingProps,r===null?cd(s):Ue=r}function J0(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=f0(l,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=f0(l,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:Yh(r);default:T0(l,r),r=Ue=Ky(r,vs),r=_0(l,r,vs)}s.memoizedProps=s.pendingProps,r===null?cd(s):Ue=r}function Aa(s,r,l,c){us=co=null,Yh(r),ha=null,ql=0;var y=r.return;try{if(yC(s,y,r,l,Le)){Et=1,Xc(s,$n(l,s.current)),Ue=null;return}}catch(T){if(y!==null)throw Ue=y,T;Et=1,Xc(s,$n(l,s.current)),Ue=null;return}r.flags&32768?(Ge||c===1?s=!0:Ta||(Le&536870912)!==0?s=!1:(or=s=!0,(c===2||c===9||c===3||c===6)&&(c=Dn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Q0(r,s)):cd(r)}function cd(s){var r=s;do{if((r.flags&32768)!==0){Q0(r,or);return}s=r.return;var l=TC(r.alternate,r,vs);if(l!==null){Ue=l;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);Et===0&&(Et=5)}function Q0(s,r){do{var l=EC(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);Et=6,Ue=null}function X0(s,r,l,c,y,T,A,C,O){s.cancelPendingCommit=null;do dd();while(jt!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(T=r.lanes|r.childLanes,T|=vh,ch(s,l,T,A,C,O),s===lt&&(Ue=lt=null,Le=0),xa=r,ur=s,Ts=l,Cm=T,Im=y,F0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,DC(Fs,function(){return nv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=ce.p,ce.p=2,A=We,We|=4;try{xC(s,r,l)}finally{We=A,ce.p=y,$.T=c}}jt=1,W0(),Z0(),ev()}}function W0(){if(jt===1){jt=0;var s=ur,r=xa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=ce.p;ce.p=2;var y=We;We|=4;try{M0(r,s);var T=Gm,A=Oy(s.containerInfo),C=T.focusedElem,O=T.selectionRange;if(A!==C&&C&&C.ownerDocument&&Ly(C.ownerDocument.documentElement,C)){if(O!==null&&mh(C)){var j=O.start,te=O.end;if(te===void 0&&(te=j),"selectionStart"in C)C.selectionStart=j,C.selectionEnd=Math.min(te,C.value.length);else{var re=C.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var Z=Y.getSelection(),ge=C.textContent.length,Se=Math.min(O.start,ge),ot=O.end===void 0?Se:Math.min(O.end,ge);!Z.extend&&Se>ot&&(A=ot,ot=Se,Se=A);var H=Vy(C,Se),B=Vy(C,ot);if(H&&B&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var z=re.createRange();z.setStart(H.node,H.offset),Z.removeAllRanges(),Se>ot?(Z.addRange(z),Z.extend(B.node,B.offset)):(z.setEnd(B.node,B.offset),Z.addRange(z))}}}}for(re=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&re.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<re.length;C++){var ie=re[C];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Sd=!!Hm,Gm=Hm=null}finally{We=y,ce.p=c,$.T=l}}s.current=r,jt=2}}function Z0(){if(jt===2){jt=0;var s=ur,r=xa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=ce.p;ce.p=2;var y=We;We|=4;try{C0(s,r.alternate,r)}finally{We=y,ce.p=c,$.T=l}}jt=3}}function ev(){if(jt===4||jt===3){jt=0,tc();var s=ur,r=xa,l=Ts,c=F0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,xa=ur=null,tv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(lr=null),is(l),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ri,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=$.T,y=ce.p,ce.p=2,$.T=null;try{for(var T=s.onRecoverableError,A=0;A<c.length;A++){var C=c[A];T(C.value,{componentStack:C.stack})}}finally{$.T=r,ce.p=y}}(Ts&3)!==0&&dd(),ji(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Nm?nu++:(nu=0,Nm=s):nu=0,iu(0)}}function tv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Ll(r)))}function dd(){return W0(),Z0(),ev(),nv()}function nv(){if(jt!==5)return!1;var s=ur,r=Cm;Cm=0;var l=is(Ts),c=$.T,y=ce.p;try{ce.p=32>l?32:l,$.T=null,l=Im,Im=null;var T=ur,A=Ts;if(jt=0,xa=ur=null,Ts=0,(We&6)!==0)throw Error(i(331));var C=We;if(We|=4,L0(T.current),P0(T,T.current,A,l),We=C,iu(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ri,T)}catch{}return!0}finally{ce.p=y,$.T=c,tv(s,r)}}function iv(s,r,l){r=$n(l,r),r=am(s.stateNode,r,2),s=nr(s,r,2),s!==null&&(Kr(s,2),ji(s))}function nt(s,r,l){if(s.tag===3)iv(s,s,l);else for(;r!==null;){if(r.tag===3){iv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(lr===null||!lr.has(c))){s=$n(l,s),l=s0(2),c=nr(r,l,2),c!==null&&(r0(l,c,r,s),Kr(c,2),ji(c));break}}r=r.return}}function Mm(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new bC;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Am=!0,y.add(l),s=RC.bind(null,s,r,l),r.then(s,s))}function RC(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,lt===s&&(Le&l)===l&&(Et===4||Et===3&&(Le&62914560)===Le&&300>mn()-rd?(We&2)===0&&Sa(s,0):bm|=l,Ea===Le&&(Ea=0)),ji(s)}function sv(s,r){r===0&&(r=ac()),s=ao(s,r),s!==null&&(Kr(s,r),ji(s))}function kC(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),sv(s,l)}function MC(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),sv(s,l)}function DC(s,r){return zt(s,r)}var fd=null,ba=null,Dm=!1,hd=!1,Pm=!1,dr=0;function ji(s){s!==ba&&s.next===null&&(ba===null?fd=ba=s:ba=ba.next=s),hd=!0,Dm||(Dm=!0,UC())}function iu(s,r){if(!Pm&&hd){Pm=!0;do for(var l=!1,c=fd;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var T=0;else{var A=c.suspendedLanes,C=c.pingedLanes;T=(1<<31-bt(42|s)+1)-1,T&=y&~(A&~C),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(l=!0,lv(c,T))}else T=Le,T=Ci(c,c===lt?T:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(T&3)===0||oi(c,T)||(l=!0,lv(c,T));c=c.next}while(l);Pm=!1}}function PC(){rv()}function rv(){hd=Dm=!1;var s=0;dr!==0&&jC()&&(s=dr);for(var r=mn(),l=null,c=fd;c!==null;){var y=c.next,T=ov(c,r);T===0?(c.next=null,l===null?fd=y:l.next=y,y===null&&(ba=l)):(l=c,(s!==0||(T&3)!==0)&&(hd=!0)),c=y}jt!==0&&jt!==5||iu(s),dr!==0&&(dr=0)}function ov(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var A=31-bt(T),C=1<<A,O=y[A];O===-1?((C&l)===0||(C&c)!==0)&&(y[A]=uh(C,r)):O<=r&&(s.expiredLanes|=C),T&=~C}if(r=lt,l=Le,l=Ci(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&qs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||oi(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&qs(c),is(l)){case 2:case 8:l=hl;break;case 32:l=Fs;break;case 268435456:l=nc;break;default:l=Fs}return c=av.bind(null,s),l=zt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&qs(c),s.callbackPriority=2,s.callbackNode=null,2}function av(s,r){if(jt!==0&&jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(dd()&&s.callbackNode!==l)return null;var c=Le;return c=Ci(s,s===lt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(H0(s,c,r),ov(s,mn()),s.callbackNode!=null&&s.callbackNode===l?av.bind(null,s):null)}function lv(s,r){if(dd())return null;H0(s,r,!0)}function UC(){KC(function(){(We&6)!==0?zt(fl,PC):rv()})}function Um(){if(dr===0){var s=ca;s===0&&(s=bi,bi<<=1,(bi&261888)===0&&(bi=256)),dr=s}return dr}function uv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Jo(""+s)}function cv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function VC(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var T=uv((y[Kt]||null).action),A=c.submitter;A&&(r=(r=A[Kt]||null)?uv(r.formAction):A.getAttribute("formAction"),r!==null&&(T=r,A=null));var C=new Oi("action","action",null,c,y);s.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(dr!==0){var O=A?cv(y,A):new FormData(y);tm(l,{pending:!0,data:O,method:y.method,action:T},null,O)}}else typeof T=="function"&&(C.preventDefault(),O=A?cv(y,A):new FormData(y),tm(l,{pending:!0,data:O,method:y.method,action:T},T,O))},currentTarget:y}]})}}for(var Vm=0;Vm<_h.length;Vm++){var Lm=_h[Vm],LC=Lm.toLowerCase(),OC=Lm[0].toUpperCase()+Lm.slice(1);mi(LC,"on"+OC)}mi(By,"onAnimationEnd"),mi(Hy,"onAnimationIteration"),mi(Gy,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(eC,"onTransitionRun"),mi(tC,"onTransitionStart"),mi(nC,"onTransitionCancel"),mi(zy,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function dv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var T=void 0;if(r)for(var A=c.length-1;0<=A;A--){var C=c[A],O=C.instance,j=C.currentTarget;if(C=C.listener,O!==T&&y.isPropagationStopped())break e;T=C,y.currentTarget=j;try{T(y)}catch(te){Ic(te)}y.currentTarget=null,T=O}else for(A=0;A<c.length;A++){if(C=c[A],O=C.instance,j=C.currentTarget,C=C.listener,O!==T&&y.isPropagationStopped())break e;T=C,y.currentTarget=j;try{T(y)}catch(te){Ic(te)}y.currentTarget=null,T=O}}}}function Ve(s,r){var l=r[zo];l===void 0&&(l=r[zo]=new Set);var c=s+"__bubble";l.has(c)||(fv(r,s,2,!1),l.add(c))}function Om(s,r,l){var c=0;r&&(c|=4),fv(l,s,c,r)}var md="_reactListening"+Math.random().toString(36).slice(2);function qm(s){if(!s[md]){s[md]=!0,gl.forEach(function(l){l!=="selectionchange"&&(qC.has(l)||Om(l,!1,s),Om(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[md]||(r[md]=!0,Om("selectionchange",!1,r))}}function fv(s,r,l,c){switch(Bv(r)){case 2:var y=hI;break;case 8:y=mI;break;default:y=ep}l=y.bind(null,r,l,s),y=void 0,!Zr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Fm(s,r,l,c,y){var T=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var C=c.stateNode.containerInfo;if(C===y)break;if(A===4)for(A=c.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;C!==null;){if(A=ki(C),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){c=T=A;continue e}C=C.parentNode}}c=c.return}Ys(function(){var j=T,te=zn(l),re=[];e:{var Y=jy.get(s);if(Y!==void 0){var Z=Oi,ge=s;switch(s){case"keypress":if(to(l)===0)break e;case"keydown":case"keyup":Z=bc;break;case"focusin":ge="focus",Z=io;break;case"focusout":ge="blur",Z=io;break;case"beforeblur":case"afterblur":Z=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=S;break;case By:case Hy:case Gy:Z=_c;break;case zy:Z=N;break;case"scroll":case"scrollend":Z=Il;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=vc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=os;break;case"toggle":case"beforetoggle":Z=Re}var Se=(r&4)!==0,ot=!Se&&(s==="scroll"||s==="scrollend"),H=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var B=j,z;B!==null;){var ie=B;if(z=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||z===null||H===null||(ie=ci(B,H),ie!=null&&Se.push(ru(B,ie,z))),ot)break;B=B.return}0<Se.length&&(Y=new Z(Y,ge,null,l,te),re.push({event:Y,listeners:Se}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Y&&l!==bl&&(ge=l.relatedTarget||l.fromElement)&&(ki(ge)||ge[Ni]))break e;if((Z||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,Z?(ge=l.relatedTarget||l.toElement,Z=j,ge=ge?ki(ge):null,ge!==null&&(ot=a(ge),Se=ge.tag,ge!==ot||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(Z=null,ge=j),Z!==ge)){if(Se=Nl,ie="onMouseLeave",H="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Se=os,ie="onPointerLeave",H="onPointerEnter",B="pointer"),ot=Z==null?Y:Nn(Z),z=ge==null?Y:Nn(ge),Y=new Se(ie,B+"leave",Z,l,te),Y.target=ot,Y.relatedTarget=z,ie=null,ki(te)===j&&(Se=new Se(H,B+"enter",ge,l,te),Se.target=z,Se.relatedTarget=ot,ie=Se),ot=ie,Z&&ge)t:{for(Se=FC,H=Z,B=ge,z=0,ie=H;ie;ie=Se(ie))z++;ie=0;for(var Te=B;Te;Te=Se(Te))ie++;for(;0<z-ie;)H=Se(H),z--;for(;0<ie-z;)B=Se(B),ie--;for(;z--;){if(H===B||B!==null&&H===B.alternate){Se=H;break t}H=Se(H),B=Se(B)}Se=null}else Se=null;Z!==null&&hv(re,Y,Z,Se,!1),ge!==null&&ot!==null&&hv(re,ot,ge,Se,!0)}}e:{if(Y=j?Nn(j):window,Z=Y.nodeName&&Y.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Y.type==="file")var Ke=Ry;else if(Iy(Y))if(ky)Ke=Xw;else{Ke=Jw;var ye=$w}else Z=Y.nodeName,!Z||Z.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?j&&$o(j.elementType)&&(Ke=Ry):Ke=Qw;if(Ke&&(Ke=Ke(s,j))){Ny(re,Ke,l,te);break e}ye&&ye(s,Y,j),s==="focusout"&&j&&Y.type==="number"&&j.memoizedProps.value!=null&&xl(Y,"number",Y.value)}switch(ye=j?Nn(j):window,s){case"focusin":(Iy(ye)||ye.contentEditable==="true")&&(na=ye,ph=j,Pl=null);break;case"focusout":Pl=ph=na=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,qy(re,l,te);break;case"selectionchange":if(Zw)break;case"keydown":case"keyup":qy(re,l,te)}var De;if(Xe)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ta?so(s,l)&&(Oe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Bi&&l.locale!=="ko"&&(ta||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ta&&(De=Cl()):(Li=te,wl="value"in Li?Li.value:Li.textContent,ta=!0)),ye=pd(j,Oe),0<ye.length&&(Oe=new Fi(Oe,s,null,l,te),re.push({event:Oe,listeners:ye}),De?Oe.data=De:(De=ea(l),De!==null&&(Oe.data=De)))),(De=Yn?zw(s,l):jw(s,l))&&(Oe=pd(j,"onBeforeInput"),0<Oe.length&&(ye=new Fi("onBeforeInput","beforeinput",null,l,te),re.push({event:ye,listeners:Oe}),ye.data=De)),VC(re,s,j,l,te)}dv(re,r)})}function ru(s,r,l){return{instance:s,listener:r,currentTarget:l}}function pd(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,T=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||T===null||(y=ci(s,l),y!=null&&c.unshift(ru(s,y,T)),y=ci(s,r),y!=null&&c.push(ru(s,y,T))),s.tag===3)return c;s=s.return}return[]}function FC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function hv(s,r,l,c,y){for(var T=r._reactName,A=[];l!==null&&l!==c;){var C=l,O=C.alternate,j=C.stateNode;if(C=C.tag,O!==null&&O===c)break;C!==5&&C!==26&&C!==27||j===null||(O=j,y?(j=ci(l,T),j!=null&&A.unshift(ru(l,j,O))):y||(j=ci(l,T),j!=null&&A.push(ru(l,j,O)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var BC=/\r\n?/g,HC=/\u0000|\uFFFD/g;function mv(s){return(typeof s=="string"?s:""+s).replace(BC,`
`).replace(HC,"")}function pv(s,r){return r=mv(r),mv(s)===r}function rt(s,r,l,c,y,T){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||vn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&vn(s,""+c);break;case"className":Rn(s,"class",c);break;case"tabIndex":Rn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(s,l,c);break;case"style":Al(s,c,T);break;case"data":if(r!=="object"){Rn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Jo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(l==="formAction"?(r!=="input"&&rt(s,r,"name",y.name,y,null),rt(s,r,"formEncType",y.formEncType,y,null),rt(s,r,"formMethod",y.formMethod,y,null),rt(s,r,"formTarget",y.formTarget,y,null)):(rt(s,r,"encType",y.encType,y,null),rt(s,r,"method",y.method,y,null),rt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Jo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ui);break;case"onScroll":c!=null&&Ve("scroll",s);break;case"onScrollEnd":c!=null&&Ve("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Jo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Ve("beforetoggle",s),Ve("toggle",s),Yo(s,"popover",c);break;case"xlinkActuate":Pt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Pt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Pt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Pt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Pt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Pt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Pt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Pt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Pt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=pc.get(l)||l,Yo(s,l,c))}}function Bm(s,r,l,c,y,T){switch(l){case"style":Al(s,c,T);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?vn(s,c):(typeof c=="number"||typeof c=="bigint")&&vn(s,""+c);break;case"onScroll":c!=null&&Ve("scroll",s);break;case"onScrollEnd":c!=null&&Ve("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),T=s[Kt]||null,T=T!=null?T[l]:null,typeof T=="function"&&s.removeEventListener(r,T,y),typeof c=="function")){typeof T!="function"&&T!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Yo(s,l,c)}}}function nn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",s),Ve("load",s);var c=!1,y=!1,T;for(T in l)if(l.hasOwnProperty(T)){var A=l[T];if(A!=null)switch(T){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,T,A,l,null)}}y&&rt(s,r,"srcSet",l.srcSet,l,null),c&&rt(s,r,"src",l.src,l,null);return;case"input":Ve("invalid",s);var C=T=A=y=null,O=null,j=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":O=te;break;case"defaultChecked":j=te;break;case"value":T=te;break;case"defaultValue":C=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:rt(s,r,c,te,l,null)}}fc(s,T,C,O,j,A,y,!1);return;case"select":Ve("invalid",s),c=A=T=null;for(y in l)if(l.hasOwnProperty(y)&&(C=l[y],C!=null))switch(y){case"value":T=C;break;case"defaultValue":A=C;break;case"multiple":c=C;default:rt(s,r,y,C,l,null)}r=T,l=A,s.multiple=!!c,r!=null?Hs(s,!!c,r,!1):l!=null&&Hs(s,!!c,l,!0);return;case"textarea":Ve("invalid",s),T=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(C=l[A],C!=null))switch(A){case"value":c=C;break;case"defaultValue":y=C;break;case"children":T=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:rt(s,r,A,C,l,null)}Gs(s,c,y,T);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(s,r,O,c,l,null)}return;case"dialog":Ve("beforetoggle",s),Ve("toggle",s),Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":Ve("load",s);break;case"video":case"audio":for(c=0;c<su.length;c++)Ve(su[c],s);break;case"image":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"embed":case"source":case"link":Ve("error",s),Ve("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in l)if(l.hasOwnProperty(j)&&(c=l[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,j,c,l,null)}return;default:if($o(r)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&Bm(s,r,te,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&rt(s,r,C,c,l,null))}function GC(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,T=null,A=null,C=null,O=null,j=null,te=null;for(Z in l){var re=l[Z];if(l.hasOwnProperty(Z)&&re!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(Z)||rt(s,r,Z,null,c,re)}}for(var Y in c){var Z=c[Y];if(re=l[Y],c.hasOwnProperty(Y)&&(Z!=null||re!=null))switch(Y){case"type":T=Z;break;case"name":y=Z;break;case"checked":j=Z;break;case"defaultChecked":te=Z;break;case"value":A=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:Z!==re&&rt(s,r,Y,Z,c,re)}}Ko(s,A,C,O,j,te,T,y);return;case"select":Z=A=C=Y=null;for(T in l)if(O=l[T],l.hasOwnProperty(T)&&O!=null)switch(T){case"value":break;case"multiple":Z=O;default:c.hasOwnProperty(T)||rt(s,r,T,null,c,O)}for(y in c)if(T=c[y],O=l[y],c.hasOwnProperty(y)&&(T!=null||O!=null))switch(y){case"value":Y=T;break;case"defaultValue":C=T;break;case"multiple":A=T;default:T!==O&&rt(s,r,y,T,c,O)}r=C,l=A,c=Z,Y!=null?Hs(s,!!l,Y,!1):!!c!=!!l&&(r!=null?Hs(s,!!l,r,!0):Hs(s,!!l,l?[]:"",!1));return;case"textarea":Z=Y=null;for(C in l)if(y=l[C],l.hasOwnProperty(C)&&y!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:rt(s,r,C,null,c,y)}for(A in c)if(y=c[A],T=l[A],c.hasOwnProperty(A)&&(y!=null||T!=null))switch(A){case"value":Y=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==T&&rt(s,r,A,y,c,T)}hc(s,Y,Z);return;case"option":for(var ge in l)if(Y=l[ge],l.hasOwnProperty(ge)&&Y!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:rt(s,r,ge,null,c,Y)}for(O in c)if(Y=c[O],Z=l[O],c.hasOwnProperty(O)&&Y!==Z&&(Y!=null||Z!=null))switch(O){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:rt(s,r,O,Y,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)Y=l[Se],l.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&rt(s,r,Se,null,c,Y);for(j in c)if(Y=c[j],Z=l[j],c.hasOwnProperty(j)&&Y!==Z&&(Y!=null||Z!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:rt(s,r,j,Y,c,Z)}return;default:if($o(r)){for(var ot in l)Y=l[ot],l.hasOwnProperty(ot)&&Y!==void 0&&!c.hasOwnProperty(ot)&&Bm(s,r,ot,void 0,c,Y);for(te in c)Y=c[te],Z=l[te],!c.hasOwnProperty(te)||Y===Z||Y===void 0&&Z===void 0||Bm(s,r,te,Y,c,Z);return}}for(var H in l)Y=l[H],l.hasOwnProperty(H)&&Y!=null&&!c.hasOwnProperty(H)&&rt(s,r,H,null,c,Y);for(re in c)Y=c[re],Z=l[re],!c.hasOwnProperty(re)||Y===Z||Y==null&&Z==null||rt(s,r,re,Y,c,Z)}function gv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],T=y.transferSize,A=y.initiatorType,C=y.duration;if(T&&C&&gv(A)){for(A=0,C=y.responseEnd,c+=1;c<l.length;c++){var O=l[c],j=O.startTime;if(j>C)break;var te=O.transferSize,re=O.initiatorType;te&&gv(re)&&(O=O.responseEnd,A+=te*(O<C?1:(C-j)/(O-j)))}if(--c,r+=8*(T+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hm=null,Gm=null;function gd(s){return s.nodeType===9?s:s.ownerDocument}function yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function zm(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jm=null;function jC(){var s=window.event;return s&&s.type==="popstate"?s===jm?!1:(jm=s,!0):(jm=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,YC=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(s){return Tv.resolve(null).then(s).catch($C)}:vv;function $C(s){setTimeout(function(){throw s})}function fr(s){return s==="head"}function Ev(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Na(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")ou(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,ou(l);for(var T=l.firstChild;T;){var A=T.nextSibling,C=T.nodeName;T[Ri]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=A}}else l==="body"&&ou(s.ownerDocument.body);l=y}while(l);Na(r)}function xv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Ym(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ym(l),jo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function JC(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ri])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var T=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Zn(s.nextSibling),s===null)break}return null}function QC(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Zn(s.nextSibling),s===null))return null;return s}function Sv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Zn(s.nextSibling),s===null))return null;return s}function Km(s){return s.data==="$?"||s.data==="$~"}function $m(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function XC(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Zn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Jm=null;function Av(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Zn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function bv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function wv(s,r,l){switch(r=gd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ou(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);jo(s)}var ei=new Map,Cv=new Set;function yd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Es=ce.d;ce.d={f:WC,r:ZC,D:eI,C:tI,L:nI,m:iI,X:rI,S:sI,M:oI};function WC(){var s=Es.f(),r=ld();return s||r}function ZC(s){var r=Gn(s);r!==null&&r.tag===5&&r.type==="form"?z_(r):Es.r(s)}var wa=typeof document>"u"?null:document;function Iv(s,r,l){var c=wa;if(c&&typeof r=="string"&&r){var y=_n(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Cv.has(y)||(Cv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),nn(r,"link",s),Dt(r),c.head.appendChild(r)))}}function eI(s){Es.D(s),Iv("dns-prefetch",s,null)}function tI(s,r){Es.C(s,r),Iv("preconnect",s,r)}function nI(s,r,l){Es.L(s,r,l);var c=wa;if(c&&s&&r){var y='link[rel="preload"][as="'+_n(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+_n(l.imageSizes)+'"]')):y+='[href="'+_n(s)+'"]';var T=y;switch(r){case"style":T=Ca(s);break;case"script":T=Ia(s)}ei.has(T)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),ei.set(T,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(au(T))||r==="script"&&c.querySelector(lu(T))||(r=c.createElement("link"),nn(r,"link",s),Dt(r),c.head.appendChild(r)))}}function iI(s,r){Es.m(s,r);var l=wa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(s)+'"]',T=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ia(s)}if(!ei.has(T)&&(s=E({rel:"modulepreload",href:s},r),ei.set(T,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(lu(T)))return}c=l.createElement("link"),nn(c,"link",s),Dt(c),l.head.appendChild(c)}}}function sI(s,r,l){Es.S(s,r,l);var c=wa;if(c&&s){var y=Mi(c).hoistableStyles,T=Ca(s);r=r||"default";var A=y.get(T);if(!A){var C={loading:0,preload:null};if(A=c.querySelector(au(T)))C.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=ei.get(T))&&Qm(s,l);var O=A=c.createElement("link");Dt(O),nn(O,"link",s),O._p=new Promise(function(j,te){O.onload=j,O.onerror=te}),O.addEventListener("load",function(){C.loading|=1}),O.addEventListener("error",function(){C.loading|=2}),C.loading|=4,_d(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:C},y.set(T,A)}}}function rI(s,r){Es.X(s,r);var l=wa;if(l&&s){var c=Mi(l).hoistableScripts,y=Ia(s),T=c.get(y);T||(T=l.querySelector(lu(y)),T||(s=E({src:s,async:!0},r),(r=ei.get(y))&&Xm(s,r),T=l.createElement("script"),Dt(T),nn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(y,T))}}function oI(s,r){Es.M(s,r);var l=wa;if(l&&s){var c=Mi(l).hoistableScripts,y=Ia(s),T=c.get(y);T||(T=l.querySelector(lu(y)),T||(s=E({src:s,async:!0,type:"module"},r),(r=ei.get(y))&&Xm(s,r),T=l.createElement("script"),Dt(T),nn(T,"link",s),l.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},c.set(y,T))}}function Nv(s,r,l,c){var y=(y=Me.current)?yd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ca(l.href),l=Mi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ca(l.href);var T=Mi(y).hoistableStyles,A=T.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,A),(T=y.querySelector(au(s)))&&!T._p&&(A.instance=T,A.state.loading=5),ei.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ei.set(s,l),T||aI(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ia(l),l=Mi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ca(s){return'href="'+_n(s)+'"'}function au(s){return'link[rel="stylesheet"]['+s+"]"}function Rv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function aI(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),nn(r,"link",l),Dt(r),s.head.appendChild(r))}function Ia(s){return'[src="'+_n(s)+'"]'}function lu(s){return"script[async]"+s}function kv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return r.instance=c,Dt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Dt(c),nn(c,"style",y),_d(c,l.precedence,s),r.instance=c;case"stylesheet":y=Ca(l.href);var T=s.querySelector(au(y));if(T)return r.state.loading|=4,r.instance=T,Dt(T),T;c=Rv(l),(y=ei.get(y))&&Qm(c,y),T=(s.ownerDocument||s).createElement("link"),Dt(T);var A=T;return A._p=new Promise(function(C,O){A.onload=C,A.onerror=O}),nn(T,"link",c),r.state.loading|=4,_d(T,l.precedence,s),r.instance=T;case"script":return T=Ia(l.src),(y=s.querySelector(lu(T)))?(r.instance=y,Dt(y),y):(c=l,(y=ei.get(T))&&(c=E({},l),Xm(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Dt(y),nn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,_d(c,l.precedence,s));return r.instance}function _d(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,T=y,A=0;A<c.length;A++){var C=c[A];if(C.dataset.precedence===r)T=C;else if(T!==y)break}T?T.parentNode.insertBefore(s,T.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Qm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Xm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var vd=null;function Mv(s,r,l){if(vd===null){var c=new Map,y=vd=new Map;y.set(l,c)}else y=vd,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var T=l[y];if(!(T[Ri]||T[Mt]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var A=T.getAttribute(r)||"";A=s+A;var C=c.get(A);C?C.push(T):c.set(A,[T])}}return c}function Dv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function lI(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function uI(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ca(c.href),T=r.querySelector(au(y));if(T){r=T._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Td.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=T,Dt(T);return}T=r.ownerDocument||r,c=Rv(c),(y=ei.get(y))&&Qm(c,y),T=T.createElement("link"),Dt(T);var A=T;A._p=new Promise(function(C,O){A.onload=C,A.onerror=O}),nn(T,"link",c),l.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Td.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Wm=0;function cI(s,r){return s.stylesheets&&s.count===0&&xd(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&xd(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+r);0<s.imgBytes&&Wm===0&&(Wm=62500*zC());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&xd(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>Wm?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ed=null;function xd(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ed=new Map,r.forEach(dI,s),Ed=null,Td.call(s))}function dI(s,r){if(!(r.state.loading&4)){var l=Ed.get(s);if(l)var c=l.get(null);else{l=new Map,Ed.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<y.length;T++){var A=y[T];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),T=l.get(A)||c,T===c&&l.set(null,y),l.set(A,y),this.count++,c=Td.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),T?T.parentNode.insertBefore(y,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var uu={$$typeof:K,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function fI(s,r,l,c,y,T,A,C,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=T,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Uv(s,r,l,c,y,T,A,C,O,j,te,re){return s=new fI(s,r,l,A,O,j,te,re,C),r=1,T===!0&&(r|=24),T=Mn(3,null,null,r),s.current=T,T.stateNode=s,r=kh(),r.refCount++,s.pooledCache=r,r.refCount++,T.memoizedState={element:c,isDehydrated:l,cache:r},Uh(T),s}function Vv(s){return s?(s=ra,s):ra}function Lv(s,r,l,c,y,T){y=Vv(y),c.context===null?c.context=y:c.pendingContext=y,c=tr(r),c.payload={element:l},T=T===void 0?null:T,T!==null&&(c.callback=T),l=nr(s,c,r),l!==null&&(An(l,s,r),Bl(l,s,r))}function Ov(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Zm(s,r){Ov(s,r),(s=s.alternate)&&Ov(s,r)}function qv(s){if(s.tag===13||s.tag===31){var r=ao(s,67108864);r!==null&&An(r,s,67108864),Zm(s,67108864)}}function Fv(s){if(s.tag===13||s.tag===31){var r=Ln();r=Jr(r);var l=ao(s,r);l!==null&&An(l,s,r),Zm(s,r)}}var Sd=!0;function hI(s,r,l,c){var y=$.T;$.T=null;var T=ce.p;try{ce.p=2,ep(s,r,l,c)}finally{ce.p=T,$.T=y}}function mI(s,r,l,c){var y=$.T;$.T=null;var T=ce.p;try{ce.p=8,ep(s,r,l,c)}finally{ce.p=T,$.T=y}}function ep(s,r,l,c){if(Sd){var y=tp(c);if(y===null)Fm(s,r,c,Ad,l),Hv(s,c);else if(gI(y,s,r,l,c))c.stopPropagation();else if(Hv(s,c),r&4&&-1<pI.indexOf(s)){for(;y!==null;){var T=Gn(y);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var A=wi(T.pendingLanes);if(A!==0){var C=T;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var O=1<<31-bt(A);C.entanglements[1]|=O,A&=~O}ji(T),(We&6)===0&&(od=mn()+500,iu(0))}}break;case 31:case 13:C=ao(T,2),C!==null&&An(C,T,2),ld(),Zm(T,2)}if(T=tp(c),T===null&&Fm(s,r,c,Ad,l),T===y)break;y=T}y!==null&&c.stopPropagation()}else Fm(s,r,c,null,l)}}function tp(s){return s=zn(s),np(s)}var Ad=null;function np(s){if(Ad=null,s=ki(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=f(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Ad=s,null}function Bv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case fl:return 2;case hl:return 8;case Fs:case lh:return 32;case nc:return 268435456;default:return 32}default:return 32}}var ip=!1,hr=null,mr=null,pr=null,cu=new Map,du=new Map,gr=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(s,r){switch(s){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":cu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(r.pointerId)}}function fu(s,r,l,c,y,T){return s===null||s.nativeEvent!==T?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:T,targetContainers:[y]},r!==null&&(r=Gn(r),r!==null&&qv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function gI(s,r,l,c,y){switch(r){case"focusin":return hr=fu(hr,s,r,l,c,y),!0;case"dragenter":return mr=fu(mr,s,r,l,c,y),!0;case"mouseover":return pr=fu(pr,s,r,l,c,y),!0;case"pointerover":var T=y.pointerId;return cu.set(T,fu(cu.get(T)||null,s,r,l,c,y)),!0;case"gotpointercapture":return T=y.pointerId,du.set(T,fu(du.get(T)||null,s,r,l,c,y)),!0}return!1}function Gv(s){var r=ki(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ai(s.priority,function(){Fv(l)});return}}else if(r===31){if(r=f(l),r!==null){s.blockedOn=r,ai(s.priority,function(){Fv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function bd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=tp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);bl=c,l.target.dispatchEvent(c),bl=null}else return r=Gn(l),r!==null&&qv(r),s.blockedOn=l,!1;r.shift()}return!0}function zv(s,r,l){bd(s)&&l.delete(r)}function yI(){ip=!1,hr!==null&&bd(hr)&&(hr=null),mr!==null&&bd(mr)&&(mr=null),pr!==null&&bd(pr)&&(pr=null),cu.forEach(zv),du.forEach(zv)}function wd(s,r){s.blockedOn===r&&(s.blockedOn=null,ip||(ip=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yI)))}var Cd=null;function jv(s){Cd!==s&&(Cd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cd===s&&(Cd=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(np(c||l)===null)continue;break}var T=Gn(l);T!==null&&(s.splice(r,3),r-=3,tm(T,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Na(s){function r(O){return wd(O,s)}hr!==null&&wd(hr,s),mr!==null&&wd(mr,s),pr!==null&&wd(pr,s),cu.forEach(r),du.forEach(r);for(var l=0;l<gr.length;l++){var c=gr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<gr.length&&(l=gr[0],l.blockedOn===null);)Gv(l),l.blockedOn===null&&gr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],T=l[c+1],A=y[Kt]||null;if(typeof T=="function")A||jv(l);else if(A){var C=null;if(T&&T.hasAttribute("formAction")){if(y=T,A=T[Kt]||null)C=A.formAction;else if(np(y)!==null)continue}else C=A.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),jv(l)}}}function Yv(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function sp(s){this._internalRoot=s}Id.prototype.render=sp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Ln();Lv(l,c,s,r,null,null)},Id.prototype.unmount=sp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Lv(s.current,2,null,s,null,null),ld(),r[Ni]=null}};function Id(s){this._internalRoot=s}Id.prototype.unstable_scheduleHydration=function(s){if(s){var r=lc();s={blockedOn:null,target:s,priority:r};for(var l=0;l<gr.length&&r!==0&&r<gr[l].priority;l++);gr.splice(l,0,s),l===0&&Gv(s)}};var Kv=e.version;if(Kv!=="19.2.0")throw Error(i(527,Kv,"19.2.0"));ce.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var _I={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{ri=Nd.inject(_I),Xt=Nd}catch{}}return mu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=e0,T=t0,A=n0;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Uv(s,1,!1,null,null,l,c,null,y,T,A,Yv),s[Ni]=r.current,qm(s),new sp(r)},mu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",T=e0,A=t0,C=n0,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),r=Uv(s,1,!0,r,l??null,c,y,O,T,A,C,Yv),r.context=Vv(null),l=r.current,c=Ln(),c=Jr(c),y=tr(c),y.callback=null,nr(l,y,c),l=c,r.current.lanes=l,Kr(r,l),ji(r),s[Ni]=r.current,qm(s),new Id(r)},mu.version="19.2.0",mu}var iT;function NI(){if(iT)return ap.exports;iT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ap.exports=II(),ap.exports}var RI=NI();const kI=pS(RI),MI=()=>{};var sT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},DI=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],f=t[n++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},yS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,f=u?t[o+1]:0,m=o+2<t.length,h=m?t[o+2]:0,v=a>>2,E=(a&3)<<4|f>>4;let x=(f&15)<<2|h>>6,w=h&63;m||(w=64,u||(x=64)),i.push(n[v],n[E],n[x],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const h=o<t.length?n[t.charAt(o)]:64;++o;const E=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||h==null||E==null)throw new PI;const x=a<<2|f>>4;if(i.push(x),h!==64){const w=f<<4&240|h>>2;if(i.push(w),E!==64){const U=h<<6&192|E;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UI=function(t){const e=gS(t);return yS.encodeByteArray(e,!0)},Qd=function(t){return UI(t).replace(/\./g,"")},_S=function(t){try{return yS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=()=>VI().__FIREBASE_DEFAULTS__,OI=()=>{if(typeof process>"u"||typeof sT>"u")return;const t=sT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_S(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return MI()||LI()||OI()||qI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vS=t=>{var e,n;return(n=(e=wf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},TS=t=>{const e=vS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ES=()=>{var t;return(t=wf())==null?void 0:t.config},xS=t=>{var e;return(e=wf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Qd(JSON.stringify(n)),Qd(JSON.stringify(u)),""].join(".")}const Su={};function BI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Su))Su[e]?t.emulator.push(e):t.prod.push(e);return t}function HI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rT=!1;function fg(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||Su[t]===e||Su[t]||rT)return;Su[t]=e;function n(x){return`__firebase__banner__${x}`}const i="__firebase__banner",a=BI().prod.length>0;function u(){const x=document.getElementById(i);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function m(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{rT=!0,u()},x}function v(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=HI(i),w=n("text"),U=document.getElementById(w)||document.createElement("span"),q=n("learnmore"),V=document.getElementById(q)||document.createElement("a"),Q=n("preprendIcon"),ne=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const K=x.element;f(K),v(V,q);const J=h();m(ne,Q),K.append(ne,U,V,J),document.body.appendChild(K)}a?(U.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function zI(){var e;const t=(e=wf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $I(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JI(){return!zI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QI(){try{return typeof indexedDB=="object"}catch{return!1}}function XI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="FirebaseError";class ns extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=WI,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?ZI(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new ns(o,f,i)}}function ZI(t,e){return t.replace(eN,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const eN=/\{\$([^}]+)}/g;function tN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(oT(a)&&oT(u)){if(!wo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function oT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function _u(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nN(t,e){const n=new iN(t,e);return n.subscribe.bind(n)}class iN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");sN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=dp),o.error===void 0&&(o.error=dp),o.complete===void 0&&(o.complete=dp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aN(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oN(t){return t===Eo?void 0:t}function aN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const uN={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},cN=qe.INFO,dN={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},fN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=dN[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=cN,this._logHandler=fN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const hN=(t,e)=>e.some(n=>t instanceof n);let aT,lT;function mN(){return aT||(aT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pN(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AS=new WeakMap,wp=new WeakMap,bS=new WeakMap,fp=new WeakMap,mg=new WeakMap;function gN(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(br(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&AS.set(n,t)}).catch(()=>{}),mg.set(e,t),e}function yN(t){if(wp.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});wp.set(t,e)}let Cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _N(t){Cp=t(Cp)}function vN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(hp(this),e,...n);return bS.set(i,e.sort?e.sort():[e]),br(i)}:pN().includes(t)?function(...e){return t.apply(hp(this),e),br(AS.get(this))}:function(...e){return br(t.apply(hp(this),e))}}function TN(t){return typeof t=="function"?vN(t):(t instanceof IDBTransaction&&yN(t),hN(t,mN())?new Proxy(t,Cp):t)}function br(t){if(t instanceof IDBRequest)return gN(t);if(fp.has(t))return fp.get(t);const e=TN(t);return e!==t&&(fp.set(t,e),mg.set(e,t)),e}const hp=t=>mg.get(t);function EN(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),f=br(u);return i&&u.addEventListener("upgradeneeded",m=>{i(br(u.result),m.oldVersion,m.newVersion,br(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const xN=["get","getKey","getAll","getAllKeys","count"],SN=["put","add","delete","clear"],mp=new Map;function uT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=SN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||xN.includes(n)))return;const a=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[n](...f),o&&m.done]))[0]};return mp.set(e,a),a}_N(t=>({...t,get:(e,n,i)=>uT(e,n)||t.get(e,n,i),has:(e,n)=>!!uT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function bN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",cT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new hg("@firebase/app"),wN="@firebase/app-compat",CN="@firebase/analytics-compat",IN="@firebase/analytics",NN="@firebase/app-check-compat",RN="@firebase/app-check",kN="@firebase/auth",MN="@firebase/auth-compat",DN="@firebase/database",PN="@firebase/data-connect",UN="@firebase/database-compat",VN="@firebase/functions",LN="@firebase/functions-compat",ON="@firebase/installations",qN="@firebase/installations-compat",FN="@firebase/messaging",BN="@firebase/messaging-compat",HN="@firebase/performance",GN="@firebase/performance-compat",zN="@firebase/remote-config",jN="@firebase/remote-config-compat",YN="@firebase/storage",KN="@firebase/storage-compat",$N="@firebase/firestore",JN="@firebase/ai",QN="@firebase/firestore-compat",XN="firebase",WN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",ZN={[Ip]:"fire-core",[wN]:"fire-core-compat",[IN]:"fire-analytics",[CN]:"fire-analytics-compat",[RN]:"fire-app-check",[NN]:"fire-app-check-compat",[kN]:"fire-auth",[MN]:"fire-auth-compat",[DN]:"fire-rtdb",[PN]:"fire-data-connect",[UN]:"fire-rtdb-compat",[VN]:"fire-fn",[LN]:"fire-fn-compat",[ON]:"fire-iid",[qN]:"fire-iid-compat",[FN]:"fire-fcm",[BN]:"fire-fcm-compat",[HN]:"fire-perf",[GN]:"fire-perf-compat",[zN]:"fire-rc",[jN]:"fire-rc-compat",[YN]:"fire-gcs",[KN]:"fire-gcs-compat",[$N]:"fire-fst",[QN]:"fire-fst-compat",[JN]:"fire-vertex","fire-js":"fire-js",[XN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new Map,eR=new Map,Rp=new Map;function dT(t,e){try{t.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(Rp.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Rp.set(e,t);for(const n of Xd.values())dT(n,t);for(const n of eR.values())dT(n,t);return!0}function Cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Gu("app","Firebase",tR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=WN;function pg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Np,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw wr.create("bad-app-name",{appName:String(o)});if(n||(n=ES()),!n)throw wr.create("no-options");const a=Xd.get(o);if(a){if(wo(n,a.options)&&wo(i,a.config))return a;throw wr.create("duplicate-app",{appName:o})}const u=new lN(o);for(const m of Rp.values())u.addComponent(m);const f=new nR(n,i,u);return Xd.set(o,f),f}function gg(t=Np){const e=Xd.get(t);if(!e&&t===Np&&ES())return pg();if(!e)throw wr.create("no-app",{appName:t});return e}function $i(t,e,n){let i=ZN[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(u.join(" "));return}Co(new Nr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="firebase-heartbeat-database",sR=1,Du="firebase-heartbeat-store";let pp=null;function wS(){return pp||(pp=EN(iR,sR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Du)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),pp}async function rR(t){try{const n=(await wS()).transaction(Du),i=await n.objectStore(Du).get(CS(t));return await n.done,i}catch(e){if(e instanceof ns)Is.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(n.message)}}}async function fT(t,e){try{const i=(await wS()).transaction(Du,"readwrite");await i.objectStore(Du).put(e,CS(t)),await i.done}catch(n){if(n instanceof ns)Is.warn(n.message);else{const i=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Is.warn(i.message)}}}function CS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1024,aR=30;class lR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=hT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>aR){const u=dR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Is.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hT(),{heartbeatsToSend:i,unsentEntries:o}=uR(this._heartbeatsCache.heartbeats),a=Qd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Is.warn(n),""}}}function hT(){return new Date().toISOString().substring(0,10)}function uR(t,e=oR){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),mT(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),mT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QI()?XI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return fT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mT(t){return Qd(JSON.stringify({version:2,heartbeats:t})).length}function dR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){Co(new Nr("platform-logger",e=>new AN(e),"PRIVATE")),Co(new Nr("heartbeat",e=>new lR(e),"PRIVATE")),$i(Ip,cT,t),$i(Ip,cT,"esm2020"),$i("fire-js","")}fR("");function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hR=IS,NS=new Gu("auth","Firebase",IS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new hg("@firebase/auth");function mR(t,...e){Wd.logLevel<=qe.WARN&&Wd.warn(`Auth (${Vo}): ${t}`,...e)}function Od(t,...e){Wd.logLevel<=qe.ERROR&&Wd.error(`Auth (${Vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw yg(t,...e)}function Ji(t,...e){return yg(t,...e)}function RS(t,e,n){const i={...hR(),[e]:n};return new Gu("auth","Firebase",i).create(e,{appName:t.name})}function bs(t){return RS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return NS.create(t,...e)}function Ae(t,e,...n){if(!t)throw yg(e,...n)}function Ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Od(e),new Error(e)}function Ns(t,e){t||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pR(){return pT()==="http:"||pT()==="https:"}function pT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pR()||YI()||"connection"in navigator)?navigator.onLine:!0}function yR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ns(n>e,"Short delay should be less than long delay!"),this.isMobile=GI()||KI()}get(){return gR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){Ns(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TR=new ju(3e4,6e4);function Us(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xi(t,e,n,i,o={}){return MS(t,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=zu({key:t.config.apiKey,...u}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:m,...a};return jI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(h.credentials="include"),kS.fetch()(await DS(t,t.config.apiHost,n,f),h)})}async function MS(t,e,n){t._canInitEmulator=!1;const i={..._R,...e};try{const o=new xR(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Rd(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[m,h]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",u);if(m==="USER_DISABLED")throw Rd(t,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw RS(t,v,h);Ti(t,v)}}catch(o){if(o instanceof ns)throw o;Ti(t,"network-request-failed",{message:String(o)})}}async function Yu(t,e,n,i,o={}){const a=await xi(t,e,n,i,o);return"mfaPendingCredential"in a&&Ti(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function DS(t,e,n,i){const o=`${e}${n}?${i}`,a=t,u=a.config.emulator?_g(t.config,o):`${t.config.apiScheme}://${o}`;return vR.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function ER(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ji(this.auth,"network-request-failed")),TR.get())})}}function Rd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Ji(t,e,i);return o.customData._tokenResponse=n,o}function gT(t){return t!==void 0&&t.enterprise!==void 0}class SR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ER(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AR(t,e){return xi(t,"GET","/v2/recaptchaConfig",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t,e){return xi(t,"POST","/v1/accounts:delete",e)}async function Zd(t,e){return xi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wR(t,e=!1){const n=ct(t),i=await n.getIdToken(e),o=vg(i);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Au(gp(o.auth_time)),issuedAtTime:Au(gp(o.iat)),expirationTime:Au(gp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function gp(t){return Number(t)*1e3}function vg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const o=_S(n);return o?JSON.parse(o):(Od("Failed to decode base64 JWT payload"),null)}catch(o){return Od("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function yT(t){const e=vg(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ns&&CR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function CR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(t){var E;const e=t.auth,n=await t.getIdToken(),i=await Io(t,Zd(e,{idToken:n}));Ae(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?PS(o.providerUserInfo):[],u=RR(t.providerData,a),f=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Mp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,v)}async function NR(t){const e=ct(t);await ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RR(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function PS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){const n=await MS(t,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,u=await DS(t,o,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(m.credentials="include"),kS.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MR(t,e){return xi(t,"POST","/v2/accounts:revokeToken",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=yT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:a}=await kR(e,n);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:a}=n,u=new Va;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ae(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Va,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new IR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Io(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wR(this,e)}reload(){return NR(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ef(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await Io(this,bR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,a=n.phoneNumber??void 0,u=n.photoURL??void 0,f=n.tenantId??void 0,m=n._redirectEventId??void 0,h=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:E,emailVerified:x,isAnonymous:w,providerData:U,stsTokenManager:q}=n;Ae(E&&q,e,"internal-error");const V=Va.fromJSON(this.name,q);Ae(typeof E=="string",e,"internal-error"),_r(i,e.name),_r(o,e.name),Ae(typeof x=="boolean",e,"internal-error"),Ae(typeof w=="boolean",e,"internal-error"),_r(a,e.name),_r(u,e.name),_r(f,e.name),_r(m,e.name),_r(h,e.name),_r(v,e.name);const Q=new yi({uid:E,auth:e,email:o,emailVerified:x,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:V,createdAt:h,lastLoginAt:v});return U&&Array.isArray(U)&&(Q.providerData=U.map(ne=>({...ne}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,n,i=!1){const o=new Va;o.updateFromServerResponse(n);const a=new yi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ef(a),a}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?PS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Va;f.updateFromIdToken(i);const m=new yi({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Map;function As(t){Ns(t instanceof Function,"Expected a class definition");let e=_T.get(t);return e?(Ns(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_T.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}US.type="NONE";const vT=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=qd(this.userKey,o.apiKey,a),this.fullPersistenceKey=qd("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zd(this.auth,{idToken:e}).catch(()=>{});return n?yi._fromGetAccountInfoResponse(this.auth,n,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new La(As(vT),e,i);const o=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||As(vT);const u=qd(i,e.config.apiKey,e.name);let f=null;for(const h of n)try{const v=await h._get(u);if(v){let E;if(typeof v=="string"){const x=await Zd(e,{idToken:v}).catch(()=>{});if(!x)break;E=await yi._fromGetAccountInfoResponse(e,x,v)}else E=yi._fromJSON(e,v);h!==a&&(f=E),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new La(a,e,i):(a=m[0],f&&await a._set(u,f.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new La(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(HS(e))return"Webos";if(LS(e))return"Safari";if((e.includes("chrome/")||OS(e))&&!e.includes("edge/"))return"Chrome";if(FS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function VS(t=hn()){return/firefox\//i.test(t)}function LS(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OS(t=hn()){return/crios\//i.test(t)}function qS(t=hn()){return/iemobile/i.test(t)}function FS(t=hn()){return/android/i.test(t)}function BS(t=hn()){return/blackberry/i.test(t)}function HS(t=hn()){return/webos/i.test(t)}function Tg(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DR(t=hn()){var e;return Tg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function PR(){return $I()&&document.documentMode===10}function GS(t=hn()){return Tg(t)||FS(t)||HS(t)||BS(t)||/windows phone/i.test(t)||qS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e=[]){let n;switch(t){case"Browser":n=TT(hn());break;case"Worker":n=`${TT(hn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,f)=>{try{const m=e(a);u(m)}catch(m){f(m)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e={}){return xi(t,"GET","/v2/passwordPolicy",Us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=6;class OR{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ET(this),this.idTokenSubscription=new ET(this),this.beforeStateQueue=new UR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zd(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(qn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ef(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(bs(this));const n=e?ct(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),n=new OR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await MR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Or(t){return ct(t)}class ET{constructor(e){this.auth=e,this.observer=null,this.addObserver=nN(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FR(t){If=t}function jS(t){return If.loadJS(t)}function BR(){return If.recaptchaEnterpriseScript}function HR(){return If.gapiScript}function GR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zR{constructor(){this.enterprise=new jR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YR="recaptcha-enterprise",YS="NO_RECAPTCHA";class KR{constructor(e){this.type=YR,this.auth=Or(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{AR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new SR(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{f(m)})})}function o(a,u,f){const m=window.grecaptcha;gT(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(YS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zR().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!n&&gT(window.grecaptcha))o(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=BR();m.length!==0&&(m+=f),jS(m).then(()=>{o(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function xT(t,e,n,i=!1,o=!1){const a=new KR(t);let u;if(o)u=YS;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function tf(t,e,n,i,o){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await xT(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await xT(t,e,n,n==="getOobCode");return i(t,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t,e){const n=Cf(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(wo(a,e??{}))return o;Ti(o,"already-initialized")}return n.initialize({options:e})}function JR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(As);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function QR(t,e,n){const i=Or(t);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=KS(e),{host:u,port:f}=XR(e),m=f===null?"":`:${f}`,h={url:`${a}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(wo(h,i.config.emulator)&&wo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Lr(u)?(dg(`${a}//${u}${m}`),fg("Auth",!0)):WR()}function KS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XR(t){const e=KS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:ST(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:ST(u)}}}function ST(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,n){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function ZR(t,e){return xi(t,"POST","/v1/accounts:update",e)}async function e1(t,e){return xi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(t,e){return Yu(t,"POST","/v1/accounts:signInWithPassword",Us(t,e))}async function n1(t,e){return xi(t,"POST","/v1/accounts:sendOobCode",Us(t,e))}async function i1(t,e){return n1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}async function r1(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends Eg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Pu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Pu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,n,"signInWithPassword",t1);case"emailLink":return s1(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tf(e,i,"signUpPassword",e1);case"emailLink":return r1(e,{idToken:n,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t,e){return Yu(t,"POST","/v1/accounts:signInWithIdp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="http://localhost";class No extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=n;if(!i||!o)return null;const u=new No(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Oa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Oa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oa(e,n)}buildRequest(){const e={requestUri:o1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l1(t){const e=yu(_u(t)).link,n=e?yu(_u(e)).deep_link_id:null,i=yu(_u(t)).deep_link_id;return(i?yu(_u(i)).link:null)||i||n||e||t}class xg{constructor(e){const n=yu(_u(e)),i=n.apiKey??null,o=n.oobCode??null,a=a1(n.mode??null);Ae(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=l1(e);try{return new xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,n){return Pu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=xg.parseLink(n);return Ae(i,"argument-error"),Pu._fromEmailAndCode(e,i.code,i.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends $S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ku{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xs.credential(n,i)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ku{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ku{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Er.credential(n,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(t,e){return Yu(t,"POST","/v1/accounts:signUp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const a=await yi._fromIdTokenResponse(e,i,o),u=AT(i);return new Ro({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=AT(i);return new Ro({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function AT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends ns{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new nf(e,n,i,o)}}function JS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(t,a,e,i):a})}async function c1(t,e,n=!1){const i=await Io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ro._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(t,e,n=!1){const{auth:i}=t;if(qn(i.app))return Promise.reject(bs(i));const o="reauthenticate";try{const a=await Io(t,JS(i,o,e,t),n);Ae(a.idToken,i,"internal-error");const u=vg(a.idToken);Ae(u,i,"internal-error");const{sub:f}=u;return Ae(t.uid===f,i,"user-mismatch"),Ro._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ti(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e,n=!1){if(qn(t.app))return Promise.reject(bs(t));const i="signIn",o=await JS(t,i,e),a=await Ro._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(a.user),a}async function f1(t,e){return QS(Or(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t){const e=Or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bT(t,e,n){const i=Or(t);await tf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",i1)}async function Dp(t,e,n){if(qn(t.app))return Promise.reject(bs(t));const i=Or(t),u=await tf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&XS(t),m}),f=await Ro._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function h1(t,e,n){return qn(t.app)?Promise.reject(bs(t)):f1(ct(t),Xa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&XS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(t,e){return xi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ct(t),a={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Io(i,m1(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const f=i.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function WS(t,e){return p1(ct(t),null,e)}async function p1(t,e,n){const{auth:i}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const u=await Io(t,ZR(i,a));await t._updateTokensIfNecessary(u,!0)}function g1(t,e,n,i){return ct(t).onIdTokenChanged(e,n,i)}function y1(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function _1(t,e,n,i){return ct(t).onAuthStateChanged(e,n,i)}function ZS(t){return ct(t).signOut()}const sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sf,"1"),this.storage.removeItem(sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=1e3,T1=10;class tA extends eA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);PR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,T1):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},v1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tA.type="LOCAL";const E1=tA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA extends eA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nA.type="SESSION";const iA=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Nf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:a}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(n.origin,a)),m=await x1(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,m)=>{const h=Sg("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const x=E;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(x.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function A1(t){Qi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function b1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function C1(){return sA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebaseLocalStorageDb",I1=1,rf="firebaseLocalStorage",oA="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rf(t,e){return t.transaction([rf],e?"readwrite":"readonly").objectStore(rf)}function N1(){const t=indexedDB.deleteDatabase(rA);return new $u(t).toPromise()}function Pp(){const t=indexedDB.open(rA,I1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(rf,{keyPath:oA})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(rf)?e(i):(i.close(),await N1(),e(await Pp()))})})}async function wT(t,e,n){const i=Rf(t,!0).put({[oA]:e,value:n});return new $u(i).toPromise()}async function R1(t,e){const n=Rf(t,!1).get(e),i=await new $u(n).toPromise();return i===void 0?null:i.value}function CT(t,e){const n=Rf(t,!0).delete(e);return new $u(n).toPromise()}const k1=800,M1=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>M1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(C1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await b1(),!this.activeServiceWorker)return;this.sender=new S1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await wT(e,sf,"1"),await CT(e,sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wT(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>R1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Rf(o,!1).getAll();return new $u(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const D1=aA;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t,e){return e?As(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U1(t){return QS(t.auth,new Ag(t),t.bypassAuthState)}function V1(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),d1(n,new Ag(t),t.bypassAuthState)}async function L1(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),c1(n,new Ag(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U1;case"linkViaPopup":case"linkViaRedirect":return L1;case"reauthViaPopup":case"reauthViaRedirect":return V1;default:Ti(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new ju(2e3,1e4);class Pa extends lA{constructor(e,n,i,o,a){super(e,n,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O1.get())};e()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="pendingRedirect",Fd=new Map;class F1 extends lA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const i=await B1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B1(t,e){const n=z1(e),i=G1(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function H1(t,e){Fd.set(t._key(),e)}function G1(t){return As(t._redirectPersistence)}function z1(t){return qd(q1,t.config.apiKey,t.name)}async function j1(t,e,n=!1){if(qn(t.app))return Promise.reject(bs(t));const i=Or(t),o=P1(i,e),u=await new F1(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=600*1e3;class K1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!uA(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ji(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y1&&this.cachedEventUids.clear(),this.cachedEventUids.has(IT(e))}saveEventToCache(e){this.cachedEventUids.add(IT(e)),this.lastProcessedEventTime=Date.now()}}function IT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(t,e={}){return xi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X1=/^https?/;async function W1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J1(t);for(const n of e)try{if(Z1(n))return}catch{}Ti(t,"unauthorized-domain")}function Z1(t){const e=kp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!X1.test(n))return!1;if(Q1.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=new ju(3e4,6e4);function NT(){const t=Qi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tk(t){return new Promise((e,n)=>{var o,a,u;function i(){NT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NT(),n(Ji(t,"network-request-failed"))},timeout:ek.get()})}if((a=(o=Qi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Qi().gapi)!=null&&u.load)i();else{const f=GR("iframefcb");return Qi()[f]=()=>{gapi.load?i():n(Ji(t,"network-request-failed"))},jS(`${HR()}?onload=${f}`).catch(m=>n(m))}}).catch(e=>{throw Bd=null,e})}let Bd=null;function nk(t){return Bd=Bd||tk(t),Bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new ju(5e3,15e3),sk="__/auth/iframe",rk="emulator/auth/iframe",ok={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ak=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lk(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_g(e,rk):`https://${t.config.authDomain}/${sk}`,i={apiKey:e.apiKey,appName:t.name,v:Vo},o=ak.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${zu(i).slice(1)}`}async function uk(t){const e=await nk(t),n=Qi().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:lk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ok,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ji(t,"network-request-failed"),f=Qi().setTimeout(()=>{a(u)},ik.get());function m(){Qi().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dk=500,fk=600,hk="_blank",mk="http://localhost";class RT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pk(t,e,n,i=dk,o=fk){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...ck,width:i.toString(),height:o.toString(),top:a,left:u},h=hn().toLowerCase();n&&(f=OS(h)?hk:n),VS(h)&&(e=e||mk,m.scrollbars="yes");const v=Object.entries(m).reduce((x,[w,U])=>`${x}${w}=${U},`,"");if(DR(h)&&f!=="_self")return gk(e||"",f),new RT(null);const E=window.open(e||"",f,v);Ae(E,t,"popup-blocked");try{E.focus()}catch{}return new RT(E)}function gk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="__/auth/handler",_k="emulator/auth/handler",vk=encodeURIComponent("fac");async function kT(t,e,n,i,o,a){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vo,eventId:o};if(e instanceof $S){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",tN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Ku){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await t._getAppCheckToken(),h=m?`#${vk}=${encodeURIComponent(m)}`:"";return`${Tk(t)}?${zu(f).slice(1)}${h}`}function Tk({config:t}){return t.emulator?_g(t,_k):`https://${t.authDomain}/${yk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="webStorageSupport";class Ek{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iA,this._completeRedirectFn=j1,this._overrideRedirectResult=H1}async _openPopup(e,n,i,o){var u;Ns((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await kT(e,n,i,kp(),o);return pk(e,a,Sg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const a=await kT(e,n,i,kp(),o);return A1(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Ns(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uk(e),i=new K1(e);return n.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yp,{type:yp},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[yp];a!==void 0&&n(!!a),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=W1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GS()||LS()||Tg()}}const xk=Ek;var MT="@firebase/auth",DT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bk(t){Co(new Nr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zS(t)},h=new qR(i,o,a,m);return JR(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Co(new Nr("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(i=>new Sk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(MT,DT,Ak(t)),$i(MT,DT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=300,Ck=xS("authIdTokenMaxAge")||wk;let PT=null;const Ik=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ck)return;const o=n==null?void 0:n.token;PT!==o&&(PT=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cA(t=gg()){const e=Cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$R(t,{popupRedirectResolver:xk,persistence:[D1,E1,iA]}),i=xS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=Ik(a.toString());y1(n,u,()=>u(n.currentUser)),g1(n,f=>u(f))}}const o=vS("auth");return o&&QR(n,`http://${o}`),n}function Nk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}FR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const a=Ji("internal-error");a.customData=o,n(a)},i.type="text/javascript",i.charset="UTF-8",Nk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bk("Browser");var Rk="firebase",kk="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(Rk,kk,"app");var UT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,dA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function I(){}I.prototype=R.prototype,M.F=R.prototype,M.prototype=new I,M.prototype.constructor=M,M.D=function(L,k,F){for(var P=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)P[Pe-2]=arguments[Pe];return R.prototype[k].apply(L,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,I){I||(I=0);const L=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)L[k]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(k=0;k<16;++k)L[k]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=M.g[0],I=M.g[1],k=M.g[2];let F=M.g[3],P;P=R+(F^I&(k^F))+L[0]+3614090360&4294967295,R=I+(P<<7&4294967295|P>>>25),P=F+(k^R&(I^k))+L[1]+3905402710&4294967295,F=R+(P<<12&4294967295|P>>>20),P=k+(I^F&(R^I))+L[2]+606105819&4294967295,k=F+(P<<17&4294967295|P>>>15),P=I+(R^k&(F^R))+L[3]+3250441966&4294967295,I=k+(P<<22&4294967295|P>>>10),P=R+(F^I&(k^F))+L[4]+4118548399&4294967295,R=I+(P<<7&4294967295|P>>>25),P=F+(k^R&(I^k))+L[5]+1200080426&4294967295,F=R+(P<<12&4294967295|P>>>20),P=k+(I^F&(R^I))+L[6]+2821735955&4294967295,k=F+(P<<17&4294967295|P>>>15),P=I+(R^k&(F^R))+L[7]+4249261313&4294967295,I=k+(P<<22&4294967295|P>>>10),P=R+(F^I&(k^F))+L[8]+1770035416&4294967295,R=I+(P<<7&4294967295|P>>>25),P=F+(k^R&(I^k))+L[9]+2336552879&4294967295,F=R+(P<<12&4294967295|P>>>20),P=k+(I^F&(R^I))+L[10]+4294925233&4294967295,k=F+(P<<17&4294967295|P>>>15),P=I+(R^k&(F^R))+L[11]+2304563134&4294967295,I=k+(P<<22&4294967295|P>>>10),P=R+(F^I&(k^F))+L[12]+1804603682&4294967295,R=I+(P<<7&4294967295|P>>>25),P=F+(k^R&(I^k))+L[13]+4254626195&4294967295,F=R+(P<<12&4294967295|P>>>20),P=k+(I^F&(R^I))+L[14]+2792965006&4294967295,k=F+(P<<17&4294967295|P>>>15),P=I+(R^k&(F^R))+L[15]+1236535329&4294967295,I=k+(P<<22&4294967295|P>>>10),P=R+(k^F&(I^k))+L[1]+4129170786&4294967295,R=I+(P<<5&4294967295|P>>>27),P=F+(I^k&(R^I))+L[6]+3225465664&4294967295,F=R+(P<<9&4294967295|P>>>23),P=k+(R^I&(F^R))+L[11]+643717713&4294967295,k=F+(P<<14&4294967295|P>>>18),P=I+(F^R&(k^F))+L[0]+3921069994&4294967295,I=k+(P<<20&4294967295|P>>>12),P=R+(k^F&(I^k))+L[5]+3593408605&4294967295,R=I+(P<<5&4294967295|P>>>27),P=F+(I^k&(R^I))+L[10]+38016083&4294967295,F=R+(P<<9&4294967295|P>>>23),P=k+(R^I&(F^R))+L[15]+3634488961&4294967295,k=F+(P<<14&4294967295|P>>>18),P=I+(F^R&(k^F))+L[4]+3889429448&4294967295,I=k+(P<<20&4294967295|P>>>12),P=R+(k^F&(I^k))+L[9]+568446438&4294967295,R=I+(P<<5&4294967295|P>>>27),P=F+(I^k&(R^I))+L[14]+3275163606&4294967295,F=R+(P<<9&4294967295|P>>>23),P=k+(R^I&(F^R))+L[3]+4107603335&4294967295,k=F+(P<<14&4294967295|P>>>18),P=I+(F^R&(k^F))+L[8]+1163531501&4294967295,I=k+(P<<20&4294967295|P>>>12),P=R+(k^F&(I^k))+L[13]+2850285829&4294967295,R=I+(P<<5&4294967295|P>>>27),P=F+(I^k&(R^I))+L[2]+4243563512&4294967295,F=R+(P<<9&4294967295|P>>>23),P=k+(R^I&(F^R))+L[7]+1735328473&4294967295,k=F+(P<<14&4294967295|P>>>18),P=I+(F^R&(k^F))+L[12]+2368359562&4294967295,I=k+(P<<20&4294967295|P>>>12),P=R+(I^k^F)+L[5]+4294588738&4294967295,R=I+(P<<4&4294967295|P>>>28),P=F+(R^I^k)+L[8]+2272392833&4294967295,F=R+(P<<11&4294967295|P>>>21),P=k+(F^R^I)+L[11]+1839030562&4294967295,k=F+(P<<16&4294967295|P>>>16),P=I+(k^F^R)+L[14]+4259657740&4294967295,I=k+(P<<23&4294967295|P>>>9),P=R+(I^k^F)+L[1]+2763975236&4294967295,R=I+(P<<4&4294967295|P>>>28),P=F+(R^I^k)+L[4]+1272893353&4294967295,F=R+(P<<11&4294967295|P>>>21),P=k+(F^R^I)+L[7]+4139469664&4294967295,k=F+(P<<16&4294967295|P>>>16),P=I+(k^F^R)+L[10]+3200236656&4294967295,I=k+(P<<23&4294967295|P>>>9),P=R+(I^k^F)+L[13]+681279174&4294967295,R=I+(P<<4&4294967295|P>>>28),P=F+(R^I^k)+L[0]+3936430074&4294967295,F=R+(P<<11&4294967295|P>>>21),P=k+(F^R^I)+L[3]+3572445317&4294967295,k=F+(P<<16&4294967295|P>>>16),P=I+(k^F^R)+L[6]+76029189&4294967295,I=k+(P<<23&4294967295|P>>>9),P=R+(I^k^F)+L[9]+3654602809&4294967295,R=I+(P<<4&4294967295|P>>>28),P=F+(R^I^k)+L[12]+3873151461&4294967295,F=R+(P<<11&4294967295|P>>>21),P=k+(F^R^I)+L[15]+530742520&4294967295,k=F+(P<<16&4294967295|P>>>16),P=I+(k^F^R)+L[2]+3299628645&4294967295,I=k+(P<<23&4294967295|P>>>9),P=R+(k^(I|~F))+L[0]+4096336452&4294967295,R=I+(P<<6&4294967295|P>>>26),P=F+(I^(R|~k))+L[7]+1126891415&4294967295,F=R+(P<<10&4294967295|P>>>22),P=k+(R^(F|~I))+L[14]+2878612391&4294967295,k=F+(P<<15&4294967295|P>>>17),P=I+(F^(k|~R))+L[5]+4237533241&4294967295,I=k+(P<<21&4294967295|P>>>11),P=R+(k^(I|~F))+L[12]+1700485571&4294967295,R=I+(P<<6&4294967295|P>>>26),P=F+(I^(R|~k))+L[3]+2399980690&4294967295,F=R+(P<<10&4294967295|P>>>22),P=k+(R^(F|~I))+L[10]+4293915773&4294967295,k=F+(P<<15&4294967295|P>>>17),P=I+(F^(k|~R))+L[1]+2240044497&4294967295,I=k+(P<<21&4294967295|P>>>11),P=R+(k^(I|~F))+L[8]+1873313359&4294967295,R=I+(P<<6&4294967295|P>>>26),P=F+(I^(R|~k))+L[15]+4264355552&4294967295,F=R+(P<<10&4294967295|P>>>22),P=k+(R^(F|~I))+L[6]+2734768916&4294967295,k=F+(P<<15&4294967295|P>>>17),P=I+(F^(k|~R))+L[13]+1309151649&4294967295,I=k+(P<<21&4294967295|P>>>11),P=R+(k^(I|~F))+L[4]+4149444226&4294967295,R=I+(P<<6&4294967295|P>>>26),P=F+(I^(R|~k))+L[11]+3174756917&4294967295,F=R+(P<<10&4294967295|P>>>22),P=k+(R^(F|~I))+L[2]+718787259&4294967295,k=F+(P<<15&4294967295|P>>>17),P=I+(F^(k|~R))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+F&4294967295}i.prototype.v=function(M,R){R===void 0&&(R=M.length);const I=R-this.blockSize,L=this.C;let k=this.h,F=0;for(;F<R;){if(k==0)for(;F<=I;)o(this,M,F),F+=this.blockSize;if(typeof M=="string"){for(;F<R;)if(L[k++]=M.charCodeAt(F++),k==this.blockSize){o(this,L),k=0;break}}else for(;F<R;)if(L[k++]=M[F++],k==this.blockSize){o(this,L),k=0;break}}this.h=k,this.o+=R},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;R=this.o*8;for(var I=M.length-8;I<M.length;++I)M[I]=R&255,R/=256;for(this.v(M),M=Array(16),R=0,I=0;I<4;++I)for(let L=0;L<32;L+=8)M[R++]=this.g[I]>>>L&255;return M};function a(M,R){var I=f;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=R(M)}function u(M,R){this.h=R;const I=[];let L=!0;for(let k=M.length-1;k>=0;k--){const F=M[k]|0;L&&F==R||(I[k]=F,L=!1)}this.g=I}var f={};function m(M){return-128<=M&&M<128?a(M,function(R){return new u([R|0],R<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return V(h(-M));const R=[];let I=1;for(let L=0;M>=I;L++)R[L]=M/I|0,I*=4294967296;return new u(R,0)}function v(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return V(v(M.substring(1),R));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(R,8));let L=E;for(let F=0;F<M.length;F+=8){var k=Math.min(8,M.length-F);const P=parseInt(M.substring(F,F+k),R);k<8?(k=h(Math.pow(R,k)),L=L.j(k).add(h(P))):(L=L.j(I),L=L.add(h(P)))}return L}var E=m(0),x=m(1),w=m(16777216);t=u.prototype,t.m=function(){if(q(this))return-V(this).m();let M=0,R=1;for(let I=0;I<this.g.length;I++){const L=this.i(I);M+=(L>=0?L:4294967296+L)*R,R*=4294967296}return M},t.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(U(this))return"0";if(q(this))return"-"+V(this).toString(M);const R=h(Math.pow(M,6));var I=this;let L="";for(;;){const k=J(I,R).g;I=Q(I,k.j(R));let F=((I.g.length>0?I.g[0]:I.h)>>>0).toString(M);if(I=k,U(I))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},t.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function U(M){if(M.h!=0)return!1;for(let R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function q(M){return M.h==-1}t.l=function(M){return M=Q(this,M),q(M)?-1:U(M)?0:1};function V(M){const R=M.g.length,I=[];for(let L=0;L<R;L++)I[L]=~M.g[L];return new u(I,~M.h).add(x)}t.abs=function(){return q(this)?V(this):this},t.add=function(M){const R=Math.max(this.g.length,M.g.length),I=[];let L=0;for(let k=0;k<=R;k++){let F=L+(this.i(k)&65535)+(M.i(k)&65535),P=(F>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);L=P>>>16,F&=65535,P&=65535,I[k]=P<<16|F}return new u(I,I[I.length-1]&-2147483648?-1:0)};function Q(M,R){return M.add(V(R))}t.j=function(M){if(U(this)||U(M))return E;if(q(this))return q(M)?V(this).j(V(M)):V(V(this).j(M));if(q(M))return V(this.j(V(M)));if(this.l(w)<0&&M.l(w)<0)return h(this.m()*M.m());const R=this.g.length+M.g.length,I=[];for(var L=0;L<2*R;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<M.g.length;k++){const F=this.i(L)>>>16,P=this.i(L)&65535,Pe=M.i(k)>>>16,we=M.i(k)&65535;I[2*L+2*k]+=P*we,ne(I,2*L+2*k),I[2*L+2*k+1]+=F*we,ne(I,2*L+2*k+1),I[2*L+2*k+1]+=P*Pe,ne(I,2*L+2*k+1),I[2*L+2*k+2]+=F*Pe,ne(I,2*L+2*k+2)}for(M=0;M<R;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=R;M<2*R;M++)I[M]=0;return new u(I,0)};function ne(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function K(M,R){this.g=M,this.h=R}function J(M,R){if(U(R))throw Error("division by zero");if(U(M))return new K(E,E);if(q(M))return R=J(V(M),R),new K(V(R.g),V(R.h));if(q(R))return R=J(M,V(R)),new K(V(R.g),R.h);if(M.g.length>30){if(q(M)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var I=x,L=R;L.l(M)<=0;)I=ee(I),L=ee(L);var k=le(I,1),F=le(L,1);for(L=le(L,2),I=le(I,2);!U(L);){var P=F.add(L);P.l(M)<=0&&(k=k.add(I),F=P),L=le(L,1),I=le(I,1)}return R=Q(M,k.j(R)),new K(k,R)}for(k=E;M.l(R)>=0;){for(I=Math.max(1,Math.floor(M.m()/R.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=h(I),P=F.j(R);q(P)||P.l(M)>0;)I-=L,F=h(I),P=F.j(R);U(F)&&(F=x),k=k.add(F),M=Q(M,P)}return new K(k,M)}t.B=function(M){return J(this,M).h},t.and=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let L=0;L<R;L++)I[L]=this.i(L)&M.i(L);return new u(I,this.h&M.h)},t.or=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let L=0;L<R;L++)I[L]=this.i(L)|M.i(L);return new u(I,this.h|M.h)},t.xor=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let L=0;L<R;L++)I[L]=this.i(L)^M.i(L);return new u(I,this.h^M.h)};function ee(M){const R=M.g.length+1,I=[];for(let L=0;L<R;L++)I[L]=M.i(L)<<1|M.i(L-1)>>>31;return new u(I,M.h)}function le(M,R){const I=R>>5;R%=32;const L=M.g.length-I,k=[];for(let F=0;F<L;F++)k[F]=R>0?M.i(F+I)>>>R|M.i(F+I+1)<<32-R:M.i(F+I);return new u(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,dA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,Cr=u}).apply(typeof UT<"u"?UT:typeof self<"u"?self:typeof window<"u"?window:{});var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fA,vu,hA,Hd,Up,mA,pA,gA;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof kd=="object"&&kd];for(var S=0;S<g.length;++S){var b=g[S];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function o(g,S){if(S)e:{var b=i;g=g.split(".");for(var N=0;N<g.length-1;N++){var G=g[N];if(!(G in b))break e;b=b[G]}g=g[g.length-1],N=b[g],S=S(N),S!=N&&S!=null&&e(b,g,{configurable:!0,writable:!0,value:S})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(S){var b=[],N;for(N in S)Object.prototype.hasOwnProperty.call(S,N)&&b.push([N,S[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function m(g,S,b){return g.call.apply(g.bind,arguments)}function h(g,S,b){return h=m,h.apply(null,arguments)}function v(g,S){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),g.apply(this,N)}}function E(g,S){function b(){}b.prototype=S.prototype,g.Z=S.prototype,g.prototype=new b,g.prototype.constructor=g,g.Ob=function(N,G,W){for(var fe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)fe[Re-2]=arguments[Re];return S.prototype[G].apply(N,fe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const S=g.length;if(S>0){const b=Array(S);for(let N=0;N<S;N++)b[N]=g[N];return b}return[]}function U(g,S){for(let N=1;N<arguments.length;N++){const G=arguments[N];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=g.length||0;const W=G.length||0;g.length=b+W;for(let fe=0;fe<W;fe++)g[b+fe]=G[fe]}else g.push(G)}}class q{constructor(S,b){this.i=S,this.j=b,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function V(g){u.setTimeout(()=>{throw g},0)}function Q(){var g=M;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class ne{constructor(){this.h=this.g=null}add(S,b){const N=K.get();N.set(S,b),this.h?this.h.next=N:this.g=N,this.h=N}}var K=new q(()=>new J,g=>g.reset());class J{constructor(){this.next=this.g=this.h=null}set(S,b){this.h=S,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,le=!1,M=new ne,R=()=>{const g=Promise.resolve(void 0);ee=()=>{g.then(I)}};function I(){for(var g;g=Q();){try{g.h.call(g.g)}catch(b){V(b)}var S=K;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}le=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const b=()=>{};u.addEventListener("test",b,S),u.removeEventListener("test",b,S)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function Pe(g,S){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}E(Pe,k),Pe.prototype.init=function(g,S){const b=this.type=g.type,N=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(b=="mouseover"?S=g.fromElement:b=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),$=0;function ce(g,S,b,N,G){this.listener=g,this.proxy=null,this.src=S,this.type=b,this.capture=!!N,this.ha=G,this.key=++$,this.da=this.fa=!1}function _e(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function He(g,S,b){for(const N in g)S.call(b,g[N],N,g)}function Qe(g,S){for(const b in g)S.call(void 0,g[b],b,g)}function D(g){const S={};for(const b in g)S[b]=g[b];return S}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(g,S){let b,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(b in N)g[b]=N[b];for(let W=0;W<X.length;W++)b=X[W],Object.prototype.hasOwnProperty.call(N,b)&&(g[b]=N[b])}}function de(g){this.src=g,this.g={},this.h=0}de.prototype.add=function(g,S,b,N,G){const W=g.toString();g=this.g[W],g||(g=this.g[W]=[],this.h++);const fe=Me(g,S,N,G);return fe>-1?(S=g[fe],b||(S.fa=!1)):(S=new ce(S,this.src,W,!!N,G),S.fa=b,g.push(S)),S};function ve(g,S){const b=S.type;if(b in g.g){var N=g.g[b],G=Array.prototype.indexOf.call(N,S,void 0),W;(W=G>=0)&&Array.prototype.splice.call(N,G,1),W&&(_e(S),g.g[b].length==0&&(delete g.g[b],g.h--))}}function Me(g,S,b,N){for(let G=0;G<g.length;++G){const W=g[G];if(!W.da&&W.listener==S&&W.capture==!!b&&W.ha==N)return G}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Gt={};function gt(g,S,b,N,G){if(Array.isArray(S)){for(let W=0;W<S.length;W++)gt(g,S[W],b,N,G);return null}return b=dl(b),g&&g[we]?g.J(S,b,f(N)?!!N.capture:!1,G):Gr(g,S,b,!1,N,G)}function Gr(g,S,b,N,G,W){if(!S)throw Error("Invalid event type");const fe=f(G)?!!G.capture:!!G;let Re=zr(g);if(Re||(g[je]=Re=new de(g)),b=Re.add(S,b,N,fe,W),b.proxy)return b;if(N=Fo(),b.proxy=N,N.src=g,N.listener=b,g.addEventListener)F||(G=fe),G===void 0&&(G=!1),g.addEventListener(S.toString(),N,G);else if(g.attachEvent)g.attachEvent(Ai(S.toString()),N);else if(g.addListener&&g.removeListener)g.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Fo(){function g(b){return S.call(g.src,g.listener,b)}const S=ul;return g}function Bo(g,S,b,N,G){if(Array.isArray(S))for(var W=0;W<S.length;W++)Bo(g,S[W],b,N,G);else N=f(N)?!!N.capture:!!N,b=dl(b),g&&g[we]?(g=g.i,W=String(S).toString(),W in g.g&&(S=g.g[W],b=Me(S,b,N,G),b>-1&&(_e(S[b]),Array.prototype.splice.call(S,b,1),S.length==0&&(delete g.g[W],g.h--)))):g&&(g=zr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=Me(S,b,N,G)),(b=g>-1?S[g]:null)&&Ho(b))}function Ho(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[we])ve(S.i,g);else{var b=g.type,N=g.proxy;S.removeEventListener?S.removeEventListener(b,N,g.capture):S.detachEvent?S.detachEvent(Ai(b),N):S.addListener&&S.removeListener&&S.removeListener(N),(b=zr(S))?(ve(b,g),b.h==0&&(b.src=null,S[je]=null)):_e(g)}}}function Ai(g){return g in Gt?Gt[g]:Gt[g]="on"+g}function ul(g,S){if(g.da)g=!0;else{S=new Pe(S,this);const b=g.listener,N=g.ha||g.src;g.fa&&Ho(g),g=b.call(N,S)}return g}function zr(g){return g=g[je],g instanceof de?g:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function dl(g){return typeof g=="function"?g:(g[cl]||(g[cl]=function(S){return g.handleEvent(S)}),g[cl])}function Rt(){L.call(this),this.i=new de(this),this.M=this,this.G=null}E(Rt,L),Rt.prototype[we]=!0,Rt.prototype.removeEventListener=function(g,S,b,N){Bo(this,g,S,b,N)};function zt(g,S){var b,N=g.G;if(N)for(b=[];N;N=N.G)b.push(N);if(g=g.M,N=S.type||S,typeof S=="string")S=new k(S,g);else if(S instanceof k)S.target=S.target||g;else{var G=S;S=new k(N,g),ue(S,G)}G=!0;let W,fe;if(b)for(fe=b.length-1;fe>=0;fe--)W=S.g=b[fe],G=qs(W,N,!0,S)&&G;if(W=S.g=g,G=qs(W,N,!0,S)&&G,G=qs(W,N,!1,S)&&G,b)for(fe=0;fe<b.length;fe++)W=S.g=b[fe],G=qs(W,N,!1,S)&&G}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const b=g.g[S];for(let N=0;N<b.length;N++)_e(b[N]);delete g.g[S],g.h--}}this.G=null},Rt.prototype.J=function(g,S,b,N){return this.i.add(String(g),S,!1,b,N)},Rt.prototype.K=function(g,S,b,N){return this.i.add(String(g),S,!0,b,N)};function qs(g,S,b,N){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let G=!0;for(let W=0;W<S.length;++W){const fe=S[W];if(fe&&!fe.da&&fe.capture==b){const Re=fe.listener,wt=fe.ha||fe.src;fe.fa&&ve(g.i,fe),G=Re.call(wt,N)!==!1&&G}}return G&&!N.defaultPrevented}function ah(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function tc(g){g.g=ah(()=>{g.g=null,g.i&&(g.i=!1,tc(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class mn extends L{constructor(S,b){super(),this.m=S,this.l=b,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:tc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(g){L.call(this),this.h=g,this.g={}}E(jr,L);var fl=[];function hl(g){He(g.g,function(S,b){this.g.hasOwnProperty(b)&&Ho(S)},g),g.g={}}jr.prototype.N=function(){jr.Z.N.call(this),hl(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=u.JSON.stringify,lh=u.JSON.parse,nc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function ic(){}function sc(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){k.call(this,"d")}E(Xt,k);function Hn(){k.call(this,"c")}E(Hn,k);var bt={},rc=null;function Go(){return rc=rc||new Rt}bt.Ia="serverreachability";function oc(g){k.call(this,bt.Ia,g)}E(oc,k);function bi(g){const S=Go();zt(S,new oc(S))}bt.STAT_EVENT="statevent";function Yr(g,S){k.call(this,bt.STAT_EVENT,g),this.stat=S}E(Yr,k);function kt(g){const S=Go();zt(S,new Yr(S,g))}bt.Ja="timingevent";function wi(g,S){k.call(this,bt.Ja,g),this.size=S}E(wi,k);function Ci(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function uh(g,S,b,N,G,W){g.info(function(){if(g.g)if(W){var fe="",Re=W.split("&");for(let Xe=0;Xe<Re.length;Xe++){var wt=Re[Xe].split("=");if(wt.length>1){const yt=wt[0];wt=wt[1];const Yn=yt.split("_");fe=Yn.length>=2&&Yn[1]=="type"?fe+(yt+"="+wt+"&"):fe+(yt+"=redacted&")}}}else fe=null;else fe=W;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+S+`
`+b+`
`+fe})}function ac(g,S,b,N,G,W,fe){g.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+S+`
`+b+`
`+W+" "+fe})}function Ii(g,S,b,N){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+ch(g,b)+(N?" "+N:"")})}function Kr(g,S){g.info(function(){return"TIMEOUT: "+S})}oi.prototype.info=function(){};function ch(g,S){if(!g.g)return S;if(!S)return null;try{const W=JSON.parse(S);if(W){for(g=0;g<W.length;g++)if(Array.isArray(W[g])){var b=W[g];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var G=N[0];if(G!="noop"&&G!="stop"&&G!="close")for(let fe=1;fe<N.length;fe++)N[fe]=""}}}}return Fs(W)}catch{return S}}var $r={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pl;function Jr(){}E(Jr,ic),Jr.prototype.g=function(){return new XMLHttpRequest},pl=new Jr;function is(g){return encodeURIComponent(String(g))}function lc(g){var S=1;g=g.split(":");const b=[];for(;S>0&&g.length;)b.push(g.shift()),S--;return g.length&&b.push(g.join(":")),b}function ai(g,S,b,N){this.j=g,this.i=S,this.l=b,this.S=N||1,this.V=new jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Mt={},Kt={};function Ni(g,S,b){g.M=1,g.A=Qr(Pt(S)),g.u=b,g.R=!0,zo(g,null)}function zo(g,S){g.F=Date.now(),Ri(g),g.B=Pt(g.A);var b=g.B,N=g.S;Array.isArray(N)||(N=[String(N)]),$o(b.i,"t",N),g.C=0,b=g.j.L,g.h=new li,g.g=Sc(g.j,b?S:null,!g.u),g.P>0&&(g.O=new mn(h(g.Y,g,g.g),g.P)),S=g.V,b=g.g,N=g.ba;var G="readystatechange";Array.isArray(G)||(G&&(fl[0]=G.toString()),G=fl);for(let W=0;W<G.length;W++){const fe=gt(b,G[W],N||S.handleEvent,!1,S.h||S);if(!fe)break;S.g[fe.key]=fe}S=g.J?D(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),bi(),uh(g.i,g.v,g.B,g.l,g.S,g.u)}ai.prototype.ba=function(g){g=g.target;const S=this.O;S&&di(g)==3?S.j():this.Y(g)},ai.prototype.Y=function(g){try{if(g==this.g)e:{const Re=di(this.g),wt=this.g.ya(),Xe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Re!=4||wt==7||(wt==8||Xe<=0?bi(3):bi(2)),ki(this);var S=this.g.ca();this.X=S;var b=dh(this);if(this.o=S==200,ac(this.i,this.v,this.B,this.l,this.S,Re,S),this.o){if(this.U&&!this.L){t:{if(this.g){var N,G=this.g;if((N=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(N)){var W=N;break t}}W=null}if(g=W)Ii(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mi(this,g);else{this.o=!1,this.m=3,kt(12),Nn(this),Gn(this);break e}}if(this.R){g=!0;let yt;for(;!this.K&&this.C<b.length;)if(yt=cc(this,b),yt==Kt){Re==4&&(this.m=4,kt(14),g=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Mt){this.m=4,kt(15),Ii(this.i,this.l,b,"[Invalid Chunk]"),g=!1;break}else Ii(this.i,this.l,yt,null),Mi(this,yt);if(uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||b.length!=0||this.h.h||(this.m=1,kt(16),g=!1),this.o=this.o&&g,!g)Ii(this.i,this.l,b,"[Invalid Chunked Response]"),Nn(this),Gn(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Rl(fe),fe.P=!0,kt(11))}}else Ii(this.i,this.l,b,null),Mi(this,b);Re==4&&Nn(this),this.o&&!this.K&&(Re==4?vc(this.j,this):(this.o=!1,Ri(this)))}else rs(this.g),S==400&&b.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Nn(this),Gn(this)}}}catch{}finally{}};function dh(g){if(!uc(g))return g.g.la();const S=Wt(g.g);if(S==="")return"";let b="";const N=S.length,G=di(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Nn(g),Gn(g),"";g.h.i=new u.TextDecoder}for(let W=0;W<N;W++)g.h.h=!0,b+=g.h.i.decode(S[W],{stream:!(G&&W==N-1)});return S.length=0,g.h.g+=b,g.C=0,g.h.g}function uc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function cc(g,S){var b=g.C,N=S.indexOf(`
`,b);return N==-1?Kt:(b=Number(S.substring(b,N)),isNaN(b)?Mt:(N+=1,N+b>S.length?Kt:(S=S.slice(N,N+b),g.C=N+b,S)))}ai.prototype.cancel=function(){this.K=!0,Nn(this)};function Ri(g){g.T=Date.now()+g.H,jo(g,g.H)}function jo(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ci(h(g.aa,g),S)}function ki(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ai.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Kr(this.i,this.B),this.M!=2&&(bi(),kt(17)),Nn(this),this.m=2,Gn(this)):jo(this,this.T-g)};function Gn(g){g.j.I==0||g.K||vc(g.j,g)}function Nn(g){ki(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,hl(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Mi(g,S){try{var b=g.j;if(b.I!=0&&(b.g==g||Pi(b.h,g))){if(!g.L&&Pi(b.h,g)&&b.I==3){try{var N=b.Ba.g.parse(S)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<g.F)Zo(b),$s(b);else break e;io(b),kt(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ci(h(b.Va,b),6e3));Di(b.h)<=1&&b.ta&&(b.ta=void 0)}else Fi(b,11)}else if((g.L||b.g==g)&&Zo(b),!P(S))for(G=b.Ba.g.parse(S),S=0;S<G.length;S++){let Xe=G[S];const yt=Xe[0];if(!(yt<=b.K))if(b.K=yt,Xe=Xe[1],b.I==2)if(Xe[0]=="c"){b.M=Xe[1],b.ba=Xe[2];const Yn=Xe[3];Yn!=null&&(b.ka=Yn,b.j.info("VER="+b.ka));const Bi=Xe[4];Bi!=null&&(b.za=Bi,b.j.info("SVER="+b.za));const fi=Xe[5];fi!=null&&typeof fi=="number"&&fi>0&&(N=1.5*fi,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const hi=g.g;if(hi){const so=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(so){var W=N.h;W.g||so.indexOf("spdy")==-1&&so.indexOf("quic")==-1&&so.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(_l(W,W.h),W.h=null))}if(N.G){const ea=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;ea&&(N.wa=ea,et(N.J,N.G,ea))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-g.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var fe=g;if(N.na=xc(N,N.L?N.ba:null,N.W),fe.L){vl(N.h,fe);var Re=fe,wt=N.O;wt&&(Re.H=wt),Re.D&&(ki(Re),Ri(Re)),N.g=fe}else yc(N);b.i.length>0&&qi(b)}else Xe[0]!="stop"&&Xe[0]!="close"||Fi(b,7);else b.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Fi(b,7):Il(b):Xe[0]!="noop"&&b.l&&b.l.qa(Xe),b.A=0)}}bi(4)}catch{}}var Dt=class{constructor(g,S){this.g=g,this.map=S}};function gl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Di(g){return g.h?1:g.g?g.g.size:0}function Pi(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function _l(g,S){g.g?g.g.add(S):g.h=S}function vl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}gl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Tl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const b of g.g.values())S=S.concat(b.G);return S}return w(g.i)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yo(g,S){if(g){g=g.split("&");for(let b=0;b<g.length;b++){const N=g[b].indexOf("=");let G,W=null;N>=0?(G=g[b].substring(0,N),W=g[b].substring(N+1)):G=g[b],S(G,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Rn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Rn?(this.l=g.l,$t(this,g.j),this.o=g.o,this.g=g.g,Bs(this,g.u),this.h=g.h,El(this,pc(g.i)),this.m=g.m):g&&(S=String(g).match(dc))?(this.l=!1,$t(this,S[1]||"",!0),this.o=Ui(S[2]||""),this.g=Ui(S[3]||"",!0),Bs(this,S[4]),this.h=Ui(S[5]||"",!0),El(this,S[6]||"",!0),this.m=Ui(S[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}Rn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Xr(S,Ko,!0),":");var b=this.g;return(b||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Xr(S,Ko,!0),"@"),g.push(is(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&g.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&g.push("/"),g.push(Xr(b,b.charAt(0)=="/"?xl:fc,!0))),(b=this.i.toString())&&g.push("?",b),(b=this.m)&&g.push("#",Xr(b,hc)),g.join("")},Rn.prototype.resolve=function(g){const S=Pt(this);let b=!!g.j;b?$t(S,g.j):b=!!g.o,b?S.o=g.o:b=!!g.g,b?S.g=g.g:b=g.u!=null;var N=g.h;if(b)Bs(S,g.u);else if(b=!!g.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var G=S.h.lastIndexOf("/");G!=-1&&(N=S.h.slice(0,G+1)+N)}if(G=N,G==".."||G==".")N="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){N=G.lastIndexOf("/",0)==0,G=G.split("/");const W=[];for(let fe=0;fe<G.length;){const Re=G[fe++];Re=="."?N&&fe==G.length&&W.push(""):Re==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),N&&fe==G.length&&W.push("")):(W.push(Re),N=!0)}N=W.join("/")}else N=G}return b?S.h=N:b=g.i.toString()!=="",b?El(S,pc(g.i)):b=!!g.m,b&&(S.m=g.m),S};function Pt(g){return new Rn(g)}function $t(g,S,b){g.j=b?Ui(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Bs(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function El(g,S,b){S instanceof Gs?(g.i=S,Jo(g.i,g.l)):(b||(S=Xr(S,Hs)),g.i=new Gs(S,g.l))}function et(g,S,b){g.i.set(S,b)}function Qr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Ui(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Xr(g,S,b){return typeof g=="string"?(g=encodeURI(g).replace(S,_n),b&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function _n(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ko=/[#\/\?@]/g,fc=/[#\?:]/g,xl=/[#\?]/g,Hs=/[#\?@]/g,hc=/#/g;function Gs(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function vn(g){g.g||(g.g=new Map,g.h=0,g.i&&Yo(g.i,function(S,b){g.add(decodeURIComponent(S.replace(/\+/g," ")),b)}))}t=Gs.prototype,t.add=function(g,S){vn(this),this.i=null,g=zs(this,g);let b=this.g.get(g);return b||this.g.set(g,b=[]),b.push(S),this.h+=1,this};function mc(g,S){vn(g),S=zs(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Sl(g,S){return vn(g),S=zs(g,S),g.g.has(S)}t.forEach=function(g,S){vn(this),this.g.forEach(function(b,N){b.forEach(function(G){g.call(S,G,N,this)},this)},this)};function Al(g,S){vn(g);let b=[];if(typeof S=="string")Sl(g,S)&&(b=b.concat(g.g.get(zs(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)b=b.concat(g[S]);return b}t.set=function(g,S){return vn(this),this.i=null,g=zs(this,g),Sl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},t.get=function(g,S){return g?(g=Al(this,g),g.length>0?String(g[0]):S):S};function $o(g,S,b){mc(g,S),b.length>0&&(g.i=null,g.g.set(zs(g,S),w(b)),g.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let N=0;N<S.length;N++){var b=S[N];const G=is(b);b=Al(this,b);for(let W=0;W<b.length;W++){let fe=G;b[W]!==""&&(fe+="="+is(b[W])),g.push(fe)}}return this.i=g.join("&")};function pc(g){const S=new Gs;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function zs(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function Jo(g,S){S&&!g.j&&(vn(g),g.i=null,g.g.forEach(function(b,N){const G=N.toLowerCase();N!=G&&(mc(this,N),$o(this,G,b))},g)),g.j=S}function ui(g,S){const b=new oi;if(u.Image){const N=new Image;N.onload=v(zn,b,"TestLoadImage: loaded",!0,S,N),N.onerror=v(zn,b,"TestLoadImage: error",!1,S,N),N.onabort=v(zn,b,"TestLoadImage: abort",!1,S,N),N.ontimeout=v(zn,b,"TestLoadImage: timeout",!1,S,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=g}else S(!1)}function bl(g,S){const b=new oi,N=new AbortController,G=setTimeout(()=>{N.abort(),zn(b,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:N.signal}).then(W=>{clearTimeout(G),W.ok?zn(b,"TestPingServer: ok",!0,S):zn(b,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(G),zn(b,"TestPingServer: error",!1,S)})}function zn(g,S,b,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(b)}catch{}}function js(){this.g=new nc}function Vi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Vi,ic),Vi.prototype.g=function(){return new Wr(this.i,this.h)};function Wr(g,S){Rt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Wr,Rt),t=Wr.prototype,t.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,ci(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?Ys(this):ci(this),this.readyState==3&&Qo(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,Ys(this))},t.Na=function(g){this.g&&(this.response=g,Ys(this))},t.ga=function(){this.g&&Ys(this)};function Ys(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ci(g)}t.setRequestHeader=function(g,S){this.A.append(g,S)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var b=S.next();!b.done;)b=b.value,g.push(b[0]+": "+b[1]),b=S.next();return g.join(`\r
`)};function ci(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function jn(g){let S="";return He(g,function(b,N){S+=N,S+=":",S+=b,S+=`\r
`}),S}function Zr(g,S,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=jn(b),typeof g=="string"?b!=null&&is(b):et(g,S,b))}function it(g){Rt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,Rt);var Li=/^https?$/i,wl=["POST","PUT"];t=it.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,S,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pl.g(),this.g.onreadystatechange=x(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(W){eo(this,W);return}if(g=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)b.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const W of N.keys())b.set(W,N.get(W));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(W=>W.toLowerCase()=="content-type"),G=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(wl,S,void 0)>=0)||N||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of b)this.g.setRequestHeader(W,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(W){eo(this,W)}};function eo(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Cl(g),ss(g)}function Cl(g){g.A||(g.A=!0,zt(g,"complete"),zt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,zt(this,"complete"),zt(this,"abort"),ss(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),it.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?to(this):this.Xa())},t.Xa=function(){to(this)};function to(g){if(g.h&&typeof a<"u"){if(g.v&&di(g)==4)setTimeout(g.Ca.bind(g),0);else if(zt(g,"readystatechange"),di(g)==4){g.h=!1;try{const W=g.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var b;if(!(b=S)){var N;if(N=W===0){let fe=String(g.D).match(dc)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),N=!Li.test(fe?fe.toLowerCase():"")}b=N}if(b)zt(g,"complete"),zt(g,"success");else{g.o=6;try{var G=di(g)>2?g.g.statusText:""}catch{G=""}g.l=G+" ["+g.ca()+"]",Cl(g)}}finally{ss(g)}}}}function ss(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const b=g.g;g.g=null,S||zt(g,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function di(g){return g.g?g.g.readyState:0}t.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),lh(S)}};function Wt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(g){const S={};g=(g.g&&di(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<g.length;N++){if(P(g[N]))continue;var b=lc(g[N]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const W=S[G]||[];S[G]=W,W.push(b)}Qe(S,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(g,S,b){return b&&b.internalChannelParams&&b.internalChannelParams[g]||S}function Ks(g){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,g),this.Za=Oi("retryDelaySeedMs",1e4,g),this.Ta=Oi("forwardChannelMaxRetries",2,g),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new gl(g&&g.concurrentRequestLimit),this.Ba=new js,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ks.prototype,t.ka=8,t.I=1,t.connect=function(g,S,b,N){kt(0),this.W=g,this.H=S||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=xc(this,null,this.W),qi(this)};function Il(g){if(Xo(g),g.I==3){var S=g.V++,b=Pt(g.J);if(et(b,"SID",g.M),et(b,"RID",S),et(b,"TYPE","terminate"),no(g,b),S=new ai(g,g.j,S),S.M=2,S.A=Qr(Pt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=S.A,b=!0),b||(S.g=Sc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ri(S)}Ec(g)}function $s(g){g.g&&(Rl(g),g.g.cancel(),g.g=null)}function Xo(g){$s(g),g.v&&(u.clearTimeout(g.v),g.v=null),Zo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function qi(g){if(!yl(g.h)&&!g.m){g.m=!0;var S=g.Ea;ee||R(),le||(ee(),le=!0),M.add(S,g),g.D=0}}function Wo(g,S){return Di(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ci(h(g.Ea,g,S),Tc(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const G=new ai(this,this.j,g);let W=this.o;if(this.U&&(W?(W=D(W),ue(W,this.U)):W=this.U),this.u!==null||this.R||(G.J=W,W=null),this.S)e:{for(var S=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(S+=N,S>4096){S=b;break e}if(S===4096||b===this.i.length-1){S=b+1;break e}}S=1e3}else S=1e3;S=gc(this,G,S),b=Pt(this.J),et(b,"RID",g),et(b,"CVER",22),this.G&&et(b,"X-HTTP-Session-Id",this.G),no(this,b),W&&(this.R?S="headers="+is(jn(W))+"&"+S:this.u&&Zr(b,this.u,W)),_l(this.h,G),this.Ra&&et(b,"TYPE","init"),this.S?(et(b,"$req",S),et(b,"SID","null"),G.U=!0,Ni(G,b,null)):Ni(G,b,S),this.I=2}}else this.I==3&&(g?Nl(this,g):this.i.length==0||yl(this.h)||Nl(this))};function Nl(g,S){var b;S?b=S.l:b=g.V++;const N=Pt(g.J);et(N,"SID",g.M),et(N,"RID",b),et(N,"AID",g.K),no(g,N),g.u&&g.o&&Zr(N,g.u,g.o),b=new ai(g,g.j,b,g.D+1),g.u===null&&(b.J=g.o),S&&(g.i=S.G.concat(g.i)),S=gc(g,b,1e3),b.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),_l(g.h,b),Ni(b,N,S)}function no(g,S){g.H&&He(g.H,function(b,N){et(S,N,b)}),g.l&&He({},function(b,N){et(S,N,b)})}function gc(g,S,b){b=Math.min(g.i.length,b);const N=g.l?h(g.l.Ka,g.l,g):null;e:{var G=g.i;let Re=-1;for(;;){const wt=["count="+b];Re==-1?b>0?(Re=G[0].g,wt.push("ofs="+Re)):Re=0:wt.push("ofs="+Re);let Xe=!0;for(let yt=0;yt<b;yt++){var W=G[yt].g;const Yn=G[yt].map;if(W-=Re,W<0)Re=Math.max(0,G[yt].g-100),Xe=!1;else try{W="req"+W+"_"||"";try{var fe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Bi,fi]of fe){let hi=fi;f(fi)&&(hi=Fs(fi)),wt.push(W+Bi+"="+encodeURIComponent(hi))}}catch(Bi){throw wt.push(W+"type="+encodeURIComponent("_badmap")),Bi}}catch{N&&N(Yn)}}if(Xe){fe=wt.join("&");break e}}fe=void 0}return g=g.i.splice(0,b),S.G=g,fe}function yc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;ee||R(),le||(ee(),le=!0),M.add(S,g),g.A=0}}function io(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ci(h(g.Da,g),Tc(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,_c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ci(h(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),$s(this),_c(this))};function Rl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function _c(g){g.g=new ai(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Pt(g.na);et(S,"RID","rpc"),et(S,"SID",g.M),et(S,"AID",g.K),et(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(S,"TO",g.ia),et(S,"TYPE","xmlhttp"),no(g,S),g.u&&g.o&&Zr(S,g.u,g.o),g.O&&(g.g.H=g.O);var b=g.g;g=g.ba,b.M=1,b.A=Qr(Pt(S)),b.u=null,b.R=!0,zo(b,g)}t.Va=function(){this.C!=null&&(this.C=null,$s(this),io(this),kt(19))};function Zo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function vc(g,S){var b=null;if(g.g==S){Zo(g),Rl(g),g.g=null;var N=2}else if(Pi(g.h,S))b=S.G,vl(g.h,S),N=1;else return;if(g.I!=0){if(S.o)if(N==1){b=S.u?S.u.length:0,S=Date.now()-S.F;var G=g.D;N=Go(),zt(N,new wi(N,b)),qi(g)}else yc(g);else if(G=S.m,G==3||G==0&&S.X>0||!(N==1&&Wo(g,S)||N==2&&io(g)))switch(b&&b.length>0&&(S=g.h,S.i=S.i.concat(b)),G){case 1:Fi(g,5);break;case 4:Fi(g,10);break;case 3:Fi(g,6);break;default:Fi(g,2)}}}function Tc(g,S){let b=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(b*=2),b*S}function Fi(g,S){if(g.j.info("Error code "+S),S==2){var b=h(g.bb,g),N=g.Ua;const G=!N;N=new Rn(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||$t(N,"https"),Qr(N),G?ui(N.toString(),b):bl(N.toString(),b)}else kt(2);g.I=0,g.l&&g.l.pa(S),Ec(g),Xo(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Ec(g){if(g.I=0,g.ja=[],g.l){const S=Tl(g.h);(S.length!=0||g.i.length!=0)&&(U(g.ja,S),U(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function xc(g,S,b){var N=b instanceof Rn?Pt(b):new Rn(b);if(N.g!="")S&&(N.g=S+"."+N.g),Bs(N,N.u);else{var G=u.location;N=G.protocol,S=S?S+"."+G.hostname:G.hostname,G=+G.port;const W=new Rn(null);N&&$t(W,N),S&&(W.g=S),G&&Bs(W,G),b&&(W.h=b),N=W}return b=g.G,S=g.wa,b&&S&&et(N,b,S),et(N,"VER",g.ka),no(g,N),N}function Sc(g,S,b){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new it(new Vi({ab:b})):new it(g.ma),S.Fa(g.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}t=Ac.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Js(){}Js.prototype.g=function(g,S){return new pn(g,S)};function pn(g,S){Rt.call(this),this.g=new Ks(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!P(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!P(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new os(this)}E(pn,Rt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Il(this.g)},pn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var b={};b.__data__=g,g=b}else this.v&&(b={},b.__data__=Fs(g),g=b);S.i.push(new Dt(S.Ya++,g)),S.I==3&&qi(S)},pn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,pn.Z.N.call(this)};function bc(g){Xt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const b in S){g=b;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}E(bc,Xt);function wc(){Hn.call(this),this.status=1}E(wc,Hn);function os(g){this.g=g}E(os,Ac),os.prototype.ra=function(){zt(this.g,"a")},os.prototype.qa=function(g){zt(this.g,new bc(g))},os.prototype.pa=function(g){zt(this.g,new wc)},os.prototype.oa=function(){zt(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,gA=function(){return new Js},pA=function(){return Go()},mA=bt,Up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$r.NO_ERROR=0,$r.TIMEOUT=8,$r.HTTP_ERROR=6,Hd=$r,ml.COMPLETE="complete",hA=ml,sc.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,vu=sc,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,fA=it}).apply(typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{});const VT="@firebase/firestore",LT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new hg("@firebase/firestore");function Ra(){return ko.logLevel}function pe(t,...e){if(ko.logLevel<=qe.DEBUG){const n=e.map(bg);ko.debug(`Firestore (${Wa}): ${t}`,...n)}}function Rs(t,...e){if(ko.logLevel<=qe.ERROR){const n=e.map(bg);ko.error(`Firestore (${Wa}): ${t}`,...n)}}function ja(t,...e){if(ko.logLevel<=qe.WARN){const n=e.map(bg);ko.warn(`Firestore (${Wa}): ${t}`,...n)}}function bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,yA(t,i,n)}function yA(t,e,n){let i=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Rs(i),new Error(i)}function Ze(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||yA(e,o,i)}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cn.UNAUTHENTICATED)))}shutdown(){}}class Dk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Pk{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let a=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ws,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ws)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new _A(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class Uk{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vk{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Uk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new OT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Ok(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%62))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function Vp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),a=e.charAt(i);if(o!==a)return _p(o)===_p(a)?Fe(o,a):_p(o)?1:-1}return Fe(t.length,e.length)}const qk=55296,Fk=57343;function _p(t){const e=t.charCodeAt(0);return e>=qk&&e<=Fk}function Ya(t,e,n){return t.length===e.length&&t.every(((i,o)=>n(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="__name__";class Yi{constructor(e,n,i){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=Yi.compareSegments(e.get(o),n.get(o));if(a!==0)return a}return Fe(e.length,n.length)}static compareSegments(e,n){const i=Yi.isNumericId(e),o=Yi.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Yi.extractNumericId(e).compare(Yi.extractNumericId(n)):Vp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class ut extends Yi{construct(e,n,i){return new ut(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new ut(n)}static emptyPath(){return new ut([])}}const Bk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Yi{construct(e,n,i){return new rn(e,n,i)}static isValidIdentifier(e){return Bk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new rn([qT])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new he(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new he(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e,n){if(!n)throw new he(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hk(t,e,n,i){if(e===!0&&i===!0)throw new he(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FT(t){if(!Ee.isDocumentKey(t))throw new he(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BT(t){if(Ee.isDocumentKey(t))throw new he(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be(12329,{type:typeof t})}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kf(t);throw new he(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Gk(t,e){if(e<=0)throw new he(se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ju(t,e){if(!TA(t))throw new he(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(o&&typeof u!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new he(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=-62135596800,GT=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*GT);return new pt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HT)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GT}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Bt("string",pt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new pt(0,0))}static max(){return new Ce(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function zk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new Rr(o,Ee.empty(),e)}function jk(t){return new Rr(t.readTime,t.key,Uu)}class Rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Rr(Ce.min(),Ee.empty(),Uu)}static max(){return new Rr(Ce.max(),Ee.empty(),Uu)}}function Yk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==Kk)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,i)=>{n(e)}))}static reject(e){return new ae(((n,i)=>{i(e)}))}static waitFor(e){return new ae(((n,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&n()}),(m=>i(m)))})),u=!0,a===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const i of e)n=n.next((o=>o?ae.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,a)=>{i.push(n.call(this,o,a))})),this.waitFor(i)}static mapArray(e,n){return new ae(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let m=0;m<a;m++){const h=m;n(e[h]).next((v=>{u[h]=v,++f,f===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,n){return new ae(((i,o)=>{const a=()=>{e()===!0?n().next((()=>{a()}),o):i()};a()}))}}function Jk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=-1;function Df(t){return t==null}function of(t){return t===0&&1/t==-1/0}function Qk(t){return typeof t=="number"&&Number.isInteger(t)&&!of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="";function Xk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zT(e)),e=Wk(t.get(n),e);return zT(e)}function Wk(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const a=t.charAt(o);switch(a){case"\0":n+="";break;case EA:n+="";break;default:n+=a}}return n}function zT(t){return t+EA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=a??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new sn(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,i,o,a){return this}insert(e,n,i){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YT(this.data.getIterator())}getIteratorFrom(e){return new YT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class YT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Yt(rn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SA("Invalid base64 string: "+a):a}})(e);return new an(n)}static fromUint8Array(e){const n=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const Zk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=Zk.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mr(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="server_timestamp",bA="__type__",wA="__previous_value__",CA="__local_write_time__";function Ig(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bA])==null?void 0:i.stringValue)===AA}function Pf(t){const e=t.mapValue.fields[wA];return Ig(e)?Pf(e):e}function Vu(t){const e=kr(t.mapValue.fields[CA].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,i,o,a,u,f,m,h,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=v}}const af="(default)";class Lu{constructor(e,n){this.projectId=e,this.database=n||af}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__type__",t2="__max__",Dd={mapValue:{}},NA="__vector__",lf="value";function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ig(t)?4:i2(t)?9007199254740991:n2(t)?10:11:be(28295,{value:t})}function ts(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=kr(o.timestampValue),f=kr(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,a){return Mr(o.bytesValue).isEqual(Mr(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,a){return Nt(o.geoPointValue.latitude)===Nt(a.geoPointValue.latitude)&&Nt(o.geoPointValue.longitude)===Nt(a.geoPointValue.longitude)})(t,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Nt(o.integerValue)===Nt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Nt(o.doubleValue),f=Nt(a.doubleValue);return u===f?of(u)===of(f):isNaN(u)&&isNaN(f)}return!1})(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if(jT(u)!==jT(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!ts(u[m],f[m])))return!1;return!0})(t,e);default:return be(52216,{left:t})}}function Ou(t,e){return(t.values||[]).find((n=>ts(n,e)))!==void 0}function Ka(t,e){if(t===e)return 0;const n=Dr(t),i=Dr(e);if(n!==i)return Fe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=Nt(a.integerValue||a.doubleValue),m=Nt(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(t,e);case 3:return KT(t.timestampValue,e.timestampValue);case 4:return KT(Vu(t),Vu(e));case 5:return Vp(t.stringValue,e.stringValue);case 6:return(function(a,u){const f=Mr(a),m=Mr(u);return f.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),m=u.split("/");for(let h=0;h<f.length&&h<m.length;h++){const v=Fe(f[h],m[h]);if(v!==0)return v}return Fe(f.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=Fe(Nt(a.latitude),Nt(u.latitude));return f!==0?f:Fe(Nt(a.longitude),Nt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $T(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var x,w,U,q;const f=a.fields||{},m=u.fields||{},h=(x=f[lf])==null?void 0:x.arrayValue,v=(w=m[lf])==null?void 0:w.arrayValue,E=Fe(((U=h==null?void 0:h.values)==null?void 0:U.length)||0,((q=v==null?void 0:v.values)==null?void 0:q.length)||0);return E!==0?E:$T(h,v)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Dd.mapValue&&u===Dd.mapValue)return 0;if(a===Dd.mapValue)return 1;if(u===Dd.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),h=u.fields||{},v=Object.keys(h);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const x=Vp(m[E],v[E]);if(x!==0)return x;const w=Ka(f[m[E]],h[v[E]]);if(w!==0)return w}return Fe(m.length,v.length)})(t.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function KT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=kr(t),i=kr(e),o=Fe(n.seconds,i.seconds);return o!==0?o:Fe(n.nanos,i.nanos)}function $T(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=Ka(n[o],i[o]);if(a)return a}return Fe(n.length,i.length)}function $a(t){return Lp(t)}function Lp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=kr(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Mr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=Lp(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Lp(n.fields[u])}`;return o+"}"})(t.mapValue):be(61005,{value:t})}function Gd(t){switch(Dr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(t);return e?16+Gd(e):16;case 5:return 2*t.stringValue.length;case 6:return Mr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Gd(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let o=0;return qr(i.fields,((a,u)=>{o+=a.length+Gd(u)})),o})(t.mapValue);default:throw be(13486,{value:t})}}function JT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Op(t){return!!t&&"integerValue"in t}function Ng(t){return!!t&&"arrayValue"in t}function QT(t){return!!t&&"nullValue"in t}function XT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zd(t){return!!t&&"mapValue"in t}function n2(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[IA])==null?void 0:i.stringValue)===NA}function wu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=wu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return{...t}}function i2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===t2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!zd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=rn.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!n.isImmediateParentOf(f)){const m=this.getFieldsMap(n);this.applyChanges(m,i,o),i={},o=[],n=f.popLast()}u?i[f.lastSegment()]=wu(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());zd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];zd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){qr(n,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new wn(wu(this.value))}}function RA(t){const e=[];return qr(t.fields,((n,i)=>{const o=new rn([n]);if(zd(i)){const a=RA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,i,o,a,u,f){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new dn(e,0,Ce.min(),Ce.min(),Ce.min(),wn.empty(),0)}static newFoundDocument(e,n,i,o){return new dn(e,1,n,Ce.min(),i,o,0)}static newNoDocument(e,n){return new dn(e,2,n,Ce.min(),Ce.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,Ce.min(),Ce.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.position=e,this.inclusive=n}}function WT(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),n.key):i=Ka(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function ZT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function s2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class Ft extends kA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new o2(e,n,i):n==="array-contains"?new u2(e,i):n==="in"?new c2(e,i):n==="not-in"?new d2(e,i):n==="array-contains-any"?new f2(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new a2(e,i):new l2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ka(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends kA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ei(e,n)}matches(e){return MA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MA(t){return t.op==="and"}function DA(t){return r2(t)&&MA(t)}function r2(t){for(const e of t.filters)if(e instanceof Ei)return!1;return!0}function qp(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(DA(t))return t.filters.map((e=>qp(e))).join(",");{const e=t.filters.map((n=>qp(n))).join(",");return`${t.op}(${e})`}}function PA(t,e){return t instanceof Ft?(function(i,o){return o instanceof Ft&&i.op===o.op&&i.field.isEqual(o.field)&&ts(i.value,o.value)})(t,e):t instanceof Ei?(function(i,o){return o instanceof Ei&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&PA(u,o.filters[f])),!0):!1})(t,e):void be(19439)}function UA(t){return t instanceof Ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`})(t):t instanceof Ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(UA).join(" ,")+"}"})(t):"Filter"}class o2 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class a2 extends Ft{constructor(e,n){super(e,"in",n),this.keys=VA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class l2 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=VA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function VA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class u2 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ng(n)&&Ou(n.arrayValue,this.value)}}class c2 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ou(this.value.arrayValue,n)}}class d2 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ou(this.value.arrayValue,n)}}class f2 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ou(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function eE(t,e=null,n=[],i=[],o=null,a=null,u=null){return new h2(t,e,n,i,o,a,u)}function Rg(t){const e=Ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>qp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>$a(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>$a(i))).join(",")),e.Te=n}return e.Te}function kg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZT(t.startAt,e.startAt)&&ZT(t.endAt,e.endAt)}function Fp(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n=null,i=[],o=[],a=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function m2(t,e,n,i,o,a,u,f){return new tl(t,e,n,i,o,a,u,f)}function Uf(t){return new tl(t)}function tE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LA(t){return t.collectionGroup!==null}function Cu(t){const e=Ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Yt(rn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qu(a,i))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new qu(rn.keyField(),i))}return e.Ie}function Xi(t){const e=Ne(t);return e.Ee||(e.Ee=p2(e,Cu(t))),e.Ee}function p2(t,e){if(t.limitType==="F")return eE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new qu(o.field,a)}));const n=t.endAt?new uf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new uf(t.startAt.position,t.startAt.inclusive):null;return eE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bp(t,e){const n=t.filters.concat([e]);return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vf(t,e){return kg(Xi(t),Xi(e))&&t.limitType===e.limitType}function OA(t){return`${Rg(Xi(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>UA(o))).join(", ")}]`),Df(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>$a(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>$a(o))).join(",")),`Target(${i})`})(Xi(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,o){for(const a of Cu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(t,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,m){const h=WT(u,f,m);return u.inclusive?h<=0:h<0})(i.startAt,Cu(i),o)||i.endAt&&!(function(u,f,m){const h=WT(u,f,m);return u.inclusive?h>=0:h>0})(i.endAt,Cu(i),o))})(t,e)}function g2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qA(t){return(e,n)=>{let i=!1;for(const o of Cu(t)){const a=y2(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function y2(t,e,n){const i=t.field.isKeyField()?Ee.comparator(e.key,n.key):(function(a,u,f){const m=u.data.field(a),h=f.data.field(a);return m!==null&&h!==null?Ka(m,h):be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,((n,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new vt(Ee.comparator);function ks(){return _2}const FA=new vt(Ee.comparator);function Tu(...t){let e=FA;for(const n of t)e=e.insert(n.key,n);return e}function BA(t){let e=FA;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function xo(){return Iu()}function HA(){return Iu()}function Iu(){return new Lo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const v2=new vt(Ee.comparator),T2=new Yt(Ee.comparator);function Be(...t){let e=T2;for(const n of t)e=e.add(n);return e}const E2=new Yt(Fe);function x2(){return E2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function GA(t){return{integerValue:""+t}}function S2(t,e){return Qk(e)?GA(e):Mg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function A2(t,e,n){return t instanceof df?(function(o,a){const u={fields:{[bA]:{stringValue:AA},[CA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Ig(a)&&(a=Pf(a)),a&&(u.fields[wA]=a),{mapValue:u}})(n,e):t instanceof Fu?jA(t,e):t instanceof Bu?YA(t,e):(function(o,a){const u=zA(o,a),f=nE(u)+nE(o.Ae);return Op(u)&&Op(o.Ae)?GA(f):Mg(o.serializer,f)})(t,e)}function b2(t,e,n){return t instanceof Fu?jA(t,e):t instanceof Bu?YA(t,e):n}function zA(t,e){return t instanceof ff?(function(i){return Op(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class df extends Of{}class Fu extends Of{constructor(e){super(),this.elements=e}}function jA(t,e){const n=KA(e);for(const i of t.elements)n.some((o=>ts(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Bu extends Of{constructor(e){super(),this.elements=e}}function YA(t,e){let n=KA(e);for(const i of t.elements)n=n.filter((o=>!ts(o,i)));return{arrayValue:{values:n}}}class ff extends Of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nE(t){return Nt(t.integerValue||t.doubleValue)}function KA(t){return Ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function w2(t,e){return t.field.isEqual(e.field)&&(function(i,o){return i instanceof Fu&&o instanceof Fu||i instanceof Bu&&o instanceof Bu?Ya(i.elements,o.elements,ts):i instanceof ff&&o instanceof ff?ts(i.Ae,o.Ae):i instanceof df&&o instanceof df})(t.transform,e.transform)}class C2{constructor(e,n){this.version=e,this.transformResults=n}}class ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function $A(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dg(t.key,ii.none()):new Qu(t.key,t.data,ii.none());{const n=t.data,i=wn.empty();let o=new Yt(rn.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Fr(t.key,i,new Fn(o.toArray()),ii.none())}}function I2(t,e,n){t instanceof Qu?(function(o,a,u){const f=o.value.clone(),m=sE(o.fieldTransforms,a,u.transformResults);f.setAll(m),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Fr?(function(o,a,u){if(!jd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=sE(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(JA(o)),m.setAll(f),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(t,e,n):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Nu(t,e,n,i){return t instanceof Qu?(function(a,u,f,m){if(!jd(a.precondition,u))return f;const h=a.value.clone(),v=rE(a.fieldTransforms,m,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Fr?(function(a,u,f,m){if(!jd(a.precondition,u))return f;const h=rE(a.fieldTransforms,m,u),v=u.data;return v.setAll(JA(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,f){return jd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(t,e,n)}function N2(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=zA(i.transform,o||null);a!=null&&(n===null&&(n=wn.empty()),n.set(i.field,a))}return n||null}function iE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ya(i,o,((a,u)=>w2(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qu extends qf{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fr extends qf{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function sE(t,e,n){const i=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,b2(u,f,n[o]))}return i}function rE(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,A2(a,u,e))}return i}class Dg extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R2 extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&I2(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Nu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=HA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=n.has(o.key)?null:f;const m=$A(u,f);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,((n,i)=>iE(n,i)))&&Ya(this.baseMutations,e.baseMutations,((n,i)=>iE(n,i)))}}class Pg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return v2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Pg(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ye;function P2(t){switch(t){case se.OK:return be(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return be(15467,{code:t})}}function QA(t){if(t===void 0)return Rs("GRPC error has no .code"),se.UNKNOWN;switch(t){case qt.OK:return se.OK;case qt.CANCELLED:return se.CANCELLED;case qt.UNKNOWN:return se.UNKNOWN;case qt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case qt.INTERNAL:return se.INTERNAL;case qt.UNAVAILABLE:return se.UNAVAILABLE;case qt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case qt.NOT_FOUND:return se.NOT_FOUND;case qt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case qt.ABORTED:return se.ABORTED;case qt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case qt.DATA_LOSS:return se.DATA_LOSS;default:return be(39323,{code:t})}}(Ye=qt||(qt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Cr([4294967295,4294967295],0);function oE(t){const e=U2().encode(t),n=new dA;return n.update(e),new Uint8Array(n.digest())}function aE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Cr([n,i],0),new Cr([o,a],0)]}class Ug{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Eu(`Invalid padding: ${n}`);if(i<0)throw new Eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Eu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cr.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Cr.fromNumber(i)));return o.compare(V2)===1&&(o=new Cr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=oE(e),[i,o]=aE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ug(a,o,n);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const n=oE(e),[i,o]=aE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ff(Ce.min(),o,new vt(Fe),ks(),Be())}}class Xu{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Xu(i,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class XA{constructor(e,n){this.targetId=e,this.Ce=n}}class WA{constructor(e,n,i=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=uE(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),i=Be();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:be(38017,{changeType:a})}})),new Xu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=uE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=Pd(),this.He=Pd(),this.Ye=new vt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const a=o.target;if(Fp(a))if(i===0){const u=new Ee(a.path);this.et(n,u,dn.newNoDocument(u,Ce.min()))}else Ze(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(n);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,f;try{u=Mr(i).toUint8Array()}catch(m){if(m instanceof SA)return ja("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Ug(u,o,a)}catch(m){return ja(m instanceof Eu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(n,a,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Fp(f.target)){const m=new Ee(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,dn.newNoDocument(m,e))}a.Be&&(n.set(u,a.ke()),a.qe())}}));let i=Be();this.He.forEach(((a,u)=>{let f=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Ff(e,n,this.Ye,this.je,i);return this.je=ks(),this.Je=Pd(),this.He=Pd(),this.Ye=new vt(Fe),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new lE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Yt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Yt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pd(){return new vt(Ee.comparator)}function uE(){return new vt(Ee.comparator)}const O2={asc:"ASCENDING",desc:"DESCENDING"},q2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F2={and:"AND",or:"OR"};class B2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hp(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function hf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H2(t,e){return hf(t,e.toTimestamp())}function Wi(t){return Ze(!!t,49232),Ce.fromTimestamp((function(n){const i=kr(n);return new pt(i.seconds,i.nanos)})(t))}function Vg(t,e){return Gp(t,e).canonicalString()}function Gp(t,e){const n=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function eb(t){const e=ut.fromString(t);return Ze(rb(e),10190,{key:e.toString()}),e}function zp(t,e){return Vg(t.databaseId,e.path)}function vp(t,e){const n=eb(e);if(n.get(1)!==t.databaseId.projectId)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(nb(n))}function tb(t,e){return Vg(t.databaseId,e)}function G2(t){const e=eb(t);return e.length===4?ut.emptyPath():nb(e)}function jp(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nb(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cE(t,e,n){return{name:zp(t,e),fields:n.value.mapValue.fields}}function z2(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:be(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),an.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),an.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const v=h.code===void 0?se.UNKNOWN:QA(h.code);return new he(v,h.message||"")})(u);n=new WA(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=vp(t,i.document.name),a=Wi(i.document.updateTime),u=i.document.createTime?Wi(i.document.createTime):Ce.min(),f=new wn({mapValue:{fields:i.document.fields}}),m=dn.newFoundDocument(o,a,u,f),h=i.targetIds||[],v=i.removedTargetIds||[];n=new Yd(h,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=vp(t,i.document),a=i.readTime?Wi(i.readTime):Ce.min(),u=dn.newNoDocument(o,a),f=i.removedTargetIds||[];n=new Yd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=vp(t,i.document),a=i.removedTargetIds||[];n=new Yd([],a,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new D2(o,a),f=i.targetId;n=new XA(f,u)}}return n}function j2(t,e){let n;if(e instanceof Qu)n={update:cE(t,e.key,e.value)};else if(e instanceof Dg)n={delete:zp(t,e.key)};else if(e instanceof Fr)n={update:cE(t,e.key,e.data),updateMask:eM(e.fieldMask)};else{if(!(e instanceof R2))return be(16599,{Vt:e.type});n={verify:zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof df)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Bu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ff)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw be(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:H2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:be(27497)})(t,e.precondition)),n}function Y2(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map((n=>(function(o,a){let u=o.updateTime?Wi(o.updateTime):Wi(a);return u.isEqual(Ce.min())&&(u=Wi(a)),new C2(u,o.transformResults||[])})(n,e)))):[]}function K2(t,e){return{documents:[tb(t,e.path)]}}function $2(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=tb(t,o);const a=(function(h){if(h.length!==0)return sb(Ei.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(x){return{field:Ma(x.field),direction:X2(x.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=Hp(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:o}}function J2(t){let e=G2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];n.where&&(a=(function(E){const x=ib(E);return x instanceof Ei&&DA(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((x=>(function(U){return new qu(Da(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(x)))})(n.orderBy));let f=null;n.limit&&(f=(function(E){let x;return x=typeof E=="object"?E.value:E,Df(x)?null:x})(n.limit));let m=null;n.startAt&&(m=(function(E){const x=!!E.before,w=E.values||[];return new uf(w,x)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const x=!E.before,w=E.values||[];return new uf(w,x)})(n.endAt)),m2(e,o,u,a,f,"F",m,h)}function Q2(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ib(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Da(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Da(n.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Da(n.unaryFilter.field);return Ft.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Da(n.unaryFilter.field);return Ft.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ft.create(Da(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ei.create(n.compositeFilter.filters.map((i=>ib(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(t):be(30097,{filter:t})}function X2(t){return O2[t]}function W2(t){return q2[t]}function Z2(t){return F2[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function Da(t){return rn.fromServerFormat(t.fieldPath)}function sb(t){return t instanceof Ft?(function(n){if(n.op==="=="){if(XT(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(QT(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XT(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(QT(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:W2(n.op),value:n.value}}})(t):t instanceof Ei?(function(n){const i=n.getFilters().map((o=>sb(o)));return i.length===1?i[0]:{compositeFilter:{op:Z2(n.op),filters:i}}})(t):be(54877,{filter:t})}function eM(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,i,o,a=Ce.min(),u=Ce.min(),f=an.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.yt=e}}function nM(t){const e=J2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.Cn=new sM}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Rr.min())}updateCollectionGroup(e,n,i){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class sM{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Yt(ut.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Yt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ob=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(ob,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ja(0)}static cr(){return new Ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="LruGarbageCollector",rM=1048576;function hE([t,e],[n,i]){const o=Fe(t,n);return o===0?Fe(e,i):o}class oM{constructor(e){this.Ir=e,this.buffer=new Yt(hE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();hE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aM{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(fE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?pe(fE,"Ignoring IndexedDB error during garbage collection: ",n):await Za(n)}await this.Vr(3e5)}))}}class lM{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Mf.ce);const i=new oM(n);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(dE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,a,u,f,m,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Ra()<=qe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(h-m)+`ms
Total Duration: ${h-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function uM(t,e){return new lM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.changes=new Lo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Nu(i.mutation,o,Fn.empty(),pt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Be()){const o=xo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((a=>{let u=Tu();return a.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=xo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Be())))}populateOverlays(e,n,i){const o=[];return i.forEach((a=>{n.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{n.set(u,f)}))}))}computeViews(e,n,i,o){let a=ks();const u=Iu(),f=(function(){return Iu()})();return n.forEach(((m,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof Fr)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),Nu(v.mutation,h,v.mutation.getFieldMask(),pt.now())):u.set(h.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,v)=>u.set(h,v))),n.forEach(((h,v)=>f.set(h,new dM(v,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,n){const i=Iu();let o=new vt(((u,f)=>u-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const f of u)f.keys().forEach((m=>{const h=n.get(m);if(h===null)return;let v=i.get(m)||Fn.empty();v=f.applyToLocalView(h,v),i.set(m,v);const E=(o.get(f.batchId)||Be()).add(m);o=o.insert(f.batchId,E)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),h=m.key,v=m.value,E=HA();v.forEach((x=>{if(!a.has(x)){const w=$A(n.get(x),i.get(x));w!==null&&E.set(x,w),a=a.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):ae.resolve(xo());let f=Uu,m=a;return u.next((h=>ae.forEach(h,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),a.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{m=m.insert(v,x)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,Be()))).next((v=>({batchId:f,changes:BA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((i=>{let o=Tu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=Tu();return this.indexManager.getCollectionParents(e,a).next((f=>ae.forEach(f,(m=>{const h=(function(E,x){return new tl(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((E,x)=>{u=u.insert(E,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,dn.newInvalidDocument(v)))}));let f=Tu();return u.forEach(((m,h)=>{const v=a.get(m);v!==void 0&&Nu(v.mutation,h,Fn.empty(),pt.now()),Lf(n,h)&&(f=f.insert(m,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Wi(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:nM(o.bundledQuery),readTime:Wi(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.overlays=new vt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=xo();return ae.forEach(n,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,a)=>{this.St(e,n,a)})),ae.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,n,i){const o=xo(),a=n.length+1,u=new Ee(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,h=m.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new vt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=xo(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const f=xo(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,v)=>f.set(h,v))),!(f.size()>=o)););return ae.resolve(f)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new M2(n,i));let a=this.qr.get(n);a===void 0&&(a=Be(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.Qr=new Yt(Qt.$r),this.Ur=new Yt(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Qt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Qt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ee(new ut([])),i=new Qt(n,e),o=new Qt(n,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new ut([])),i=new Qt(n,e),o=new Qt(n,e+1);let a=Be();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Qt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(Qt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new k2(a,n,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new Qt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),a=o<0?0:o;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Cg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);a.push(f)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Yt(Fe);return n.forEach((o=>{const a=new Qt(o,0),u=new Qt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(f=>{i=i.add(f.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new Qt(new Ee(a),0);let f=new Yt(Fe);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(m.Yr)),!0)}),u),ae.resolve(this.ti(f))}ti(e){const n=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(n.mutations,(o=>{const a=new Qt(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Qt(n,0),o=this.Zr.firstAfterOrEqual(i);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ae.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let i=ks();return n.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():dn.newInvalidDocument(o))})),ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=ks();const u=n.path,f=new Ee(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:h,value:{document:v}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||Yk(jk(v),i)<=0||(o.has(v.key)||Lf(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,n,i,o){be(9500)}ii(e,n){return ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new _M(this)}getSize(e){return ae.resolve(this.size)}}class _M extends cM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.persistence=e,this.si=new Lo((n=>Rg(n)),kg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Lg,this.targetCount=0,this.ai=Ja.ur()}forEachTarget(e,n){return this.si.forEach(((i,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ja(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=n&&i.get(f.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),ae.waitFor(a).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ae.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ae.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ae.resolve(i)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new pM,this.referenceDelegate=e(this),this.Pi=new vM(this),this.indexManager=new iM,this.remoteDocumentCache=(function(o){return new yM(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new tM(n),this.Ii=new hM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new gM(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){pe("MemoryPersistence","Starting transaction:",e);const o=new TM(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,n){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class TM extends $k{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Lg,this.Vi=null}static mi(e){return new Og(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const o=Ee.fromPath(i);return this.gi(e,o).next((a=>{a||n.removeEntry(o,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mf{constructor(e,n){this.persistence=e,this.pi=new Lo((i=>Xk(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=uM(this,n)}static mi(e,n){return new mf(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?ae.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,n).next((f=>{f||(i++,a.removeEntry(u,Ce.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gd(e.data.value)),n}br(e,n,i){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Be(),o=Be();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new qg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JI()?8:Jk(hn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.ys(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,n,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new EM;return this.Ss(e,n,u).next((f=>{if(a.result=f,this.Vs)return this.bs(e,n,u,f.size)}))})).next((()=>a.result))}bs(e,n,i,o){return i.documentReadCount<this.fs?(Ra()<=qe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Ra()<=qe.DEBUG&&pe("QueryEngine","Query:",ka(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ra()<=qe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(n))):ae.resolve())}ys(e,n){if(tE(n))return ae.resolve(null);let i=Xi(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=cf(n,null,"F"),i=Xi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.Ds(n,f);return this.Cs(n,h,u,m.readTime)?this.ys(e,cf(n,null,"F")):this.vs(e,h,n,m)}))))})))))}ws(e,n,i,o){return tE(n)||o.isEqual(Ce.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(n,a);return this.Cs(n,u,i,o)?ae.resolve(null):(Ra()<=qe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ka(n)),this.vs(e,u,n,zk(o,Uu)).next((f=>f)))}))}Ds(e,n){let i=new Yt(qA(e));return n.forEach(((o,a)=>{Lf(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,n,i){return Ra()<=qe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ka(n)),this.ps.getDocumentsMatchingQuery(e,n,Rr.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="LocalStore",SM=3e8;class AM{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new vt(Fe),this.xs=new Lo((a=>Rg(a)),kg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function bM(t,e,n,i){return new AM(t,e,n,i)}async function lb(t,e){const n=Ne(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let m=Be();for(const h of o){u.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}for(const h of a){f.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}return n.localDocuments.getDocuments(i,m).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function wM(t,e){const n=Ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,h,v){const E=h.batch,x=E.keys();let w=ae.resolve();return x.forEach((U=>{w=w.next((()=>v.getEntry(m,U))).next((q=>{const V=h.docVersions.get(U);Ze(V!==null,48541),q.version.compareTo(V)<0&&(E.applyToRemoteDocument(q,h),q.isValidDocument()&&(q.setReadTime(h.commitVersion),v.addEntry(q)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=Be();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(m=m.add(f.batch.mutations[h].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function ub(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function CM(t,e){const n=Ne(t),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const x=o.get(E);if(!x)return;f.push(n.Pi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(a,v.addedDocuments,E))));let w=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(an.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(v.resumeToken,i)),o=o.insert(E,w),(function(q,V,Q){return q.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=SM?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(x,w,v)&&f.push(n.Pi.updateTargetData(a,w))}));let m=ks(),h=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),f.push(IM(a,u,e.documentUpdates).next((v=>{m=v.ks,h=v.qs}))),!i.isEqual(Ce.min())){const v=n.Pi.getLastRemoteSnapshotVersion(a).next((E=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(v)}return ae.waitFor(f).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(n.Ms=o,a)))}function IM(t,e,n){let i=Be(),o=Be();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=ks();return n.forEach(((f,m)=>{const h=a.get(f);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):pe(Fg,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function NM(t,e){const n=Ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Cg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function RM(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,e).next((a=>a?(o=a,ae.resolve(o)):n.Pi.allocateTargetId(i).next((u=>(o=new Sr(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Yp(t,e,n){const i=Ne(t),o=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!el(u))throw u;pe(Fg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function mE(t,e,n){const i=Ne(t);let o=Ce.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,v){const E=Ne(m),x=E.xs.get(v);return x!==void 0?ae.resolve(E.Ms.get(x)):E.Pi.getTargetData(h,v)})(i,u,Xi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{a=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?o:Ce.min(),n?a:Be()))).next((f=>(kM(i,g2(e),f),{documents:f,Qs:a})))))}function kM(t,e,n){let i=t.Os.get(e)||Ce.min();n.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Os.set(e,i)}class pE{constructor(){this.activeTargetIds=x2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MM{constructor(){this.Mo=new pE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="ConnectivityMonitor";class yE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(gE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(gE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud=null;function Kp(){return Ud===null?Ud=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ud++,"0x"+Ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===af?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,a){const u=Kp(),f=this.zo(e,n.toUriEncodedString());pe(Tp,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,a);const{host:h}=new URL(f),v=Lr(h);return this.Jo(e,f,m,i,v).then((E=>(pe(Tp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw ja(Tp,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,n,i,o,a,u){return this.Go(e,n,i,o,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,n){const i=PM[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class LM extends UM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,a){const u=Kp();return new Promise(((f,m)=>{const h=new fA;h.setWithCredentials(!0),h.listenOnce(hA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Hd.NO_ERROR:const E=h.getResponseJson();pe(un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Hd.TIMEOUT:pe(un,`RPC '${e}' ${u} timed out`),m(new he(se.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const x=h.getStatus();if(pe(un,`RPC '${e}' ${u} failed with status:`,x,"response text:",h.getResponseText()),x>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const U=w==null?void 0:w.error;if(U&&U.status&&U.message){const q=(function(Q){const ne=Q.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ne)>=0?ne:se.UNKNOWN})(U.status);m(new he(q,U.message))}else m(new he(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new he(se.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{pe(un,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);pe(un,`RPC '${e}' ${u} sending request:`,o),h.send(n,"POST",v,i,15)}))}T_(e,n,i){const o=Kp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gA(),f=pA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const v=a.join("");pe(un,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=u.createWebChannel(v,m);this.I_(E);let x=!1,w=!1;const U=new VM({Yo:V=>{w?pe(un,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(x||(pe(un,`Opening RPC '${e}' stream ${o} transport.`),E.open(),x=!0),pe(un,`RPC '${e}' stream ${o} sending:`,V),E.send(V))},Zo:()=>E.close()}),q=(V,Q,ne)=>{V.listen(Q,(K=>{try{ne(K)}catch(J){setTimeout((()=>{throw J}),0)}}))};return q(E,vu.EventType.OPEN,(()=>{w||(pe(un,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),q(E,vu.EventType.CLOSE,(()=>{w||(w=!0,pe(un,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(E))})),q(E,vu.EventType.ERROR,(V=>{w||(w=!0,ja(un,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),U.a_(new he(se.UNAVAILABLE,"The operation could not be completed")))})),q(E,vu.EventType.MESSAGE,(V=>{var Q;if(!w){const ne=V.data[0];Ze(!!ne,16349);const K=ne,J=(K==null?void 0:K.error)||((Q=K[0])==null?void 0:Q.error);if(J){pe(un,`RPC '${e}' stream ${o} received error:`,J);const ee=J.status;let le=(function(I){const L=qt[I];if(L!==void 0)return QA(L)})(ee),M=J.message;le===void 0&&(le=se.INTERNAL,M="Unknown error status: "+ee+" with message "+J.message),w=!0,U.a_(new he(le,M)),E.close()}else pe(un,`RPC '${e}' stream ${o} received:`,ne),U.u_(ne)}})),q(f,mA.STAT_EVENT,(V=>{V.stat===Up.PROXY?pe(un,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Up.NOPROXY&&pe(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new B2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="PersistentStream";class db{constructor(e,n,i,o,a,u,f,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(_E,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(pe(_E,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OM extends db{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ce.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Wi(u.readTime):Ce.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=jp(this.serializer),n.addTarget=(function(a,u){let f;const m=u.target;if(f=Fp(m)?{documents:K2(a,m)}:{query:$2(a,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=ZA(a,u.resumeToken);const h=Hp(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=hf(a,u.snapshotVersion.toTimestamp());const h=Hp(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=Q2(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.q_(n)}}class qM extends db{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Y2(e.writeResults,e.commitTime),i=Wi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>j2(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{}class BM extends FM{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Gp(n,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(se.UNKNOWN,a.toString())}))}Ho(e,n,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Gp(n,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(se.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class GM{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Oo(this)&&(pe(Mo,"Restarting streams for network reachability change."),await(async function(m){const h=Ne(m);h.Ea.add(4),await Wu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Hf(h)})(this))}))})),this.Ra=new HM(i,o)}}async function Hf(t){if(Oo(t))for(const e of t.da)await e(!0)}async function Wu(t){for(const e of t.da)await e(!1)}function fb(t,e){const n=Ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zg(n)?Gg(n):nl(n).O_()&&Hg(n,e))}function Bg(t,e){const n=Ne(t),i=nl(n);n.Ia.delete(e),i.O_()&&hb(n,e),n.Ia.size===0&&(i.O_()?i.L_():Oo(n)&&n.Ra.set("Unknown"))}function Hg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Y_(e)}function hb(t,e){t.Va.Ue(e),nl(t).Z_(e)}function Gg(t){t.Va=new L2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Ra.ua()}function zg(t){return Oo(t)&&!nl(t).x_()&&t.Ia.size>0}function Oo(t){return Ne(t).Ea.size===0}function mb(t){t.Va=void 0}async function zM(t){t.Ra.set("Online")}async function jM(t){t.Ia.forEach(((e,n)=>{Hg(t,e)}))}async function YM(t,e){mb(t),zg(t)?(t.Ra.ha(e),Gg(t)):t.Ra.set("Unknown")}async function KM(t,e,n){if(t.Ra.set("Online"),e instanceof WA&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(t,e)}catch(i){pe(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await pf(t,i)}else if(e instanceof Yd?t.Va.Ze(e):e instanceof XA?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const i=await ub(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const f=a.Va.Tt(u);return f.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,h)=>{const v=a.Ia.get(m);if(!v)return;a.Ia.set(m,v.withResumeToken(an.EMPTY_BYTE_STRING,v.snapshotVersion)),hb(a,m);const E=new Sr(v.target,m,h,v.sequenceNumber);Hg(a,E)})),a.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(i){pe(Mo,"Failed to raise snapshot:",i),await pf(t,i)}}async function pf(t,e,n){if(!el(e))throw e;t.Ea.add(1),await Wu(t),t.Ra.set("Offline"),n||(n=()=>ub(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{pe(Mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hf(t)}))}function pb(t,e){return e().catch((n=>pf(t,n,e)))}async function Gf(t){const e=Ne(t),n=Pr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cg;for(;$M(e);)try{const o=await NM(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,JM(e,o)}catch(o){await pf(e,o)}gb(e)&&yb(e)}function $M(t){return Oo(t)&&t.Ta.length<10}function JM(t,e){t.Ta.push(e);const n=Pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function gb(t){return Oo(t)&&!Pr(t).x_()&&t.Ta.length>0}function yb(t){Pr(t).start()}async function QM(t){Pr(t).ra()}async function XM(t){const e=Pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function WM(t,e,n){const i=t.Ta.shift(),o=Pg.from(i,e,n);await pb(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await Gf(t)}async function ZM(t,e){e&&Pr(t).X_&&await(async function(i,o){if((function(u){return P2(u)&&u!==se.ABORTED})(o.code)){const a=i.Ta.shift();Pr(i).B_(),await pb(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Gf(i)}})(t,e),gb(t)&&yb(t)}async function vE(t,e){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),pe(Mo,"RemoteStore received new credentials");const i=Oo(n);n.Ea.add(3),await Wu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hf(n)}async function eD(t,e){const n=Ne(t);e?(n.Ea.delete(2),await Hf(n)):e||(n.Ea.add(2),await Wu(n),n.Ra.set("Unknown"))}function nl(t){return t.ma||(t.ma=(function(n,i,o){const a=Ne(n);return a.sa(),new OM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Xo:zM.bind(null,t),t_:jM.bind(null,t),r_:YM.bind(null,t),H_:KM.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),zg(t)?Gg(t):t.Ra.set("Unknown")):(await t.ma.stop(),mb(t))}))),t.ma}function Pr(t){return t.fa||(t.fa=(function(n,i,o){const a=Ne(n);return a.sa(),new qM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:QM.bind(null,t),r_:ZM.bind(null,t),ta:XM.bind(null,t),na:WM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Gf(t)):(await t.fa.stop(),t.Ta.length>0&&(pe(Mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,f=new jg(e,n,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(t,e){if(Rs("AsyncQueue",`${e}: ${t}`),el(t))return new he(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=Tu(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new qa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.ga=new vt(Ee.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Qa{constructor(e,n,i,o,a,u,f,m,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach((f=>{u.push({type:0,doc:f})})),new Qa(e,n,qa.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nD{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ne(n),a=o.queries;o.queries=EE(),a.forEach(((u,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new he(se.ABORTED,"Firestore shutting down"))}}function EE(){return new Lo((t=>OA(t)),Vf)}async function Kg(t,e){const n=Ne(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new tD,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(o,!0);break;case 1:a.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const f=Yg(u,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(f)}n.queries.set(o,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Jg(n)}async function $g(t,e){const n=Ne(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function iD(t,e){const n=Ne(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&Jg(n)}function sD(t,e,n){const i=Ne(t),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(n);i.queries.delete(e)}function Jg(t){t.Ca.forEach((e=>{e.next()}))}var $p,xE;(xE=$p||($p={})).Ma="default",xE.Cache="cache";class Qg{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class vb{constructor(e){this.key=e}}class rD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=qA(e),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new TE,o=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const x=o.get(v),w=Lf(this.query,E)?E:null,U=!!x&&this.mutatedKeys.has(x.key),q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;x&&w?x.data.isEqual(w.data)?U!==q&&(i.track({type:3,doc:w}),V=!0):this.su(x,w)||(i.track({type:2,doc:w}),V=!0,(m&&this.eu(w,m)>0||h&&this.eu(w,h)<0)&&(f=!0)):!x&&w?(i.track({type:0,doc:w}),V=!0):x&&!w&&(i.track({type:1,doc:x}),V=!0,(m||h)&&(f=!0)),V&&(w?(u=u.add(w),a=q?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:f,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(w,U){const q=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:V})}};return q(w)-q(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const f=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,h=m!==this.Za;return this.Za=m,u.length!==0||h?{snapshot:new Qa(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new vb(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new _b(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xg="SyncEngine";class oD{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class aD{constructor(e){this.key=e,this.hu=!1}}class lD{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Lo((f=>OA(f)),Vf),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ee.comparator),this.Au=new Map,this.Ru=new Lg,this.Vu={},this.mu=new Map,this.fu=Ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uD(t,e,n=!0){const i=bb(t);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await Tb(i,e,n,!0),o}async function cD(t,e){const n=bb(t);await Tb(n,e,!0,!1)}async function Tb(t,e,n,i){const o=await RM(t.localStore,Xi(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let f;return i&&(f=await dD(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&fb(t.remoteStore,o),f}async function dD(t,e,n,i,o){t.pu=(E,x,w)=>(async function(q,V,Q,ne){let K=V.view.ru(Q);K.Cs&&(K=await mE(q.localStore,V.query,!1).then((({documents:M})=>V.view.ru(M,K))));const J=ne&&ne.targetChanges.get(V.targetId),ee=ne&&ne.targetMismatches.get(V.targetId)!=null,le=V.view.applyChanges(K,q.isPrimaryClient,J,ee);return AE(q,V.targetId,le.au),le.snapshot})(t,E,x,w);const a=await mE(t.localStore,e,!0),u=new rD(e,a.Qs),f=u.ru(a.documents),m=Xu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),h=u.applyChanges(f,t.isPrimaryClient,m);AE(t,n,h.au);const v=new oD(e,n,u);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function fD(t,e,n){const i=Ne(t),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Vf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Yp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Bg(i.remoteStore,o.targetId),Jp(i,o.targetId)})).catch(Za)):(Jp(i,o.targetId),await Yp(i.localStore,o.targetId,!0))}async function hD(t,e){const n=Ne(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Bg(n.remoteStore,i.targetId))}async function mD(t,e,n){const i=ED(t);try{const o=await(function(u,f){const m=Ne(u),h=pt.now(),v=f.reduce(((w,U)=>w.add(U.key)),Be());let E,x;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let U=ks(),q=Be();return m.Ns.getEntries(w,v).next((V=>{U=V,U.forEach(((Q,ne)=>{ne.isValidDocument()||(q=q.add(Q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,U))).next((V=>{E=V;const Q=[];for(const ne of f){const K=N2(ne,E.get(ne.key).overlayedDocument);K!=null&&Q.push(new Fr(ne.key,K,RA(K.value.mapValue),ii.exists(!0)))}return m.mutationQueue.addMutationBatch(w,h,Q,f)})).next((V=>{x=V;const Q=V.applyToLocalDocumentSet(E,q);return m.documentOverlayCache.saveOverlays(w,V.batchId,Q)}))})).then((()=>({batchId:x.batchId,changes:BA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,m){let h=u.Vu[u.currentUser.toKey()];h||(h=new vt(Fe)),h=h.insert(f,m),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,n),await Zu(i,o.changes),await Gf(i.remoteStore)}catch(o){const a=Yg(o,"Failed to persist write");n.reject(a)}}async function Eb(t,e){const n=Ne(t);try{const i=await CM(n.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=n.Au.get(a);u&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ze(u.hu,14607):o.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await Zu(n,i,e)}catch(i){await Za(i)}}function SE(t,e,n){const i=Ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const m=Ne(u);m.onlineState=f;let h=!1;m.queries.forEach(((v,E)=>{for(const x of E.Sa)x.va(f)&&(h=!0)})),h&&Jg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pD(t,e,n){const i=Ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new vt(Ee.comparator);u=u.insert(a,dn.newNoDocument(a,Ce.min()));const f=Be().add(a),m=new Ff(Ce.min(),new Map,new vt(Fe),u,f);await Eb(i,m),i.du=i.du.remove(a),i.Au.delete(e),Wg(i)}else await Yp(i.localStore,e,!1).then((()=>Jp(i,e,n))).catch(Za)}async function gD(t,e){const n=Ne(t),i=e.batch.batchId;try{const o=await wM(n.localStore,e);Sb(n,i,null),xb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zu(n,o)}catch(o){await Za(o)}}async function yD(t,e,n){const i=Ne(t);try{const o=await(function(u,f){const m=Ne(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return m.mutationQueue.lookupMutationBatch(h,f).next((E=>(Ze(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(h,E)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>m.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);Sb(i,e,n),xb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zu(i,o)}catch(o){await Za(o)}}function xb(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Sb(t,e,n){const i=Ne(t);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||Ab(t,i)}))}function Ab(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wg(t))}function AE(t,e,n){for(const i of n)i instanceof _b?(t.Ru.addReference(i.key,e),_D(t,i)):i instanceof vb?(pe(Xg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||Ab(t,i.key)):be(19791,{wu:i})}function _D(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(pe(Xg,"New document in limbo: "+n),t.Eu.add(i),Wg(t))}function Wg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ee(ut.fromString(e)),i=t.fu.next();t.Au.set(i,new aD(n)),t.du=t.du.insert(n,i),fb(t.remoteStore,new Sr(Xi(Uf(n.path)),i,"TargetPurposeLimboResolution",Mf.ce))}}async function Zu(t,e,n){const i=Ne(t),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,n).then((h=>{var v;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(v=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(h){o.push(h);const E=qg.As(m.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,h){const v=Ne(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ae.forEach(h,(x=>ae.forEach(x.Es,(w=>v.persistence.referenceDelegate.addReference(E,x.targetId,w))).next((()=>ae.forEach(x.ds,(w=>v.persistence.referenceDelegate.removeReference(E,x.targetId,w)))))))))}catch(E){if(!el(E))throw E;pe(Fg,"Failed to update sequence numbers: "+E)}for(const E of h){const x=E.targetId;if(!E.fromCache){const w=v.Ms.get(x),U=w.snapshotVersion,q=w.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(x,q)}}})(i.localStore,a))}async function vD(t,e){const n=Ne(t);if(!n.currentUser.isEqual(e)){pe(Xg,"User change. New user:",e.toKey());const i=await lb(n.localStore,e);n.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new he(se.CANCELLED,u))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zu(n,i.Ls)}}function TD(t,e){const n=Ne(t),i=n.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const a=n.Iu.get(e);if(!a)return o;for(const u of a){const f=n.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function bb(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Eb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pD.bind(null,e),e.Pu.H_=iD.bind(null,e.eventManager),e.Pu.yu=sD.bind(null,e.eventManager),e}function ED(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yD.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bM(this.persistence,new xM,e.initialUser,this.serializer)}Cu(e){return new ab(Og.mi,this.serializer)}Du(e){return new MM}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class xD extends gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof mf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aM(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new ab((i=>mf.mi(i,n)),this.serializer)}}class Qp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vD.bind(null,this.syncEngine),await eD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nD})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),i=(function(a){return new LM(a)})(e.databaseInfo);return(function(a,u,f,m){return new BM(a,u,f,m)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,a,u,f){return new GM(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>SE(this.syncEngine,n,0)),(function(){return yE.v()?new yE:new DM})())}createSyncEngine(e,n){return(function(o,a,u,f,m,h,v){const E=new lD(o,a,u,f,m,h);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const a=Ne(o);pe(Mo,"RemoteStore shutting down."),a.Ea.add(5),await Wu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qp.provider={build:()=>new Qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class SD{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(Ur,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Ur,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Yg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xp(t,e){t.asyncQueue.verifyOperationInProgress(),pe(Ur,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async o=>{i.isEqual(o)||(await lb(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function bE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AD(t);pe(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>vE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,o)=>vE(e.remoteStore,o))),t._onlineComponents=e}async function AD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(Ur,"Using user provided OfflineComponentProvider");try{await xp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await xp(t,new gf)}}else pe(Ur,"Using default OfflineComponentProvider"),await xp(t,new xD(void 0));return t._offlineComponents}async function wb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(Ur,"Using user provided OnlineComponentProvider"),await bE(t,t._uninitializedComponentsProvider._online)):(pe(Ur,"Using default OnlineComponentProvider"),await bE(t,new Qp))),t._onlineComponents}function bD(t){return wb(t).then((e=>e.syncEngine))}async function yf(t){const e=await wb(t),n=e.eventManager;return n.onListen=uD.bind(null,e.syncEngine),n.onUnlisten=fD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hD.bind(null,e.syncEngine),n}function wD(t,e,n={}){const i=new ws;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,m,h){const v=new Zg({next:x=>{v.Nu(),u.enqueueAndForget((()=>$g(a,E)));const w=x.docs.has(f);!w&&x.fromCache?h.reject(new he(se.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&m&&m.source==="server"?h.reject(new he(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),E=new Qg(Uf(f.path),v,{includeMetadataChanges:!0,qa:!0});return Kg(a,E)})(await yf(t),t.asyncQueue,e,n,i))),i.promise}function CD(t,e,n={}){const i=new ws;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,m,h){const v=new Zg({next:x=>{v.Nu(),u.enqueueAndForget((()=>$g(a,E))),x.fromCache&&m.source==="server"?h.reject(new he(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),E=new Qg(f,v,{includeMetadataChanges:!0,qa:!0});return Kg(a,E)})(await yf(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",CE=!0;class IE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=CE}else this.host=e.host,this.ssl=e.ssl??CE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ob;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rM)throw new he(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Mk;switch(i.type){case"firstParty":return new Vk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=wE.get(n);i&&(pe("ComponentProvider","Removing Datastore"),wE.delete(n),i.terminate())})(this),Promise.resolve()}}function ID(t,e,n,i={}){var h;t=Cn(t,zf);const o=Lr(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;o&&(dg(`https://${f}`),fg("Firestore",!0)),a.host!==Ib&&a.host!==f&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:o,emulatorOptions:i};if(!wo(m,u)&&(t._setSettings(m),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=cn.MOCK_USER;else{v=SS(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new he(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new cn(x)}t._authCredentials=new Dk(new _A(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class xt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ju(n,xt._jsonSchema))return new xt(e,i||null,new Ee(ut.fromString(n.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Bt("string",xt._jsonSchemaVersion),referencePath:Bt("string")};class Ir extends Vs{constructor(e,n,i){super(e,n,Uf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Ee(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function at(t,e,...n){if(t=ct(t),vA("collection","path",e),t instanceof zf){const i=ut.fromString(e,...n);return BT(i),new Ir(t,null,i)}{if(!(t instanceof xt||t instanceof Ir))throw new he(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return BT(i),new Ir(t.firestore,null,i)}}function mt(t,e,...n){if(t=ct(t),arguments.length===1&&(e=wg.newId()),vA("doc","path",e),t instanceof zf){const i=ut.fromString(e,...n);return FT(i),new xt(t,null,new Ee(i))}{if(!(t instanceof xt||t instanceof Ir))throw new he(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return FT(i),new xt(t.firestore,t instanceof Ir?t.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="AsyncQueue";class RE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cb(this,"async_queue_retry"),this._c=()=>{const i=Ep();i&&pe(NE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Ep();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ep();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ws;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;pe(NE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",kE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=jg.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:kE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function kE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ms extends zf{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new RE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RE(e),this._firestoreClient=void 0,await e}}}function ND(t,e){const n=typeof t=="object"?t:gg(),i=typeof t=="string"?t:af,o=Cf(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=TS("firestore");a&&ID(o,...a)}return o}function jf(t){if(t._terminated)throw new he(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RD(t),t._firestoreClient}function RD(t){var i,o,a;const e=t._freezeSettings(),n=(function(f,m,h,v){return new e2(f,m,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Cb(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new SD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(an.fromBase64String(e))}catch(n){throw new he(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ti(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,ti._jsonSchema))return ti.fromBase64String(e.bytes)}}ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:Bt("string",ti._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zi._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,Zi._jsonSchema))return new Zi(e.latitude,e.longitude)}}Zi._jsonSchemaVersion="firestore/geoPoint/1.0",Zi._jsonSchema={type:Bt("string",Zi._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new es(e.vectorValues);throw new he(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Bt("string",es._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class MD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qu(e,this.data,n,this.fieldTransforms)}}class Nb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:t})}}class ty{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ty({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _f(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&kD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class DD{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bf(e)}Cc(e,n,i,o=!1){return new ty({Ac:e,methodName:n,Dc:i,path:rn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kf(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new DD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kb(t,e,n,i,o,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,o);ny("Data must be an object, but it was:",u,i);const f=Mb(i,u);let m,h;if(a.merge)m=new Fn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const x=Xp(e,E,n);if(!u.contains(x))throw new he(se.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Pb(v,x)||v.push(x)}m=new Fn(v),h=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,h=u.fieldTransforms;return new MD(new wn(f),m,h)}class $f extends ey{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function PD(t,e,n,i){const o=t.Cc(1,e,n);ny("Data must be an object, but it was:",o,i);const a=[],u=wn.empty();qr(i,((m,h)=>{const v=iy(e,m,n);h=ct(h);const E=o.yc(v);if(h instanceof $f)a.push(v);else{const x=ec(h,E);x!=null&&(a.push(v),u.set(v,x))}}));const f=new Fn(a);return new Nb(u,f,o.fieldTransforms)}function UD(t,e,n,i,o,a){const u=t.Cc(1,e,n),f=[Xp(e,i,n)],m=[o];if(a.length%2!=0)throw new he(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)f.push(Xp(e,a[x])),m.push(a[x+1]);const h=[],v=wn.empty();for(let x=f.length-1;x>=0;--x)if(!Pb(h,f[x])){const w=f[x];let U=m[x];U=ct(U);const q=u.yc(w);if(U instanceof $f)h.push(w);else{const V=ec(U,q);V!=null&&(h.push(w),v.set(w,V))}}const E=new Fn(h);return new Nb(v,E,u.fieldTransforms)}function VD(t,e,n,i=!1){return ec(n,t.Cc(i?4:3,e))}function ec(t,e){if(Db(t=ct(t)))return ny("Unsupported field value:",e,t),Mb(t,e);if(t instanceof ey)return(function(i,o){if(!Rb(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let m=ec(f,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,o){if((i=ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return S2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=pt.fromDate(i);return{timestampValue:hf(o.serializer,a)}}if(i instanceof pt){const a=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hf(o.serializer,a)}}if(i instanceof Zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ti)return{bytesValue:ZA(o.serializer,i._byteString)};if(i instanceof xt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof es)return(function(u,f){return{mapValue:{fields:{[IA]:{stringValue:NA},[lf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return Mg(f.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${kf(i)}`)})(t,e)}function Mb(t,e){const n={};return xA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,((i,o)=>{const a=ec(o,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Db(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Zi||t instanceof ti||t instanceof xt||t instanceof ey||t instanceof es)}function ny(t,e,n){if(!Db(n)||!TA(n)){const i=kf(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Xp(t,e,n){if((e=ct(e))instanceof Yf)return e._internalPath;if(typeof e=="string")return iy(t,e);throw _f("Field path arguments must be of type string or ",t,!1,void 0,n)}const LD=new RegExp("[~\\*/\\[\\]]");function iy(t,e,n){if(e.search(LD)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yf(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _f(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new he(se.INVALID_ARGUMENT,f+t+m)}function Pb(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OD extends Ub{data(){return super.data()}}function Jf(t,e){return typeof e=="string"?iy(t,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class ry extends sy{}function Ht(t,e,...n){let i=[];e instanceof sy&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((m=>m instanceof oy)).length,f=a.filter((m=>m instanceof Qf)).length;if(u>1||u>0&&f>0)throw new he(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)t=o._apply(t);return t}class Qf extends ry{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qf(e,n,i)}_apply(e){const n=this._parse(e);return Ob(e._query,n),new Vs(e.firestore,e.converter,Bp(e._query,n))}_parse(e){const n=Kf(e.firestore);return(function(a,u,f,m,h,v,E){let x;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){PE(E,v);const U=[];for(const q of E)U.push(DE(m,a,q));x={arrayValue:{values:U}}}else x=DE(m,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||PE(E,v),x=VD(f,u,E,v==="in"||v==="not-in");return Ft.create(h,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function In(t,e,n){const i=e,o=Jf("where",t);return Qf._create(o,i,n)}class oy extends sy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new oy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,a){let u=o;const f=a.getFlattenedFilters();for(const m of f)Ob(u,m),u=Bp(u,m)})(e._query,n),new Vs(e.firestore,e.converter,Bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ay extends ry{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ay(e,n)}_apply(e){const n=(function(o,a,u){if(o.startAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(a,u)})(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new tl(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Vr(t,e="asc"){const n=e,i=Jf("orderBy",t);return ay._create(i,n)}class ly extends ry{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new ly(e,n,i)}_apply(e){return new Vs(e.firestore,e.converter,cf(e._query,this._limit,this._limitType))}}function Lb(t){return Gk("limit",t),ly._create("limit",t,"F")}function DE(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new he(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LA(e)&&n.indexOf("/")!==-1)throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ut.fromString(n));if(!Ee.isDocumentKey(i))throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JT(t,new Ee(i))}if(n instanceof xt)return JT(t,n._key);throw new he(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(n)}.`)}function PE(t,e){if(!Array.isArray(t)||t.length===0)throw new he(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ob(t,e){const n=(function(o,a){for(const u of o)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qD{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qr(e,((o,a)=>{i[o]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,o,a;const n=(a=(o=(i=e.fields)==null?void 0:i[lf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Nt(u.doubleValue)));return new es(n)}convertGeoPoint(e){return new Zi(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Pf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const n=kr(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ut.fromString(e);Ze(rb(i),9688,{name:e});const o=new Lu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(n)||Rs(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class xu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends Ub{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Jf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=So._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:Bt("string",So._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Kd extends So{data(e={}){return super.data(e)}}class Ao{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new xu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Kd(this._firestore,this._userDataWriter,i.key,i,new xu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const m=new Kd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new Kd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new xu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:FD(f.type),doc:m,oldIndex:h,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t){t=Cn(t,xt);const e=Cn(t.firestore,Ms);return wD(jf(e),t._key).then((n=>Fb(e,t,n)))}Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:Bt("string",Ao._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class uy extends qD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Hu(t){t=Cn(t,Vs);const e=Cn(t.firestore,Ms),n=jf(e),i=new uy(e);return Vb(t._query),CD(n,t._query).then((o=>new Ao(e,i,t,o)))}function Fa(t,e,n){t=Cn(t,xt);const i=Cn(t.firestore,Ms),o=qb(t.converter,e,n);return Xf(i,[kb(Kf(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,ii.none())])}function _i(t,e,n,...i){t=Cn(t,xt);const o=Cn(t.firestore,Ms),a=Kf(o);let u;return u=typeof(e=ct(e))=="string"||e instanceof Yf?UD(a,"updateDoc",t._key,e,n,i):PD(a,"updateDoc",t._key,e),Xf(o,[u.toMutation(t._key,ii.exists(!0))])}function cy(t){return Xf(Cn(t.firestore,Ms),[new Dg(t._key,ii.none())])}function Br(t,e){const n=Cn(t.firestore,Ms),i=mt(t),o=qb(t.converter,e);return Xf(n,[kb(Kf(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,ii.exists(!1))]).then((()=>i))}function on(t,...e){var m,h,v;t=ct(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||ME(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ME(e[i])){const E=e[i];e[i]=(m=E.next)==null?void 0:m.bind(E),e[i+1]=(h=E.error)==null?void 0:h.bind(E),e[i+2]=(v=E.complete)==null?void 0:v.bind(E)}let a,u,f;if(t instanceof xt)u=Cn(t.firestore,Ms),f=Uf(t._key.path),a={next:E=>{e[i]&&e[i](Fb(u,t,E))},error:e[i+1],complete:e[i+2]};else{const E=Cn(t,Vs);u=Cn(E.firestore,Ms),f=E._query;const x=new uy(u);a={next:w=>{e[i]&&e[i](new Ao(u,x,E,w))},error:e[i+1],complete:e[i+2]},Vb(t._query)}return(function(x,w,U,q){const V=new Zg(q),Q=new Qg(w,V,U);return x.asyncQueue.enqueueAndForget((async()=>Kg(await yf(x),Q))),()=>{V.Nu(),x.asyncQueue.enqueueAndForget((async()=>$g(await yf(x),Q)))}})(jf(u),f,o,a)}function Xf(t,e){return(function(i,o){const a=new ws;return i.asyncQueue.enqueueAndForget((async()=>mD(await bD(i),o,a))),a.promise})(jf(t),e)}function Fb(t,e,n){const i=n.docs.get(e._key),o=new uy(t);return new So(t,o,e._key,i,new xu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Wa=o})(Vo),Co(new Nr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Ms(new Pk(i.getProvider("auth-internal")),new Lk(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(h.options.projectId,v)})(u,o),u);return a={useFetchStreams:n,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),$i(VT,LT,e),$i(VT,LT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="firebasestorage.googleapis.com",Hb="storageBucket",BD=120*1e3,HD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At extends ns{constructor(e,n,i=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function Sp(t){return"storage/"+t}function dy(){const t="An unknown error occurred, please check the error payload for server response.";return new At(St.UNKNOWN,t)}function GD(t){return new At(St.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zD(t){return new At(St.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new At(St.UNAUTHENTICATED,t)}function YD(){return new At(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KD(t){return new At(St.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $D(){return new At(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JD(){return new At(St.CANCELED,"User canceled the upload/download.")}function QD(t){return new At(St.INVALID_URL,"Invalid URL '"+t+"'.")}function XD(t){return new At(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WD(){return new At(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hb+"' property when initializing the app?")}function ZD(){return new At(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eP(){return new At(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tP(t){return new At(St.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wp(t){return new At(St.INVALID_ARGUMENT,t)}function Gb(){return new At(St.APP_DELETED,"The Firebase app was deleted.")}function nP(t){return new At(St.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ru(t,e){return new At(St.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function pu(t){throw new At(St.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(i.path==="")return i;throw XD(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+o+u,"i"),m={bucket:1,path:3};function h(J){J.path_=decodeURIComponent(J.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${v}/b/${o}/o${x}`,"i"),U={bucket:1,path:3},q=n===Bb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",Q=new RegExp(`^https?://${q}/${o}/${V}`,"i"),K=[{regex:f,indices:m,postModify:a},{regex:w,indices:U,postModify:h},{regex:Q,indices:{bucket:1,path:2},postModify:h}];for(let J=0;J<K.length;J++){const ee=K[J],le=ee.regex.exec(e);if(le){const M=le[ee.indices.bucket];let R=le[ee.indices.path];R||(R=""),i=new Bn(M,R),ee.postModify(i);break}}if(i==null)throw QD(e);return i}}class iP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t,e,n){let i=1,o=null,a=null,u=!1,f=0;function m(){return f===2}let h=!1;function v(...V){h||(h=!0,e.apply(null,V))}function E(V){o=setTimeout(()=>{o=null,t(w,m())},V)}function x(){a&&clearTimeout(a)}function w(V,...Q){if(h){x();return}if(V){x(),v.call(null,V,...Q);return}if(m()||u){x(),v.call(null,V,...Q);return}i<64&&(i*=2);let K;f===1?(f=2,K=0):K=(i+Math.random())*1e3,E(K)}let U=!1;function q(V){U||(U=!0,x(),!h&&(o!==null?(V||(f=2),clearTimeout(o),E(0)):V||(f=1)))}return E(0),a=setTimeout(()=>{u=!0,q(!0)},n),q}function rP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){return t!==void 0}function aP(t){return typeof t=="object"&&!Array.isArray(t)}function fy(t){return typeof t=="string"||t instanceof String}function UE(t){return hy()&&t instanceof Blob}function hy(){return typeof Blob<"u"}function VE(t,e,n,i){if(i<e)throw Wp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Wp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function zb(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const o=e(i)+"="+e(t[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var bo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(bo||(bo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n,i,o,a,u,f,m,h,v,E,x=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=h,this.progressCallback_=v,this.connectionFactory_=E,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,q)=>{this.resolve_=U,this.reject_=q,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Vd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=f=>{const m=f.loaded,h=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const f=a.getErrorCode()===bo.NO_ERROR,m=a.getStatus();if(!f||lP(m,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===bo.ABORT;i(!1,new Vd(!1,null,v));return}const h=this.successCodes_.indexOf(m)!==-1;i(!0,new Vd(h,a))})},n=(i,o)=>{const a=this.resolve_,u=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());oP(m)?a(m):a()}catch(m){u(m)}else if(f!==null){const m=dy();m.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,m)):u(m)}else if(o.canceled){const m=this.appDelete_?Gb():JD();u(m)}else{const m=$D();u(m)}};this.canceled_?n(!1,new Vd(!1,null,!0)):this.backoffId_=sP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function cP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mP(t,e,n,i,o,a,u=!0,f=!1){const m=zb(t.urlParams),h=t.url+m,v=Object.assign({},t.headers);return fP(v,e),cP(v,n),dP(v,a),hP(v,i),new uP(h,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,u,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gP(...t){const e=pP();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(hy())return new Blob(t);throw new At(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){if(typeof atob>"u")throw tP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ap{constructor(e,n){this.data=e,this.contentType=n||null}}function vP(t,e){switch(t){case Ki.RAW:return new Ap(jb(e));case Ki.BASE64:case Ki.BASE64URL:return new Ap(Yb(t,e));case Ki.DATA_URL:return new Ap(EP(e),xP(e))}throw dy()}function jb(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function TP(t){let e;try{e=decodeURIComponent(t)}catch{throw Ru(Ki.DATA_URL,"Malformed data URL.")}return jb(e)}function Yb(t,e){switch(t){case Ki.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw Ru(t,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ki.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw Ru(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_P(e)}catch(o){throw o.message.includes("polyfill")?o:Ru(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class Kb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ru(Ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=SP(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function EP(t){const e=new Kb(t);return e.base64?Yb(Ki.BASE64,e.rest):TP(e.rest)}function xP(t){return new Kb(t).contentType}function SP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){let i=0,o="";UE(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(UE(this.data_)){const i=this.data_,o=yP(i,e,n);return o===null?null:new xr(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new xr(i,!0)}}static getBlob(...e){if(hy()){const n=e.map(i=>i instanceof xr?i.data_:i);return new xr(gP.apply(null,n))}else{const n=e.map(u=>fy(u)?vP(Ki.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let f=0;f<u.length;f++)o[a++]=u[f]}),new xr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){let e;try{e=JSON.parse(t)}catch{return null}return aP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bP(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Jb(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t,e){return e}class yn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||wP}}let Ld=null;function CP(t){return!fy(t)||t.length<2?t:Jb(t)}function Qb(){if(Ld)return Ld;const t=[];t.push(new yn("bucket")),t.push(new yn("generation")),t.push(new yn("metageneration")),t.push(new yn("name","fullPath",!0));function e(a,u){return CP(u)}const n=new yn("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const o=new yn("size");return o.xform=i,t.push(o),t.push(new yn("timeCreated")),t.push(new yn("updated")),t.push(new yn("md5Hash",null,!0)),t.push(new yn("cacheControl",null,!0)),t.push(new yn("contentDisposition",null,!0)),t.push(new yn("contentEncoding",null,!0)),t.push(new yn("contentLanguage",null,!0)),t.push(new yn("contentType",null,!0)),t.push(new yn("metadata","customMetadata",!0)),Ld=t,Ld}function IP(t,e){function n(){const i=t.bucket,o=t.fullPath,a=new Bn(i,o);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function NP(t,e,n){const i={};i.type="file";const o=n.length;for(let a=0;a<o;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return IP(i,t),i}function Xb(t,e,n){const i=$b(e);return i===null?null:NP(t,i,n)}function RP(t,e,n,i){const o=$b(e);if(o===null||!fy(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(h=>{const v=t.bucket,E=t.fullPath,x="/b/"+u(v)+"/o/"+u(E),w=Wf(x,n,i),U=zb({alt:"media",token:h});return w+U})[0]}function kP(t,e){const n={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class my{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){if(!t)throw dy()}function MP(t,e){function n(i,o){const a=Xb(t,o,e);return Wb(a!==null),a}return n}function DP(t,e){function n(i,o){const a=Xb(t,o,e);return Wb(a!==null),RP(a,o,t.host,t._protocol)}return n}function Zb(t){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=YD():o=jD():n.getStatus()===402?o=zD(t.bucket):n.getStatus()===403?o=KD(t.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function ew(t){const e=Zb(t);function n(i,o){let a=e(i,o);return i.getStatus()===404&&(a=GD(t.path)),a.serverResponse=o.serverResponse,a}return n}function PP(t,e,n){const i=e.fullServerUrl(),o=Wf(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,f=new my(o,a,DP(t,n),u);return f.errorHandler=ew(e),f}function UP(t,e){const n=e.fullServerUrl(),i=Wf(n,t.host,t._protocol),o="DELETE",a=t.maxOperationRetryTime;function u(m,h){}const f=new my(i,o,u,a);return f.successCodes=[200,204],f.errorHandler=ew(e),f}function VP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LP(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=VP(null,e)),i}function OP(t,e,n,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function f(){let K="";for(let J=0;J<2;J++)K=K+Math.random().toString().slice(2);return K}const m=f();u["Content-Type"]="multipart/related; boundary="+m;const h=LP(e,i,o),v=kP(h,n),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+m+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+m+"--",w=xr.getBlob(E,i,x);if(w===null)throw ZD();const U={name:h.fullPath},q=Wf(a,t.host,t._protocol),V="POST",Q=t.maxUploadRetryTime,ne=new my(q,V,MP(t,n),Q);return ne.urlParams=U,ne.headers=u,ne.body=w.uploadData(),ne.errorHandler=Zb(e),ne}class qP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,a){if(this.sent_)throw pu("cannot .send() more than once");if(Lr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class FP extends qP{initXhr(){this.xhr_.responseType="text"}}function py(){return new FP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Do(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jb(this._location.path)}get storage(){return this._service}get parent(){const e=AP(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new Do(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nP(e)}}function BP(t,e,n){t._throwIfRoot("uploadBytes");const i=OP(t.storage,t._location,Qb(),new xr(e,!0),n);return t.storage.makeRequestWithTokens(i,py).then(o=>({metadata:o,ref:t}))}function HP(t){t._throwIfRoot("getDownloadURL");const e=PP(t.storage,t._location,Qb());return t.storage.makeRequestWithTokens(e,py).then(n=>{if(n===null)throw eP();return n})}function GP(t){t._throwIfRoot("deleteObject");const e=UP(t.storage,t._location);return t.storage.makeRequestWithTokens(e,py)}function zP(t,e){const n=bP(t._location.path,e),i=new Bn(t._location.bucket,n);return new Do(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){return/^[A-Za-z]+:\/\//.test(t)}function YP(t,e){return new Do(t,e)}function tw(t,e){if(t instanceof gy){const n=t;if(n._bucket==null)throw WD();const i=new Do(n,n._bucket);return e!=null?tw(i,e):i}else return e!==void 0?zP(t,e):t}function KP(t,e){if(e&&jP(e)){if(t instanceof gy)return YP(t,e);throw Wp("To use ref(service, url), the first argument must be a Storage instance.")}else return tw(t,e)}function LE(t,e){const n=e==null?void 0:e[Hb];return n==null?null:Bn.makeFromBucketSpec(n,t)}function $P(t,e,n,i={}){t.host=`${e}:${n}`;const o=Lr(e);o&&(dg(`https://${t.host}/b`),fg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:SS(a,t.app.options.projectId))}class gy{constructor(e,n,i,o,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=Bb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BD,this._maxUploadRetryTime=HD,this._requests=new Set,o!=null?this._bucket=Bn.makeFromBucketSpec(o,this._host):this._bucket=LE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=LE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Do(this,e)}_makeRequest(e,n,i,o,a=!0){if(this._deleted)return new iP(Gb());{const u=mP(e,this._appId,i,o,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const OE="@firebase/storage",qE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="storage";function il(t,e,n){return t=ct(t),BP(t,e,n)}function sl(t){return t=ct(t),HP(t)}function JP(t){return t=ct(t),GP(t)}function Po(t,e){return t=ct(t),KP(t,e)}function QP(t=gg(),e){t=ct(t);const i=Cf(t,nw).getImmediate({identifier:e}),o=TS("storage");return o&&XP(i,...o),i}function XP(t,e,n,i={}){$P(t,e,n,i)}function WP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new gy(n,i,o,e,Vo)}function ZP(){Co(new Nr(nw,WP,"PUBLIC").setMultipleInstances(!0)),$i(OE,qE,""),$i(OE,qE,"esm2020")}ZP();const iw={apiKey:"AIzaSyBOBfBVahELD-oLdINEpOK1FBD68aGNTJw",authDomain:"ar-consultants-90ec8.firebaseapp.com",projectId:"ar-consultants-90ec8",storageBucket:"ar-consultants-90ec8.firebasestorage.app",messagingSenderId:"898226681234",appId:"1:898226681234:web:f5736c098ca29200d2fd4b",measurementId:"G-Q4X3RTD7X8"},yy=pg(iw),ni=cA(yy),xe=ND(yy),Uo=QP(yy);new xs;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eU,tU;function nU(){return{geminiUrl:eU,vertexUrl:tU}}function iU(t,e,n,i){var o,a;if(!(t!=null&&t.baseUrl)){const u=nU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ls{}function me(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(n))for(let h=0;h<m.length;h++){const v=m[h];p(v,e.slice(a+1),n[h])}else for(const h of m)p(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];p(m[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function sU(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),a=i.split("."),u=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&a.length>f)for(let m=f;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Zp(t,o,a,0,u)}}function Zp(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=t;if(u in f&&Array.isArray(f[u]))for(const m of f[u])Zp(m,e,n,i+1,o)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of f)m[h]=u[h];for(const[h,v]of Object.entries(m)){const E=[];for(const x of n.slice(i))x==="*"?E.push(h):E.push(x);p(u,E,v)}for(const h of f)delete u[h]}}else{const u=t;a in u&&Zp(u[a],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _y(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rU(t){const e={},n=d(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=d(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function oU(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],lU(u)),e}function aU(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response"]);return u!=null&&p(e,["response"],uU(u)),e}function lU(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>cU(u))),p(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function uU(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>dU(u))),p(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function cU(t){const e={},n=d(t,["video"]);return n!=null&&p(e,["video"],yU(n)),e}function dU(t){const e={},n=d(t,["_self"]);return n!=null&&p(e,["video"],_U(n)),e}function fU(t){const e={},n=d(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function hU(t){const e={},n=d(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function mU(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response"]);return u!=null&&p(e,["response"],pU(u)),e}function pU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&p(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function sw(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response"]);return u!=null&&p(e,["response"],gU(u)),e}function gU(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&p(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function yU(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],_y(i));const o=d(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function _U(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],_y(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(FE||(FE={}));var BE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(BE||(BE={}));var HE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(HE||(HE={}));var Ar;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ar||(Ar={}));var GE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GE||(GE={}));var zE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zE||(zE={}));var jE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(jE||(jE={}));var YE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(YE||(YE={}));var KE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(KE||(KE={}));var $E;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})($E||($E={}));var JE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(JE||(JE={}));var QE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(QE||(QE={}));var XE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(XE||(XE={}));var WE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(WE||(WE={}));var ZE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ZE||(ZE={}));var ex;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ex||(ex={}));var tx;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tx||(tx={}));var nx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(nx||(nx={}));var ix;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ix||(ix={}));var Tf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Tf||(Tf={}));var sx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sx||(sx={}));var rx;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rx||(rx={}));var ox;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ox||(ox={}));var eg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(eg||(eg={}));var ax;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ax||(ax={}));var lx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lx||(lx={}));var ux;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ux||(ux={}));var cx;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cx||(cx={}));var dx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dx||(dx={}));var fx;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fx||(fx={}));var hx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(hx||(hx={}));var mx;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(mx||(mx={}));var px;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(px||(px={}));var gx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gx||(gx={}));var yx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yx||(yx={}));var _x;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_x||(_x={}));var vx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vx||(vx={}));var Tx;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tx||(Tx={}));var Ex;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ex||(Ex={}));var xx;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(xx||(xx={}));var Sx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Sx||(Sx={}));var Ax;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ax||(Ax={}));var bx;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(bx||(bx={}));var wx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(wx||(wx={}));var Cx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Cx||(Cx={}));var Ix;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ix||(Ix={}));var Nx;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Nx||(Nx={}));var Rx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Rx||(Rx={}));var kx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kx||(kx={}));var Mx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mx||(Mx={}));var Dx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Dx||(Dx={}));var Px;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Px||(Px={}));var Ux;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ux||(Ux={}));var Vx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Vx||(Vx={}));var Ua;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ua||(Ua={}));class tg{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class gu{get text(){var e,n,i,o,a,u,f,m;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const x of(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[w,U]of Object.entries(x))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(U!==null||U!==void 0)&&E.push(w);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;v=!0,h+=x.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,n,i,o,a,u,f,m;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[x,w]of Object.entries(E))x!=="inlineData"&&(w!==null||w!==void 0)&&v.push(x);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,o,a,u,f,m;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,o,a,u,f,m,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,o,a,u,f,m,h;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Lx{}class Ox{}class vU{}class TU{}class EU{}class xU{}class qx{}class Fx{}class Bx{}class SU{}class Ef{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Ef;let o;const a=e;return n?o=aU(a):o=oU(a),Object.assign(i,o),i}}class Hx{}class Gx{}class zx{}class AU{}class bU{}class wU{}class vy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new vy,a=mU(e);return Object.assign(i,a),i}}class CU{}class IU{}class NU{}class jx{}class RU{get text(){var e,n,i;let o="",a=!1;const u=[];for(const f of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(f))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class kU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ty{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Ty,a=sw(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rw(t,e){const n=Je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ow(t){return Array.isArray(t)?t.map(e=>xf(e)):[xf(t)]}function xf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function aw(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lw(t){const e=xf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function uw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Yx(e)):[Yx(t)]}function ng(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Kx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $x(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function fn(t){if(t==null)throw new Error("ContentUnion is required");return ng(t)?t:{role:"user",parts:uw(t)}}function Ey(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=fn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=fn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>fn(n)):[fn(e)]}function si(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Kx(t)||$x(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fn(t)]}const e=[],n=[],i=ng(t[0]);for(const o of t){const a=ng(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Kx(o)||$x(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:uw(n)}),e}function MU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ar).includes(n[0].toUpperCase())?n[0].toUpperCase():Ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ar).includes(i.toUpperCase())?i.toUpperCase():Ar.TYPE_UNSPECIFIED})}}function Ba(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&MU(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ar).includes(f.toUpperCase())?f.toUpperCase():Ar.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Ba(f);else if(i.includes(u)){const m=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}m.push(Ba(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,v]of Object.entries(f))m[h]=Ba(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function xy(t){return Ba(t)}function Sy(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ay(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function rl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ba(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ba(e.response));return t}function ol(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function DU(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Os(t,e){if(typeof e!="string")throw new Error("name must be a string");return DU(t,e,"cachedContents")}function cw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Hr(t){return _y(t)}function PU(t){return t!=null&&typeof t=="object"&&"name"in t}function UU(t){return t!=null&&typeof t=="object"&&"video"in t}function VU(t){return t!=null&&typeof t=="object"&&"uri"in t}function dw(t){var e;let n;if(PU(t)&&(n=t.name),!(VU(t)&&(n=t.uri,n===void 0))&&!(UU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function fw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function hw(t){for(const e of["models","tunedModels","publisherModels"])if(LU(t,e))return t[e];return[]}function LU(t,e){return t!==null&&typeof t=="object"&&e in t}function OU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function qU(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=OU(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function mw(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function FU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function pw(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function al(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function gw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BU(t){const e={},n=d(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=d(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>EV(u))),p(e,["inlinedResponses"],a)}const o=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function HU(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=d(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=d(t,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function GU(t){const e={},n=d(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=d(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function $d(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=d(t,["metadata","state"]);o!=null&&p(e,["state"],gw(o));const a=d(t,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=d(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(t,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const m=d(t,["metadata","model"]);m!=null&&p(e,["model"],m);const h=d(t,["metadata","output"]);return h!=null&&p(e,["dest"],BU(pw(h))),e}function ig(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(t,["state"]);o!=null&&p(e,["state"],gw(o));const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(t,["startTime"]);f!=null&&p(e,["startTime"],f);const m=d(t,["endTime"]);m!=null&&p(e,["endTime"],m);const h=d(t,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=d(t,["model"]);v!=null&&p(e,["model"],v);const E=d(t,["inputConfig"]);E!=null&&p(e,["src"],zU(E));const x=d(t,["outputConfig"]);x!=null&&p(e,["dest"],HU(pw(x)));const w=d(t,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function zU(t){const e={},n=d(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=d(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=d(t,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function jU(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(n,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>TV(t,u))),p(n,["requests","requests"],a)}return n}function YU(t){const e={},n=d(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=d(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function KU(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function $U(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function JU(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function QU(t){const e={},n=d(t,["content"]);n!=null&&p(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],XU(i));const o=d(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=d(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&p(e,["index"],m);const h=d(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(t,["safetyRatings"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(w=>w)),p(e,["safetyRatings"],x)}const E=d(t,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function XU(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function yw(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>IV(a))),p(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&p(e,["role"],i),e}function WU(t,e){const n={},i=d(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZU(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(t,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],GU(FU(o))),n}function Jx(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["src"]);o!=null&&p(n,["batch","inputConfig"],jU(t,mw(t,o)));const a=d(e,["config"]);return a!=null&&WU(a,n),n}function eV(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["model"],Je(t,i));const o=d(e,["src"]);o!=null&&p(n,["inputConfig"],YU(mw(t,o)));const a=d(e,["config"]);return a!=null&&ZU(a,n),n}function tV(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function nV(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["src"]);o!=null&&p(n,["batch","inputConfig"],uV(t,o));const a=d(e,["config"]);return a!=null&&tV(a,n),n}function iV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function sV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function rV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&p(e,["name"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);return a!=null&&p(e,["error"],a),e}function oV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&p(e,["name"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);return a!=null&&p(e,["error"],a),e}function aV(t,e){const n={},i=d(e,["contents"]);if(i!=null){let a=Ey(t,i);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(p(n,["_self"],lV(o,n)),sU(n,{"requests[].*":"requests[].request.*"})),n}function lV(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uV(t,e){const n={},i=d(e,["fileName"]);i!=null&&p(n,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&p(n,["requests"],aV(t,o)),n}function cV(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dV(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const i=d(t,["args"]);i!=null&&p(e,["args"],i);const o=d(t,["name"]);if(o!=null&&p(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fV(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hV(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],yw(fn(o)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const x=d(e,["logprobs"]);x!=null&&p(i,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const U=d(e,["frequencyPenalty"]);U!=null&&p(i,["frequencyPenalty"],U);const q=d(e,["seed"]);q!=null&&p(i,["seed"],q);const V=d(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],xy(Q));const ne=d(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=d(e,["safetySettings"]);if(n!==void 0&&K!=null){let F=K;Array.isArray(F)&&(F=F.map(P=>NV(P))),p(n,["safetySettings"],F)}const J=d(e,["tools"]);if(n!==void 0&&J!=null){let F=ol(J);Array.isArray(F)&&(F=F.map(P=>kV(rl(P)))),p(n,["tools"],F)}const ee=d(e,["toolConfig"]);if(n!==void 0&&ee!=null&&p(n,["toolConfig"],RV(ee)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);n!==void 0&&le!=null&&p(n,["cachedContent"],Os(t,le));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const R=d(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const I=d(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],Sy(I)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const k=d(e,["imageConfig"]);return k!=null&&p(i,["imageConfig"],vV(k)),i}function mV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>QU(h))),p(e,["candidates"],m)}const o=d(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=d(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(t,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function pV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function gV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],al(t,i)),n}function yV(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function _V(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function vV(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function TV(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["request","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let f=si(o);Array.isArray(f)&&(f=f.map(m=>yw(m))),p(n,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&p(n,["metadata"],a);const u=d(e,["config"]);return u!=null&&p(n,["request","generationConfig"],hV(t,u,d(n,["request"],{}))),n}function EV(t){const e={},n=d(t,["response"]);n!=null&&p(e,["response"],mV(n));const i=d(t,["error"]);return i!=null&&p(e,["error"],i),e}function xV(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function SV(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=d(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),n}function AV(t){const e={},n=d(t,["config"]);return n!=null&&xV(n,e),e}function bV(t){const e={},n=d(t,["config"]);return n!=null&&SV(n,e),e}function wV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>$d(u))),p(e,["batchJobs"],a)}return e}function CV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ig(u))),p(e,["batchJobs"],a)}return e}function IV(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&p(e,["fileData"],cV(a));const u=d(t,["functionCall"]);u!=null&&p(e,["functionCall"],dV(u));const f=d(t,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&p(e,["inlineData"],KU(m));const h=d(t,["text"]);h!=null&&p(e,["text"],h);const v=d(t,["thought"]);v!=null&&p(e,["thought"],v);const E=d(t,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const x=d(t,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function NV(t){const e={},n=d(t,["category"]);if(n!=null&&p(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function RV(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],fV(n));const i=d(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function kV(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],yV(f));const m=d(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],_V(m));const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ds;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ds||(Ds={}));class qo{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MV extends Ls{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new qo(Ds.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Jx(this.apiClient,e),i=n._url,o=me("{model}:batchGenerateContent",i),f=n.batch.inputConfig.requests,m=f.requests,h=[];for(const v of m){const E=Object.assign({},v);if(E.systemInstruction){const x=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=x,E.request=w}h.push(E)}return f.requests=h,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=eV(this.apiClient,e);return f=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ig(v))}else{const h=Jx(this.apiClient,e);return f=me("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>$d(v))}}async createEmbeddingsInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nV(this.apiClient,e);return a=me("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>$d(m))}}async get(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=gV(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>ig(v))}else{const h=pV(this.apiClient,e);return f=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>$d(v))}}async cancel(e){var n,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const m=JU(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=$U(this.apiClient,e);u=me("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=bV(e);return f=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=CV(v),x=new jx;return Object.assign(x,E),x})}else{const h=AV(e);return f=me("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=wV(v),x=new jx;return Object.assign(x,E),x})}}async delete(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=sV(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>oV(v))}else{const h=iV(this.apiClient,e);return f=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>rV(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DV(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Qx(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>n4(a))),p(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&p(e,["role"],i),e}function PV(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let v=si(u);Array.isArray(v)&&(v=v.map(E=>Qx(E))),p(e,["contents"],v)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],Qx(fn(f)));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(E=>s4(E))),p(e,["tools"],v)}const h=d(t,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],i4(h)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function UV(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let E=si(u);Array.isArray(E)&&(E=E.map(x=>x)),p(e,["contents"],E)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],fn(f));const m=d(t,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(x=>r4(x))),p(e,["tools"],E)}const h=d(t,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),n}function VV(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["model"],rw(t,i));const o=d(e,["config"]);return o!=null&&PV(o,n),n}function LV(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["model"],rw(t,i));const o=d(e,["config"]);return o!=null&&UV(o,n),n}function OV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],Os(t,i)),n}function qV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],Os(t,i)),n}function FV(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function BV(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function HV(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function GV(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const i=d(t,["args"]);i!=null&&p(e,["args"],i);const o=d(t,["name"]);if(o!=null&&p(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zV(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jV(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const i=d(t,["name"]);i!=null&&p(e,["name"],i);const o=d(t,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&p(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function YV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],Os(t,i)),n}function KV(t,e){const n={},i=d(e,["name"]);return i!=null&&p(n,["_url","name"],Os(t,i)),n}function $V(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function JV(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function QV(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function XV(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function WV(t){const e={},n=d(t,["config"]);return n!=null&&QV(n,e),e}function ZV(t){const e={},n=d(t,["config"]);return n!=null&&XV(n,e),e}function e4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function t4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function n4(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&p(e,["fileData"],HV(a));const u=d(t,["functionCall"]);u!=null&&p(e,["functionCall"],GV(u));const f=d(t,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&p(e,["inlineData"],DV(m));const h=d(t,["text"]);h!=null&&p(e,["text"],h);const v=d(t,["thought"]);v!=null&&p(e,["thought"],v);const E=d(t,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const x=d(t,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function i4(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],zV(n));const i=d(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function s4(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],$V(f));const m=d(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],JV(m));const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function r4(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(x=>jV(x))),p(e,["functionDeclarations"],E)}const i=d(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=d(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(t,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function o4(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function a4(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function l4(t,e){const n={},i=d(e,["name"]);i!=null&&p(n,["_url","name"],Os(t,i));const o=d(e,["config"]);return o!=null&&o4(o,n),n}function u4(t,e){const n={},i=d(e,["name"]);i!=null&&p(n,["_url","name"],Os(t,i));const o=d(e,["config"]);return o!=null&&a4(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c4 extends Ls{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qo(Ds.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=LV(this.apiClient,e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=VV(this.apiClient,e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=KV(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=YV(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=qV(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=BV(v),x=new Gx;return Object.assign(x,E),x})}else{const h=OV(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=FV(v),x=new Gx;return Object.assign(x,E),x})}}async update(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=u4(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=l4(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=ZV(e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=t4(v),x=new zx;return Object.assign(x,E),x})}else{const h=WV(e);return f=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=e4(v),x=new zx;return Object.assign(x,E),x})}}}function Xx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ht(t){return this instanceof ht?(this.v=t,this):new ht(t)}function Ha(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(U){return Promise.resolve(U).then(w,E)}}function f(w,U){i[w]&&(o[w]=function(q){return new Promise(function(V,Q){a.push([w,q,V,Q])>1||m(w,q)})},U&&(o[w]=U(o[w])))}function m(w,U){try{h(i[w](U))}catch(q){x(a[0][3],q)}}function h(w){w.value instanceof ht?Promise.resolve(w.value.v).then(v,E):x(a[0][2],w)}function v(w){m("next",w)}function E(w){m("throw",w)}function x(w,U){w(U),a.shift(),a.length&&m(a[0][0],a[0][1])}}function ku(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Xx=="function"?Xx(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(f,m){u=t[a](u),o(f,m,u.done,u.value)})}}function o(a,u,f,m){Promise.resolve(m).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d4(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:_w(n)}function _w(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function f4(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Wx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!_w(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class h4{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new m4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class m4{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),f4(a)}async sendMessage(e){var n;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,f;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let x=[];v!=null&&(x=(f=v.slice(E))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(i,w,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=fn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?Wx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Ha(this,arguments,function*(){var u,f,m,h;const v=[];try{for(var E=!0,x=ku(e),w;w=yield ht(x.next()),u=w.done,!u;E=!0){h=w.value,E=!1;const U=h;if(d4(U)){const q=(o=(i=U.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;q!==void 0&&v.push(q)}yield yield ht(U)}}catch(U){f={error:U}}finally{try{!E&&!u&&(m=x.return)&&(yield ht(m.call(x)))}finally{if(f)throw f.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Wx(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(t){const e={},n=d(t,["file"]);return n!=null&&p(e,["file"],n),e}function g4(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function y4(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","file"],dw(n)),e}function _4(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function v4(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","file"],dw(n)),e}function T4(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function E4(t){const e={},n=d(t,["config"]);return n!=null&&T4(n,e),e}function x4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S4 extends Ls{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qo(Ds.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=E4(e);return a=me("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=x4(m),v=new CU;return Object.assign(v,h),v})}}async createInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=p4(e);return a=me("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=g4(m),v=new IU;return Object.assign(v,h),v})}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=v4(e);return a=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=y4(e);return a=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=_4(m),v=new NU;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jd(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function A4(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>F4(a))),p(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&p(e,["role"],i),e}function b4(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function w4(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const i=d(t,["args"]);i!=null&&p(e,["args"],i);const o=d(t,["name"]);if(o!=null&&p(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C4(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const i=d(t,["name"]);i!=null&&p(e,["name"],i);const o=d(t,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&p(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function I4(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=d(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=d(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(t,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const E=d(t,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const x=d(t,["responseLogprobs"]);x!=null&&p(e,["responseLogprobs"],x);const w=d(t,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const U=d(t,["responseModalities"]);U!=null&&p(e,["responseModalities"],U);const q=d(t,["responseSchema"]);q!=null&&p(e,["responseSchema"],q);const V=d(t,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const Q=d(t,["seed"]);Q!=null&&p(e,["seed"],Q);const ne=d(t,["speechConfig"]);ne!=null&&p(e,["speechConfig"],vw(ne));const K=d(t,["stopSequences"]);K!=null&&p(e,["stopSequences"],K);const J=d(t,["temperature"]);J!=null&&p(e,["temperature"],J);const ee=d(t,["thinkingConfig"]);ee!=null&&p(e,["thinkingConfig"],ee);const le=d(t,["topK"]);le!=null&&p(e,["topK"],le);const M=d(t,["topP"]);if(M!=null&&p(e,["topP"],M),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function N4(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function R4(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function k4(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Ay(E));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const U=d(t,["systemInstruction"]);e!==void 0&&U!=null&&p(e,["setup","systemInstruction"],A4(fn(U)));const q=d(t,["tools"]);if(e!==void 0&&q!=null){let le=ol(q);Array.isArray(le)&&(le=le.map(M=>H4(rl(M)))),p(e,["setup","tools"],le)}const V=d(t,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],B4(V));const Q=d(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ne=d(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const K=d(t,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&p(e,["setup","contextWindowCompression"],J);const ee=d(t,["proactivity"]);return e!==void 0&&ee!=null&&p(e,["setup","proactivity"],ee),n}function M4(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],I4(i));const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],vw(Ay(E)));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const U=d(t,["systemInstruction"]);e!==void 0&&U!=null&&p(e,["setup","systemInstruction"],fn(U));const q=d(t,["tools"]);if(e!==void 0&&q!=null){let le=ol(q);Array.isArray(le)&&(le=le.map(M=>G4(rl(M)))),p(e,["setup","tools"],le)}const V=d(t,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],V);const Q=d(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ne=d(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const K=d(t,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&p(e,["setup","contextWindowCompression"],J);const ee=d(t,["proactivity"]);return e!==void 0&&ee!=null&&p(e,["setup","proactivity"],ee),n}function D4(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["setup","model"],Je(t,i));const o=d(e,["config"]);return o!=null&&p(n,["config"],k4(o,n)),n}function P4(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["setup","model"],Je(t,i));const o=d(e,["config"]);return o!=null&&p(n,["config"],M4(o,n)),n}function U4(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function V4(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function L4(t){const e={},n=d(t,["media"]);if(n!=null){let h=ow(n);Array.isArray(h)&&(h=h.map(v=>Jd(v))),p(e,["mediaChunks"],h)}const i=d(t,["audio"]);i!=null&&p(e,["audio"],Jd(lw(i)));const o=d(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(t,["video"]);a!=null&&p(e,["video"],Jd(aw(a)));const u=d(t,["text"]);u!=null&&p(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&p(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function O4(t){const e={},n=d(t,["media"]);if(n!=null){let h=ow(n);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=d(t,["audio"]);i!=null&&p(e,["audio"],lw(i));const o=d(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(t,["video"]);a!=null&&p(e,["video"],aw(a));const u=d(t,["text"]);u!=null&&p(e,["text"],u);const f=d(t,["activityStart"]);f!=null&&p(e,["activityStart"],f);const m=d(t,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function q4(t){const e={},n=d(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=d(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=d(t,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=d(t,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=d(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],z4(u));const f=d(t,["goAway"]);f!=null&&p(e,["goAway"],f);const m=d(t,["sessionResumptionUpdate"]);return m!=null&&p(e,["sessionResumptionUpdate"],m),e}function F4(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&p(e,["fileData"],b4(a));const u=d(t,["functionCall"]);u!=null&&p(e,["functionCall"],w4(u));const f=d(t,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&p(e,["inlineData"],Jd(m));const h=d(t,["text"]);h!=null&&p(e,["text"],h);const v=d(t,["thought"]);v!=null&&p(e,["thought"],v);const E=d(t,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const x=d(t,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function B4(t){const e={},n=d(t,["handle"]);if(n!=null&&p(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vw(t){const e={},n=d(t,["languageCode"]);n!=null&&p(e,["languageCode"],n);const i=d(t,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function H4(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],N4(f));const m=d(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],R4(m));const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function G4(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(x=>C4(x))),p(e,["functionDeclarations"],E)}const i=d(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=d(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(t,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function z4(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=d(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=d(t,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=d(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(t,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const m=d(t,["promptTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(U=>U)),p(e,["promptTokensDetails"],w)}const h=d(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(U=>U)),p(e,["cacheTokensDetails"],w)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(U=>U)),p(e,["responseTokensDetails"],w)}const E=d(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(U=>U)),p(e,["toolUsePromptTokensDetails"],w)}const x=d(t,["trafficType"]);return x!=null&&p(e,["trafficType"],x),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Y4(t){const e={},n=d(t,["content"]);n!=null&&p(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],K4(i));const o=d(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=d(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(t,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const m=d(t,["index"]);m!=null&&p(e,["index"],m);const h=d(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(t,["safetyRatings"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(w=>w)),p(e,["safetyRatings"],x)}const E=d(t,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function K4(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function $4(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let a=si(o);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}return n}function J4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["tokensInfo"],o)}return e}function Q4(t){const e={},n=d(t,["values"]);n!=null&&p(e,["values"],n);const i=d(t,["statistics"]);return i!=null&&p(e,["statistics"],X4(i)),e}function X4(t){const e={},n=d(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=d(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function eh(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>o3(a))),p(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&p(e,["role"],i),e}function W4(t){const e={},n=d(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=d(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function Z4(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eL(t,e){const n={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],fn(i));const o=d(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Aw(f))),p(e,["tools"],u)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],jL(a)),n}function tL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let u=si(o);Array.isArray(u)&&(u=u.map(f=>eh(f))),p(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&Z4(a),n}function nL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let u=si(o);Array.isArray(u)&&(u=u.map(f=>f)),p(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&eL(a,n),n}function iL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=d(t,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function sL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function rL(t,e){const n={},i=d(e,["model"]);return i!=null&&p(n,["_url","name"],Je(t,i)),n}function oL(t,e){const n={},i=d(e,["model"]);return i!=null&&p(n,["_url","name"],Je(t,i)),n}function aL(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function lL(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function uL(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const x=d(t,["includeRaiReason"]);e!==void 0&&x!=null&&p(e,["parameters","includeRaiReason"],x);const w=d(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const U=d(t,["outputMimeType"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","mimeType"],U);const q=d(t,["outputCompressionQuality"]);e!==void 0&&q!=null&&p(e,["parameters","outputOptions","compressionQuality"],q);const V=d(t,["addWatermark"]);e!==void 0&&V!=null&&p(e,["parameters","addWatermark"],V);const Q=d(t,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const ne=d(t,["editMode"]);e!==void 0&&ne!=null&&p(e,["parameters","editMode"],ne);const K=d(t,["baseSteps"]);return e!==void 0&&K!=null&&p(e,["parameters","editConfig","baseSteps"],K),n}function cL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>f3(m))),p(n,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&uL(u,n),n}function dL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>th(a))),p(e,["generatedImages"],o)}return e}function fL(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function hL(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=d(t,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),n}function mL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let f=Ey(t,o);Array.isArray(f)&&(f=f.map(m=>m)),p(n,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&fL(a,n);const u=d(e,["model"]);return u!==void 0&&p(n,["requests[]","model"],Je(t,u)),n}function pL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let u=Ey(t,o);Array.isArray(u)&&(u=u.map(f=>f)),p(n,["instances[]","content"],u)}const a=d(e,["config"]);return a!=null&&hL(a,n),n}function gL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const o=d(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function yL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Q4(u))),p(e,["embeddings"],a)}const o=d(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function _L(t){const e={},n=d(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=d(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function vL(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function TL(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const i=d(t,["args"]);i!=null&&p(e,["args"],i);const o=d(t,["name"]);if(o!=null&&p(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function EL(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xL(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const i=d(t,["name"]);i!=null&&p(e,["name"],i);const o=d(t,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(t,["response"]);u!=null&&p(e,["response"],u);const f=d(t,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function SL(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],eh(fn(o)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const x=d(e,["logprobs"]);x!=null&&p(i,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const U=d(e,["frequencyPenalty"]);U!=null&&p(i,["frequencyPenalty"],U);const q=d(e,["seed"]);q!=null&&p(i,["seed"],q);const V=d(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],xy(Q));const ne=d(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const K=d(e,["safetySettings"]);if(n!==void 0&&K!=null){let F=K;Array.isArray(F)&&(F=F.map(P=>h3(P))),p(n,["safetySettings"],F)}const J=d(e,["tools"]);if(n!==void 0&&J!=null){let F=ol(J);Array.isArray(F)&&(F=F.map(P=>T3(rl(P)))),p(n,["tools"],F)}const ee=d(e,["toolConfig"]);if(n!==void 0&&ee!=null&&p(n,["toolConfig"],v3(ee)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=d(e,["cachedContent"]);n!==void 0&&le!=null&&p(n,["cachedContent"],Os(t,le));const M=d(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const R=d(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const I=d(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],Sy(I)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const k=d(e,["imageConfig"]);return k!=null&&p(i,["imageConfig"],QL(k)),i}function AL(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],fn(o));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const x=d(e,["logprobs"]);x!=null&&p(i,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(i,["presencePenalty"],w);const U=d(e,["frequencyPenalty"]);U!=null&&p(i,["frequencyPenalty"],U);const q=d(e,["seed"]);q!=null&&p(i,["seed"],q);const V=d(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const Q=d(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],xy(Q));const ne=d(e,["responseJsonSchema"]);ne!=null&&p(i,["responseJsonSchema"],ne);const K=d(e,["routingConfig"]);K!=null&&p(i,["routingConfig"],K);const J=d(e,["modelSelectionConfig"]);J!=null&&p(i,["modelConfig"],J);const ee=d(e,["safetySettings"]);if(n!==void 0&&ee!=null){let $=ee;Array.isArray($)&&($=$.map(ce=>ce)),p(n,["safetySettings"],$)}const le=d(e,["tools"]);if(n!==void 0&&le!=null){let $=ol(le);Array.isArray($)&&($=$.map(ce=>Aw(rl(ce)))),p(n,["tools"],$)}const M=d(e,["toolConfig"]);n!==void 0&&M!=null&&p(n,["toolConfig"],M);const R=d(e,["labels"]);n!==void 0&&R!=null&&p(n,["labels"],R);const I=d(e,["cachedContent"]);n!==void 0&&I!=null&&p(n,["cachedContent"],Os(t,I));const L=d(e,["responseModalities"]);L!=null&&p(i,["responseModalities"],L);const k=d(e,["mediaResolution"]);k!=null&&p(i,["mediaResolution"],k);const F=d(e,["speechConfig"]);F!=null&&p(i,["speechConfig"],Sw(Sy(F)));const P=d(e,["audioTimestamp"]);P!=null&&p(i,["audioTimestamp"],P);const Pe=d(e,["thinkingConfig"]);Pe!=null&&p(i,["thinkingConfig"],Pe);const we=d(e,["imageConfig"]);return we!=null&&p(i,["imageConfig"],XL(we)),i}function Zx(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let u=si(o);Array.isArray(u)&&(u=u.map(f=>eh(f))),p(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&p(n,["generationConfig"],SL(t,a,n)),n}function eS(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["contents"]);if(o!=null){let u=si(o);Array.isArray(u)&&(u=u.map(f=>f)),p(n,["contents"],u)}const a=d(e,["config"]);return a!=null&&p(n,["generationConfig"],AL(t,a,n)),n}function tS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>Y4(h))),p(e,["candidates"],m)}const o=d(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=d(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(t,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(t,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function nS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),p(e,["candidates"],h)}const o=d(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=d(t,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=d(t,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(t,["responseId"]);f!=null&&p(e,["responseId"],f);const m=d(t,["usageMetadata"]);return m!=null&&p(e,["usageMetadata"],m),e}function bL(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const m=d(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const h=d(t,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const v=d(t,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const x=d(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(t,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function wL(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const m=d(t,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const x=d(t,["includeRaiReason"]);e!==void 0&&x!=null&&p(e,["parameters","includeRaiReason"],x);const w=d(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const U=d(t,["outputMimeType"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","mimeType"],U);const q=d(t,["outputCompressionQuality"]);e!==void 0&&q!=null&&p(e,["parameters","outputOptions","compressionQuality"],q);const V=d(t,["addWatermark"]);e!==void 0&&V!=null&&p(e,["parameters","addWatermark"],V);const Q=d(t,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const ne=d(t,["imageSize"]);e!==void 0&&ne!=null&&p(e,["parameters","sampleImageSize"],ne);const K=d(t,["enhancePrompt"]);return e!==void 0&&K!=null&&p(e,["parameters","enhancePrompt"],K),n}function CL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&bL(a,n),n}function IL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&wL(a,n),n}function NL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>BL(u))),p(e,["generatedImages"],a)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],Ew(o)),e}function RL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>th(u))),p(e,["generatedImages"],a)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],xw(o)),e}function kL(t,e){const n={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(t,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=d(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=d(t,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const h=d(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],nh(v));const E=d(t,["referenceImages"]);if(e!==void 0&&E!=null){let x=E;Array.isArray(x)&&(x=x.map(w=>D3(w))),p(e,["instances[0]","referenceImages"],x)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ML(t,e){const n={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=d(t,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=d(t,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(t,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const m=d(t,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const h=d(t,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const E=d(t,["pubsubTopic"]);e!==void 0&&E!=null&&p(e,["parameters","pubsubTopic"],E);const x=d(t,["negativePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","negativePrompt"],x);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const U=d(t,["generateAudio"]);e!==void 0&&U!=null&&p(e,["parameters","generateAudio"],U);const q=d(t,["lastFrame"]);e!==void 0&&q!=null&&p(e,["instances[0]","lastFrame"],Si(q));const V=d(t,["referenceImages"]);if(e!==void 0&&V!=null){let K=V;Array.isArray(K)&&(K=K.map(J=>P3(J))),p(e,["instances[0]","referenceImages"],K)}const Q=d(t,["mask"]);e!==void 0&&Q!=null&&p(e,["instances[0]","mask"],M3(Q));const ne=d(t,["compressionQuality"]);return e!==void 0&&ne!=null&&p(e,["parameters","compressionQuality"],ne),n}function DL(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],LL(u)),e}function PL(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response"]);return u!=null&&p(e,["response"],OL(u)),e}function UL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&p(n,["instances[0]","image"],nh(a));const u=d(e,["video"]);u!=null&&p(n,["instances[0]","video"],bw(u));const f=d(e,["source"]);f!=null&&qL(f,n);const m=d(e,["config"]);return m!=null&&kL(m,n),n}function VL(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&p(n,["instances[0]","image"],Si(a));const u=d(e,["video"]);u!=null&&p(n,["instances[0]","video"],ww(u));const f=d(e,["source"]);f!=null&&FL(f,n);const m=d(e,["config"]);return m!=null&&ML(m,n),n}function LL(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>GL(u))),p(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function OL(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>zL(u))),p(e,["generatedVideos"],a)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function qL(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],nh(o));const a=d(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],bw(a)),n}function FL(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Si(o));const a=d(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],ww(a)),n}function BL(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["image"],WL(n));const i=d(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=d(t,["_self"]);return o!=null&&p(e,["safetyAttributes"],Ew(o)),e}function th(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["image"],Tw(n));const i=d(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=d(t,["_self"]);o!=null&&p(e,["safetyAttributes"],xw(o));const a=d(t,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function HL(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["mask"],Tw(n));const i=d(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["labels"],o)}return e}function GL(t){const e={},n=d(t,["video"]);return n!=null&&p(e,["video"],R3(n)),e}function zL(t){const e={},n=d(t,["_self"]);return n!=null&&p(e,["video"],k3(n)),e}function jL(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=d(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(t,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const m=d(t,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=d(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(t,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const E=d(t,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const x=d(t,["responseLogprobs"]);x!=null&&p(e,["responseLogprobs"],x);const w=d(t,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const U=d(t,["responseModalities"]);U!=null&&p(e,["responseModalities"],U);const q=d(t,["responseSchema"]);q!=null&&p(e,["responseSchema"],q);const V=d(t,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const Q=d(t,["seed"]);Q!=null&&p(e,["seed"],Q);const ne=d(t,["speechConfig"]);ne!=null&&p(e,["speechConfig"],Sw(ne));const K=d(t,["stopSequences"]);K!=null&&p(e,["stopSequences"],K);const J=d(t,["temperature"]);J!=null&&p(e,["temperature"],J);const ee=d(t,["thinkingConfig"]);ee!=null&&p(e,["thinkingConfig"],ee);const le=d(t,["topK"]);le!=null&&p(e,["topK"],le);const M=d(t,["topP"]);if(M!=null&&p(e,["topP"],M),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YL(t,e){const n={},i=d(e,["model"]);return i!=null&&p(n,["_url","name"],Je(t,i)),n}function KL(t,e){const n={},i=d(e,["model"]);return i!=null&&p(n,["_url","name"],Je(t,i)),n}function $L(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function JL(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function QL(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XL(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=d(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=d(t,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=d(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function WL(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Hr(n));const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Tw(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Hr(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function nh(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Hr(n));const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Si(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=d(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Hr(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function ZL(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=d(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&p(n,["_url","models_url"],fw(t,f)),i}function e3(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=d(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const f=d(e,["queryBase"]);return n!==void 0&&f!=null&&p(n,["_url","models_url"],fw(t,f)),i}function t3(t,e){const n={},i=d(e,["config"]);return i!=null&&ZL(t,i,n),n}function n3(t,e){const n={},i=d(e,["config"]);return i!=null&&e3(t,i,n),n}function i3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let a=hw(o);Array.isArray(a)&&(a=a.map(u=>sg(u))),p(e,["models"],a)}return e}function s3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let a=hw(o);Array.isArray(a)&&(a=a.map(u=>rg(u))),p(e,["models"],a)}return e}function r3(t){const e={},n=d(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=d(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=d(t,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function sg(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(t,["description"]);o!=null&&p(e,["description"],o);const a=d(t,["version"]);a!=null&&p(e,["version"],a);const u=d(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],E3(u));const f=d(t,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const m=d(t,["outputTokenLimit"]);m!=null&&p(e,["outputTokenLimit"],m);const h=d(t,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const v=d(t,["temperature"]);v!=null&&p(e,["temperature"],v);const E=d(t,["maxTemperature"]);E!=null&&p(e,["maxTemperature"],E);const x=d(t,["topP"]);x!=null&&p(e,["topP"],x);const w=d(t,["topK"]);w!=null&&p(e,["topK"],w);const U=d(t,["thinking"]);return U!=null&&p(e,["thinking"],U),e}function rg(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(t,["description"]);o!=null&&p(e,["description"],o);const a=d(t,["versionId"]);a!=null&&p(e,["version"],a);const u=d(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(x=>_L(x))),p(e,["endpoints"],E)}const f=d(t,["labels"]);f!=null&&p(e,["labels"],f);const m=d(t,["_self"]);m!=null&&p(e,["tunedModelInfo"],x3(m));const h=d(t,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const v=d(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(x=>x)),p(e,["checkpoints"],E)}return e}function o3(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&p(e,["fileData"],vL(a));const u=d(t,["functionCall"]);u!=null&&p(e,["functionCall"],TL(u));const f=d(t,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&p(e,["inlineData"],j4(m));const h=d(t,["text"]);h!=null&&p(e,["text"],h);const v=d(t,["thought"]);v!=null&&p(e,["thought"],v);const E=d(t,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const x=d(t,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function a3(t){const e={},n=d(t,["productImage"]);return n!=null&&p(e,["image"],Si(n)),e}function l3(t,e){const n={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(t,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=d(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const m=d(t,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=d(t,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const E=d(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const x=d(t,["enhancePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","enhancePrompt"],x);const w=d(t,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),n}function u3(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["source"]);o!=null&&d3(o,n);const a=d(e,["config"]);return a!=null&&l3(a,n),n}function c3(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>th(o))),p(e,["generatedImages"],i)}return e}function d3(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(t,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],Si(o));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>a3(f))),p(e,["instances[0]","productImages"],u)}return n}function f3(t){const e={},n=d(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Si(n));const i=d(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=d(t,["referenceType"]);o!=null&&p(e,["referenceType"],o);const a=d(t,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],r3(a));const u=d(t,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],W4(u));const f=d(t,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const m=d(t,["subjectImageConfig"]);return m!=null&&p(e,["subjectImageConfig"],m),e}function Ew(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function xw(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function h3(t){const e={},n=d(t,["category"]);if(n!=null&&p(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function m3(t){const e={},n=d(t,["image"]);return n!=null&&p(e,["image"],Si(n)),e}function p3(t,e){const n={},i=d(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=d(t,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=d(t,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const m=d(t,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),n}function g3(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["source"]);o!=null&&_3(o,n);const a=d(e,["config"]);return a!=null&&p3(a,n),n}function y3(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>HL(o))),p(e,["generatedMasks"],i)}return e}function _3(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Si(o));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],m3(a)),n}function Sw(t){const e={},n=d(t,["languageCode"]);n!=null&&p(e,["languageCode"],n);const i=d(t,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function v3(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],EL(n));const i=d(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function T3(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],$L(f));const m=d(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],JL(m));const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Aw(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(x=>xL(x))),p(e,["functionDeclarations"],E)}const i=d(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=d(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(t,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const m=d(t,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=d(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(t,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function E3(t){const e={},n=d(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function x3(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function S3(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function A3(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function b3(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","name"],Je(t,i));const o=d(e,["config"]);return o!=null&&S3(o,n),n}function w3(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["config"]);return o!=null&&A3(o,n),n}function C3(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const m=d(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const h=d(t,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(t,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const x=d(t,["numberOfImages"]);e!==void 0&&x!=null&&p(e,["parameters","sampleCount"],x);const w=d(t,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),n}function I3(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["_url","model"],Je(t,i));const o=d(e,["image"]);o!=null&&p(n,["instances[0]","image"],Si(o));const a=d(e,["upscaleFactor"]);a!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&C3(u,n),n}function N3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>th(a))),p(e,["generatedImages"],o)}return e}function R3(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Hr(i));const o=d(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function k3(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Hr(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function M3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["_self"],Si(n));const i=d(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function D3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["image"],nh(n));const i=d(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function P3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["image"],Si(n));const i=d(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function bw(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const i=d(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Hr(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function ww(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=d(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Hr(i));const o=d(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U3="Content-Type",V3="X-Server-Timeout",L3="User-Agent",og="x-goog-api-client",O3="1.30.0",q3=`google-genai-sdk/${O3}`,F3="v1beta1",B3="v1beta",iS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class H3{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:F3,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:B3,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>a.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&G3(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await sS(o),new tg(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await sS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Ha(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:m}=yield ht(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(m,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const x=JSON.parse(JSON.stringify(E.error)),w=x.status,U=x.code,q=`got status: ${w}. ${JSON.stringify(E)}`;if(U>=400&&U<600)throw new Zf({message:q,status:U})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let v=u.match(iS);for(;v;){const E=v[1];try{const x=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ht(new tg(x)),u=u.slice(v[0].length),v=u.match(iS)}catch(x){throw new Error(`exception parsing stream chunk ${E}. ${x}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=q3+" "+this.clientOptions.userAgentExtra;return e[L3]=n,e[og]=n,e[U3]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(V3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m={file:o},h=this.getFileName(e),v=me("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,m,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var o;const a=this.clientOptions.uploader,u=await a.stat(n),f=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const x=await this.fetchUploadUrl(h,f,m,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,a,u){var f;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function sS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Zf({message:o,status:n}):new Error(o)}}function G3(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],v=f[m];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),f[m]=h)}return f}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z3="mcp_used/unknown";let j3=!1;function Cw(t){for(const e of t)if(Y3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return j3}function Iw(t){var e;const n=(e=t[og])!==null&&e!==void 0?e:"";t[og]=(n+` ${z3}`).trimStart()}function Y3(t){return t!==null&&typeof t=="object"&&t instanceof by}function K3(t,e=100){return Ha(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield ht(t.listTools({cursor:i}));for(const u of a.tools)yield yield ht(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class by{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new by(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(n=void 0,ku(K3(v))),h;h=await m.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const E=o;u.push(E);const x=E.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=v}}catch(E){n={error:E}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),qU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $3(t,e,n){const i=new kU;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class J3{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=W3(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const v=new Promise(K=>{h=K}),E=e.callbacks,x=function(){h({})},w=this.apiClient,U={onopen:x,onmessage:K=>{$3(w,E.onmessage,K)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(K){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(K){}},q=this.webSocketFactory.create(m,X3(u),U);q.connect(),await v;const ne={setup:{model:Je(this.apiClient,e.model)}};return q.send(JSON.stringify(ne)),new Q3(q,this.apiClient)}}class Q3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=V4(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=U4(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ua.PLAY)}pause(){this.sendPlaybackControl(Ua.PAUSE)}stop(){this.sendPlaybackControl(Ua.STOP)}resetContext(){this.sendPlaybackControl(Ua.RESET_CONTEXT)}close(){this.conn.close()}}function X3(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function W3(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e6(t,e,n){const i=new RU;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const a=JSON.parse(o);if(t.isVertexAI()){const u=q4(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class t6{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new J3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Cw(e.config.tools)&&Iw(E);const x=r6(E);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,v);else{const I=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),v=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${k}=${I}`}let w=()=>{};const U=new Promise(I=>{w=I}),q=e.callbacks,V=function(){var I;(I=q==null?void 0:q.onopen)===null||I===void 0||I.call(q),w({})},Q=this.apiClient,ne={onopen:V,onmessage:I=>{e6(Q,q.onmessage,I)},onerror:(n=q==null?void 0:q.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=q==null?void 0:q.onclose)!==null&&i!==void 0?i:function(I){}},K=this.webSocketFactory.create(v,s6(x),ne);K.connect(),await U;let J=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const I=this.apiClient.getProject(),L=this.apiClient.getLocation();J=`projects/${I}/locations/${L}/`+J}let ee={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Tf.AUDIO]}:e.config.responseModalities=[Tf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const I of le)if(this.isCallableTool(I)){const L=I;M.push(await L.tool())}else M.push(I);M.length>0&&(e.config.tools=M);const R={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=P4(this.apiClient,R):ee=D4(this.apiClient,R),delete ee.config,K.send(JSON.stringify(ee)),new i6(K,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n6={turnComplete:!0};class i6{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=si(n.turns),e.isVertexAI()||(i=i.map(o=>eh(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Z3)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},n6),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:O4(e)}:n={realtimeInput:L4(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function s6(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function r6(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rS=10;function oS(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ga(u)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ga(t){return"callTool"in t&&typeof t.callTool=="function"}function o6(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Ga(o)))!==null&&i!==void 0?i:!1}function aS(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(Ga(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(o)}),n}function lS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a6 extends Ls{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,u,f;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!o6(n)||oS(n.config))return await this.generateContentInternal(m);const h=aS(n);if(h.length>0){const q=h.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${q}.`)}let v,E;const x=si(m.contents),w=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:rS;let U=0;for(;U<w&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const q=v.candidates[0].content,V=[];for(const Q of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ga(Q)){const K=await Q.callTool(v.functionCalls);V.push(...K)}U++,E={role:"user",parts:V},m.contents=si(m.contents),m.contents.push(q),m.contents.push(E),lS(m.config)&&(x.push(q),x.push(E))}return lS(m.config)&&(v.automaticFunctionCallingHistory=x),v},this.generateContentStream=async n=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(n),oS(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const m=aS(n);if(m.length>0){const E=m.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(f=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new qo(Ds.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,a,u,f,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(f=n.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>Ga(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Cw(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Iw(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ga(u)){const f=u,m=await f.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:rS;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(h,v,E){var x,w;return Ha(this,arguments,function*(){for(var U,q,V,Q;f<a;){u&&(f++,u=!1);const ee=yield ht(h.processParamsMaybeAddMcpUsage(E)),le=yield ht(h.generateContentStreamInternal(ee)),M=[],R=[];try{for(var ne=!0,K=(q=void 0,ku(le)),J;J=yield ht(K.next()),U=J.done,!U;ne=!0){Q=J.value,ne=!1;const I=Q;if(yield yield ht(I),I.candidates&&(!((x=I.candidates[0])===null||x===void 0)&&x.content)){R.push(I.candidates[0].content);for(const L of(w=I.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(f<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const k=yield ht(v.get(L.functionCall.name).callTool([L.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(I){q={error:I}}finally{try{!ne&&!U&&(V=K.return)&&(yield ht(V.call(K)))}finally{if(q)throw q.error}}if(M.length>0){u=!0;const I=new gu;I.candidates=[{content:{role:"user",parts:M}}],yield yield ht(I);const L=[];L.push(...R),L.push({role:"user",parts:M});const k=si(E.contents).concat(L);E.contents=k}else break}})})(this,m,e)}async generateContentInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=eS(this.apiClient,e);return f=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=nS(v),x=new gu;return Object.assign(x,E),x})}else{const h=Zx(this.apiClient,e);return f=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=tS(v),x=new gu;return Object.assign(x,E),x})}}async generateContentStreamInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=eS(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ha(this,arguments,function*(){var x,w,U,q;try{for(var V=!0,Q=ku(E),ne;ne=yield ht(Q.next()),x=ne.done,!x;V=!0){q=ne.value,V=!1;const K=q,J=nS(yield ht(K.json()));J.sdkHttpResponse={headers:K.headers};const ee=new gu;Object.assign(ee,J),yield yield ht(ee)}}catch(K){w={error:K}}finally{try{!V&&!x&&(U=Q.return)&&(yield ht(U.call(Q)))}finally{if(w)throw w.error}}})})}else{const h=Zx(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Ha(this,arguments,function*(){var x,w,U,q;try{for(var V=!0,Q=ku(E),ne;ne=yield ht(Q.next()),x=ne.done,!x;V=!0){q=ne.value,V=!1;const K=q,J=tS(yield ht(K.json()));J.sdkHttpResponse={headers:K.headers};const ee=new gu;Object.assign(ee,J),yield yield ht(ee)}}catch(K){w={error:K}}finally{try{!V&&!x&&(U=Q.return)&&(yield ht(U.call(Q)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=pL(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=yL(v),x=new Lx;return Object.assign(x,E),x})}else{const h=mL(this.apiClient,e);return f=me("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=gL(v),x=new Lx;return Object.assign(x,E),x})}}async generateImagesInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=IL(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=RL(v),x=new Ox;return Object.assign(x,E),x})}else{const h=CL(this.apiClient,e);return f=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=NL(v),x=new Ox;return Object.assign(x,E),x})}}async editImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=cL(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=dL(m),v=new vU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=I3(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=N3(m),v=new TU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=u3(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=c3(m),v=new EU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=g3(this.apiClient,e);return a=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=y3(m),v=new xU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=KL(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>rg(v))}else{const h=YL(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>sg(v))}}async listInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return f=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=s3(v),x=new qx;return Object.assign(x,E),x})}else{const h=t3(this.apiClient,e);return f=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=i3(v),x=new qx;return Object.assign(x,E),x})}}async update(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=w3(this.apiClient,e);return f=me("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>rg(v))}else{const h=b3(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>sg(v))}}async delete(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=oL(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=lL(v),x=new Fx;return Object.assign(x,E),x})}else{const h=rL(this.apiClient,e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=aL(v),x=new Fx;return Object.assign(x,E),x})}}async countTokens(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=nL(this.apiClient,e);return f=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=sL(v),x=new Bx;return Object.assign(x,E),x})}else{const h=tL(this.apiClient,e);return f=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=iL(v),x=new Bx;return Object.assign(x,E),x})}}async computeTokens(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=$4(this.apiClient,e);return a=me("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=J4(m),v=new SU;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=VL(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=PL(v),x=new Ef;return Object.assign(x,E),x})}else{const h=UL(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=DL(v),x=new Ef;return Object.assign(x,E),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l6 extends Ls{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=hU(e);return f=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=fU(e);return f=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=rU(e);return a=me("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u6(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function c6(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>v6(a))),p(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&p(e,["role"],i),e}function d6(t,e,n){const i={},o=d(e,["expireTime"]);n!==void 0&&o!=null&&p(n,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&p(n,["newSessionExpireTime"],a);const u=d(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const f=d(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&p(n,["bidiGenerateContentSetup"],_6(t,f));const m=d(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&p(n,["fieldMask"],m),i}function f6(t,e){const n={},i=d(e,["config"]);return i!=null&&p(n,["config"],d6(t,i,n)),n}function h6(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function m6(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const i=d(t,["args"]);i!=null&&p(e,["args"],i);const o=d(t,["name"]);if(o!=null&&p(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function p6(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function g6(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function y6(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(t,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(t,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(t,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Ay(E));const x=d(t,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const U=d(t,["systemInstruction"]);e!==void 0&&U!=null&&p(e,["setup","systemInstruction"],c6(fn(U)));const q=d(t,["tools"]);if(e!==void 0&&q!=null){let le=ol(q);Array.isArray(le)&&(le=le.map(M=>E6(rl(M)))),p(e,["setup","tools"],le)}const V=d(t,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],T6(V));const Q=d(t,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ne=d(t,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const K=d(t,["realtimeInputConfig"]);e!==void 0&&K!=null&&p(e,["setup","realtimeInputConfig"],K);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&p(e,["setup","contextWindowCompression"],J);const ee=d(t,["proactivity"]);return e!==void 0&&ee!=null&&p(e,["setup","proactivity"],ee),n}function _6(t,e){const n={},i=d(e,["model"]);i!=null&&p(n,["setup","model"],Je(t,i));const o=d(e,["config"]);return o!=null&&p(n,["config"],y6(o,n)),n}function v6(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(t,["fileData"]);a!=null&&p(e,["fileData"],h6(a));const u=d(t,["functionCall"]);u!=null&&p(e,["functionCall"],m6(u));const f=d(t,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(t,["inlineData"]);m!=null&&p(e,["inlineData"],u6(m));const h=d(t,["text"]);h!=null&&p(e,["text"],h);const v=d(t,["thought"]);v!=null&&p(e,["thought"],v);const E=d(t,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const x=d(t,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function T6(t){const e={},n=d(t,["handle"]);if(n!=null&&p(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function E6(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=d(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=d(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&p(e,["googleMaps"],p6(f));const m=d(t,["googleSearch"]);m!=null&&p(e,["googleSearch"],g6(m));const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x6(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function S6(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=x6(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class A6 extends Ls{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=f6(this.apiClient,e);a=me("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=S6(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b6(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function w6(t){const e={},n=d(t,["config"]);return n!=null&&b6(n,e),e}function C6(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function I6(t){const e={},n=d(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&C6(i,e),e}function N6(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function R6(t,e){const n={},i=d(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function k6(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const i=d(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(t,["done"]);o!=null&&p(e,["done"],o);const a=d(t,["error"]);a!=null&&p(e,["error"],a);const u=d(t,["response"]);return u!=null&&p(e,["response"],D6(u)),e}function M6(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=d(t,["fileName"]);i!=null&&p(e,["fileName"],i);const o=d(t,["config"]);return o!=null&&R6(o,e),e}function D6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&p(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function P6(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function U6(t){const e={},n=d(t,["config"]);return n!=null&&P6(n,e),e}function V6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function L6(t,e){const n={},i=d(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=d(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>m)),p(e,["customMetadata"],f)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),n}function O6(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=d(t,["config"]);return i!=null&&L6(i,e),e}function q6(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F6(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function B6(t){const e={},n=d(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&F6(i,e),e}function H6(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function G6(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function z6(t){const e={},n=d(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=d(t,["config"]);return i!=null&&G6(i,e),e}function j6(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(t,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Y6=class extends Ls{constructor(e){super(),this.apiClient=e,this.list=async n=>new qo(Ds.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=H6(e);return a=me("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B6(e);o=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=z6(e);return a=me("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=j6(m),v=new AU;return Object.assign(v,h),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K6 extends Ls{constructor(e,n=new Y6(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new qo(Ds.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=w6(e);return a=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=N6(e);return a=me("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=I6(e);o=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=U6(e);return a=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=V6(m),v=new bU;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O6(e);return a=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=q6(m),v=new wU;return Object.assign(v,h),v})}}async importFile(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=M6(e);return a=me("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=k6(m),v=new vy;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $6(t,e){const n={},i=d(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function J6(t,e){const n={},i=d(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function Q6(t,e,n){const i={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(t,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(t,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function X6(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],uS(w))}else if(o==="PREFERENCE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],uS(w))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=d(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(m==="PREFERENCE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(t,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const x=d(t,["beta"]);return e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),i}function W6(t,e){const n={},i=d(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const a=d(t,["trainingDataset"]);a!=null&&uO(a);const u=d(t,["config"]);return u!=null&&Q6(u,n),n}function Z6(t,e){const n={},i=d(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const a=d(t,["trainingDataset"]);a!=null&&cO(a,n,e);const u=d(t,["config"]);return u!=null&&X6(u,n,e),n}function eO(t,e){const n={},i=d(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function tO(t,e){const n={},i=d(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function nO(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function iO(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function sO(t,e){const n={},i=d(t,["config"]);return i!=null&&nO(i,n),n}function rO(t,e){const n={},i=d(t,["config"]);return i!=null&&iO(i,n),n}function oO(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const a=d(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Nw(f))),p(n,["tuningJobs"],u)}return n}function aO(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const a=d(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>ag(f))),p(n,["tuningJobs"],u)}return n}function lO(t,e){const n={},i=d(t,["name"]);i!=null&&p(n,["model"],i);const o=d(t,["name"]);return o!=null&&p(n,["endpoint"],o),n}function uO(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(n,["examples","examples"],o)}return n}function cO(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Nw(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&p(n,["name"],o);const a=d(t,["state"]);a!=null&&p(n,["state"],cw(a));const u=d(t,["createTime"]);u!=null&&p(n,["createTime"],u);const f=d(t,["tuningTask","startTime"]);f!=null&&p(n,["startTime"],f);const m=d(t,["tuningTask","completeTime"]);m!=null&&p(n,["endTime"],m);const h=d(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const v=d(t,["description"]);v!=null&&p(n,["description"],v);const E=d(t,["baseModel"]);E!=null&&p(n,["baseModel"],E);const x=d(t,["_self"]);return x!=null&&p(n,["tunedModel"],lO(x)),n}function ag(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&p(n,["name"],o);const a=d(t,["state"]);a!=null&&p(n,["state"],cw(a));const u=d(t,["createTime"]);u!=null&&p(n,["createTime"],u);const f=d(t,["startTime"]);f!=null&&p(n,["startTime"],f);const m=d(t,["endTime"]);m!=null&&p(n,["endTime"],m);const h=d(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const v=d(t,["error"]);v!=null&&p(n,["error"],v);const E=d(t,["description"]);E!=null&&p(n,["description"],E);const x=d(t,["baseModel"]);x!=null&&p(n,["baseModel"],x);const w=d(t,["tunedModel"]);w!=null&&p(n,["tunedModel"],w);const U=d(t,["preTunedModel"]);U!=null&&p(n,["preTunedModel"],U);const q=d(t,["supervisedTuningSpec"]);q!=null&&p(n,["supervisedTuningSpec"],q);const V=d(t,["preferenceOptimizationSpec"]);V!=null&&p(n,["preferenceOptimizationSpec"],V);const Q=d(t,["tuningDataStats"]);Q!=null&&p(n,["tuningDataStats"],Q);const ne=d(t,["encryptionSpec"]);ne!=null&&p(n,["encryptionSpec"],ne);const K=d(t,["partnerModelTuningSpec"]);K!=null&&p(n,["partnerModelTuningSpec"],K);const J=d(t,["customBaseModel"]);J!=null&&p(n,["customBaseModel"],J);const ee=d(t,["experiment"]);ee!=null&&p(n,["experiment"],ee);const le=d(t,["labels"]);le!=null&&p(n,["labels"],le);const M=d(t,["outputUri"]);M!=null&&p(n,["outputUri"],M);const R=d(t,["pipelineJob"]);R!=null&&p(n,["pipelineJob"],R);const I=d(t,["serviceAccount"]);I!=null&&p(n,["serviceAccount"],I);const L=d(t,["tunedModelDisplayName"]);L!=null&&p(n,["tunedModelDisplayName"],L);const k=d(t,["veoTuningSpec"]);return k!=null&&p(n,["veoTuningSpec"],k),n}function dO(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&p(n,["name"],o);const a=d(t,["metadata"]);a!=null&&p(n,["metadata"],a);const u=d(t,["done"]);u!=null&&p(n,["done"],u);const f=d(t,["error"]);return f!=null&&p(n,["error"],f),n}function uS(t,e){const n={},i=d(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const o=d(t,["vertexDatasetResource"]);return o!=null&&p(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fO extends Ls{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new qo(Ds.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:eg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=tO(e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>ag(v))}else{const h=eO(e);return f=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>Nw(v))}}async listInternal(e){var n,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=rO(e);return f=me("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=aO(v),x=new Hx;return Object.assign(x,E),x})}else{const h=sO(e);return f=me("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),u.then(v=>{const E=oO(v),x=new Hx;return Object.assign(x,E),x})}}async cancel(e){var n,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const m=J6(e);u=me("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=$6(e);u=me("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=Z6(e,e);return a=me("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>ag(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W6(e);return a=me("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>dO(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hO{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mO=1024*1024*8,pO=3,gO=1e3,yO=2,Sf="x-goog-upload-status";async function _O(t,e,n){var i;const o=await Rw(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function vO(t,e,n){var i;const o=await Rw(t,e,n),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Sf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=sw(a),f=new Ty;return Object.assign(f,u),f}async function Rw(t,e,n){var i,o;let a=0,u=0,f=new tg(new Response),m="upload";for(a=t.size;u<a;){const h=Math.min(mO,a-u),v=t.slice(u,u+h);u+h>=a&&(m+=", finalize");let E=0,x=gO;for(;E<pO&&(f=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Sf]));)E++,await EO(x),x=x*yO;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Sf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function TO(t){return{size:t.size,type:t.type}}function EO(t){return new Promise(e=>setTimeout(e,t))}class xO{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _O(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vO(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SO{create(e,n,i){return new AO(e,n,i)}}class AO{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cS="x-goog-api-key";class bO{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(cS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wO="gl-node/";class CO{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=iU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new bO(this.apiKey);this.apiClient=new H3({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:wO+"web",uploader:new xO,downloader:new hO}),this.models=new a6(this.apiClient),this.live=new t6(this.apiClient,o,new SO),this.batches=new MV(this.apiClient),this.chats=new h4(this.models,this.apiClient),this.caches=new c4(this.apiClient),this.files=new S4(this.apiClient),this.operations=new l6(this.apiClient),this.authTokens=new A6(this.apiClient),this.tunings=new fO(this.apiClient),this.fileSearchStores=new K6(this.apiClient)}}const IO=new CO({apiKey:"PLACEHOLDER_API_KEY"}),NO=async t=>{const{studentName:e,course:n,university:i,workExperience:o,notes:a,country:u,templateFiles:f}=t,m=`You are a world-class Ivy League Admissions Consultant. 
  Your task is to write a highly personalized, compelling, and structurally perfect Personal Statement for a student.
  
  CRITICAL INSTRUCTIONS:
  1. Analyze the provided PDF "Style Guides" to understand the winning structure, tone, sentence variation, and narrative flow.
  2. DO NOT copy content from the style guides. Use them ONLY for structural and stylistic inspiration.
  3. The Personal Statement must be unique to the student's details provided.
  4. Tone: Academic, ambitious, reflective, and professional.
  5. Format: Standard Personal Statement format (Intro -> Academic Background -> Experience -> Why Course -> Why Uni -> Goals).
  `,v=[{text:`
  STUDENT PROFILE:
  - Name: ${e}
  - Target Course: ${n}
  - Target University: ${i}
  - Target Country: ${u}
  - Work/Academic Experience: ${o}
  - Additional Achievements/Notes: ${a}

  TASK:
  Write a complete 800-1000 word Personal Statement for this student. Return the response in clean Markdown format.
  `}];f.forEach(E=>{v.push({inlineData:{mimeType:E.mimeType,data:E.data}})});try{return(await IO.models.generateContent({model:"gemini-2.5-flash",contents:{role:"user",parts:v},config:{systemInstruction:m,temperature:.7,topK:40,topP:.95}})).text||"Failed to generate content."}catch(E){throw console.error("Gemini Generation Error:",E),new Error("AI Generation failed. Please check API Key or quotas.")}};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kO=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),dS=t=>{const e=kO(t);return e.charAt(0).toUpperCase()+e.slice(1)},kw=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),MO=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=oe.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...f},m)=>oe.createElement("svg",{ref:m,...DO,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:kw("lucide",o),...!a&&!MO(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,v])=>oe.createElement(h,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=oe.forwardRef(({className:i,...o},a)=>oe.createElement(PO,{ref:a,iconNode:e,className:kw(`lucide-${RO(dS(t))}`,`lucide-${t}`,i),...o}));return n.displayName=dS(t),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],VO=ze("bell",UO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wy=ze("book-open",LO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mw=ze("check",OO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ih=ze("chevron-right",qO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dw=ze("circle-alert",FO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lg=ze("circle-check-big",BO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Mu=ze("circle-plus",HO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pw=ze("circle-x",GO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uw=ze("clock",zO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],YO=ze("copy",jO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],$O=ze("cpu",KO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vw=ze("download",JO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Lw=ze("file-check",QO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vi=ze("file-text",XO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],sh=ze("globe",WO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fS=ze("layout-dashboard",ZO);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cy=ze("loader-circle",e5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],n5=ze("lock",t5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],s5=ze("log-out",i5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],o5=ze("menu",r5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Af=ze("message-square",a5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ow=ze("moon",l5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hS=ze("plus",u5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],d5=ze("send",c5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qw=ze("settings",f5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rh=ze("shield",h5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bf=ze("sparkles",m5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oh=ze("square-check-big",p5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Fw=ze("sun",g5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],za=ze("trash-2",y5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ll=ze("upload",_5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],T5=ze("user-plus",v5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bw=ze("user",E5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hw=ze("users",x5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ps=ze("x",S5),On=async(t,e,n)=>{try{await Br(at(xe,"audit_log"),{action:t,details:e,performedBy:n,timestamp:Date.now()})}catch(i){console.error("Failed to log action",i)}},Cs=async(t,e,n,i)=>{!t||t==="admin"||await Br(at(xe,"notifications"),{userId:t,title:e,message:n,timestamp:Date.now(),seen:!1,type:i})},A5=({role:t,activeTab:e,setActiveTab:n,mobileOpen:i,setMobileOpen:o,isDark:a,toggleTheme:u,unreadCount:f=0})=>{const E=(t==="student"?[{id:"dashboard",label:"Dashboard",icon:fS,roles:["student"]},{id:"applications",label:"Applications",icon:Lw,roles:["student"]},{id:"profile",label:"Profile Settings",icon:qw,roles:["student"]},{id:"support",label:"Support",icon:Af,roles:["student"]}]:[{id:"dashboard",label:"Dashboard",icon:fS,roles:["admin","super_admin"]},{id:"students",label:"Student Mgmt",icon:Hw,roles:["admin","super_admin"]},{id:"tasks",label:"Team Tasks",icon:oh,roles:["admin","super_admin"]},{id:"applications",label:"Applications",icon:vi,roles:["admin","super_admin"]},{id:"messages",label:"Messages",icon:Af,roles:["admin","super_admin"]},{id:"ai-gen",label:"AI Generator",icon:bf,roles:["admin","super_admin"]},{id:"super-admin",label:"Super Admin Controls",icon:rh,roles:["super_admin"]}]).filter(x=>x.roles.includes(t));return _.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-background text-gray-600 dark:text-gray-300 transition-transform transform duration-300 ${i?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:[_.jsxs("div",{className:"flex flex-col items-center justify-center h-28 px-6 pt-6",children:[_.jsx("img",{src:"/arc-logo.png",alt:"ARC",className:"w-20 h-20 object-contain mb-3"}),_.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Application Portal"}),_.jsx("button",{className:"md:hidden absolute top-4 right-4 text-gray-400",onClick:()=>o(!1),children:_.jsx(Ps,{size:24})})]}),_.jsx("div",{className:"px-4 py-3 mt-4",children:_.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Main Menu"})}),_.jsx("nav",{className:"px-3 space-y-1 flex-1 overflow-y-auto",children:E.map(x=>_.jsxs("button",{onClick:()=>{n(x.id),o(!1)},className:`flex items-center w-full px-4 py-3 text-sm font-medium transition-all rounded-lg group ${e===x.id?"bg-[#3ed8db] text-white shadow-md":"hover:bg-gray-100 dark:hover:bg-surface-highlight hover:text-gray-900 dark:hover:text-white"}`,children:[_.jsx(x.icon,{className:`w-5 h-5 mr-3 transition-colors ${e===x.id?"text-white":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"}`}),_.jsx("span",{className:e===x.id?"text-white":"",children:x.label}),x.id==="messages"&&f>0&&_.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:f}),x.id==="support"&&f>0&&_.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:f})]},x.id))}),_.jsxs("div",{className:"p-4 space-y-2",children:[_.jsxs("button",{onClick:u,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-surface-highlight rounded-lg hover:bg-gray-200 dark:hover:bg-surface transition",children:[a?_.jsx(Fw,{className:"w-4 h-4 mr-2"}):_.jsx(Ow,{className:"w-4 h-4 mr-2"}),a?"Light Mode":"Dark Mode"]}),_.jsxs("button",{onClick:()=>ZS(ni),className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/30 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",children:[_.jsx(s5,{className:"w-4 h-4 mr-2"})," Sign Out"]})]})]})},b5=({setUserProfile:t})=>{const[e,n]=oe.useState(!0),[i,o]=oe.useState("student"),[a,u]=oe.useState(""),[f,m]=oe.useState(""),[h,v]=oe.useState(""),[E,x]=oe.useState(!1),[w,U]=oe.useState(""),[q,V]=oe.useState(!1),[Q,ne]=oe.useState(""),[K,J]=oe.useState(localStorage.getItem("theme")!=="light"),ee=()=>{K?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),J(!1)):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),J(!0))},le=async R=>{R.preventDefault(),x(!0),U("");try{let I;if(e){try{I=await h1(ni,a,f)}catch(k){if(a==="areduconsultants@gmail.com"&&f==="ARedu123")I=await Dp(ni,a,f);else throw k}if(a==="areduconsultants@gmail.com"&&f==="ARedu123"){const k=mt(xe,"users",I.user.uid),F=await vf(k);if(F.exists()){const P=F.data();t({...P,role:"super_admin"});return}else{const P={uid:I.user.uid,email:I.user.email,displayName:"Super Admin",role:"super_admin",createdAt:Date.now(),profileCompletion:100};await Fa(k,P),t(P);return}}}else{I=await Dp(ni,a,f),await bu(I.user,{displayName:name});const k=i==="student"?"student":"admin",F={uid:I.user.uid,email:I.user.email,displayName:name,role:k,createdAt:Date.now(),profileCompletion:10};await Fa(mt(xe,"users",I.user.uid),F),k==="student"?(await Fa(mt(xe,"progress",I.user.uid),{studentId:I.user.uid,currentStage:"Document Collection",history:[{stage:"Document Collection",timestamp:Date.now(),completed:!0}]}),await On("USER_REGISTER",`Student registered: ${a}`,I.user.uid)):await On("USER_REGISTER",`Admin registered: ${a}`,I.user.uid)}const L=await vf(mt(xe,"users",I.user.uid));L.exists()&&t(L.data())}catch(I){U(I.message)}finally{x(!1)}},M=async R=>{if(R.preventDefault(),!!Q)try{await Br(at(xe,"notifications"),{userId:"super_admin",title:"Password Reset Request",message:`User ${Q} requested a password reset.`,timestamp:Date.now(),seen:!1,type:"warning"}),alert("Request sent to Super Admin. You will receive an email once processed."),V(!1),ne("")}catch(I){alert("Error: "+I.message)}};return _.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-background text-gray-900 dark:text-white flex items-center justify-center p-4 relative overflow-hidden transition-colors duration-300",children:[_.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[_.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[600px] h-[600px] bg-primary/10 rounded-full blur-[120px]"}),_.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-[120px]"})]}),_.jsxs("div",{className:"max-w-7xl w-full grid grid-cols-1 lg:grid-cols-2 gap-16 items-center z-10",children:[_.jsxs("div",{className:"hidden lg:block space-y-4",children:[_.jsx("img",{src:"/arc-logo.png",alt:"ARC",className:"w-32 h-auto mb-4 drop-shadow-2xl"}),_.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full border border-primary/30 bg-primary/10 text-primary text-xs font-bold tracking-wider uppercase",children:[_.jsx(bf,{className:"w-3 h-3 mr-2"})," 500+ Universities Available"]}),_.jsxs("h1",{className:"text-4xl font-bold leading-tight text-gray-900 dark:text-white",children:["AR Consultants",_.jsx("br",{}),_.jsx("span",{className:"text-primary",children:"Your Partner in Education"})]}),_.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 leading-relaxed max-w-lg",children:"Access top universities worldwide with expert guidance, personalised course selection, and end-to-end support for admissions and visas - all made smoother with intelligent tools."}),_.jsxs("div",{className:"flex gap-6 pt-2",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx($O,{className:"w-6 h-6 text-primary mb-1"}),_.jsx("span",{className:"font-bold text-sm",children:"AI Powered"}),_.jsx("span",{className:"text-xs text-gray-500",children:"Gemini 2.5 Integrated"})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx(sh,{className:"w-6 h-6 text-blue-500 mb-1"}),_.jsx("span",{className:"font-bold text-sm",children:"Global Reach"}),_.jsx("span",{className:"text-xs text-gray-500",children:"Major Study Destinations"})]})]})]}),_.jsxs("div",{className:"w-full max-w-md mx-auto relative group",children:[_.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary to-blue-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000"}),_.jsxs("div",{className:"relative glass-panel p-8 rounded-xl shadow-2xl bg-white/80 dark:bg-surface/80",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e?"Welcome Back":"Get Started"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e?"Sign in to access your dashboard.":"Create an account to get started."})]}),_.jsxs("div",{className:"flex gap-2 mb-6",children:[_.jsx("button",{type:"button",onClick:()=>o("student"),className:`flex-1 py-2.5 px-4 rounded-lg font-medium text-sm transition-all ${i==="student"?"bg-primary text-white shadow-lg shadow-primary/30":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:"Student Login"}),_.jsx("button",{type:"button",onClick:()=>o("admin"),className:`flex-1 py-2.5 px-4 rounded-lg font-medium text-sm transition-all ${i==="admin"?"bg-gray-800 dark:bg-gray-700 text-white shadow-lg":"bg-gray-100 dark:bg-white/5 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10"}`,children:"Admin Login"})]}),w&&_.jsxs("div",{className:"mb-4 p-3 text-sm text-red-600 dark:text-red-200 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded flex items-center",children:[_.jsx(Dw,{className:"w-4 h-4 mr-2"})," ",w]}),_.jsxs("form",{onSubmit:le,className:"space-y-5",children:[!e&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Full Name"}),_.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/50 border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"John Doe",value:h,onChange:R=>v(R.target.value)})]}),_.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Email Address"}),_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/50 border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"name@company.com",value:a,onChange:R=>u(R.target.value)})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:"Password"}),_.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/50 border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"",value:f,onChange:R=>m(R.target.value)})]})]}),e&&_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{type:"button",onClick:()=>V(!0),className:"text-xs text-primary hover:underline",children:"Forgot Password?"})}),_.jsx("button",{type:"submit",disabled:E,className:"w-full py-3.5 mt-2 bg-primary hover:bg-primary-hover text-white font-bold rounded-lg transition-all transform hover:scale-[1.02] shadow-lg flex items-center justify-center",children:E?"Processing...":e?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"mr-2",children:"Sign In"})," ",_.jsx(ih,{size:16})]}):"Create Account"})]}),_.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[_.jsxs("button",{type:"button",onClick:ee,className:"flex items-center px-3 py-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-surface-highlight rounded-lg hover:bg-gray-200 dark:hover:bg-surface transition",children:[K?_.jsx(Fw,{className:"w-4 h-4 mr-1.5"}):_.jsx(Ow,{className:"w-4 h-4 mr-1.5"}),K?"Light Mode":"Dark Mode"]}),_.jsxs("div",{className:"text-sm",children:[_.jsx("span",{className:"text-gray-500",children:e?"New user?":"Already registered?"}),_.jsx("button",{onClick:()=>n(!e),className:"ml-2 text-primary hover:text-primary-hover font-medium transition",children:e?"Create Account":"Sign In"})]})]})]})]})]}),q&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border p-6 rounded-xl w-full max-w-sm shadow-2xl",children:[_.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Reset Password"}),_.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Enter your email to notify the administrator."}),_.jsxs("form",{onSubmit:M,children:[_.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-black/50 border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary outline-none mb-4",placeholder:"name@company.com",value:Q,onChange:R=>ne(R.target.value)}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{type:"button",onClick:()=>V(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-white/10 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-white/20 transition",children:"Cancel"}),_.jsx("button",{type:"submit",className:"flex-1 py-2 bg-primary text-white rounded hover:bg-primary-hover transition",children:"Send Request"})]})]})]})})]})},w5=({profile:t})=>{const[e,n]=oe.useState([]),[i,o]=oe.useState(!1),[a,u]=oe.useState({total:0,inReview:0,accepted:0,rejected:0}),[f,m]=oe.useState([]),[h,v]=oe.useState([]),[E,x]=oe.useState("all"),[w,U]=oe.useState(null);if(oe.useEffect(()=>{if(t.role==="student"){const V=Ht(at(xe,"applications"),In("studentId","==",t.uid)),Q=on(V,ne=>{const K=ne.docs.map(J=>({...J.data(),id:J.id}));n(K),u({total:K.length,inReview:K.filter(J=>J.status==="In Review").length,accepted:K.filter(J=>J.status==="Accepted").length,rejected:K.filter(J=>J.status==="Rejected").length})});return()=>Q()}else if(t.role==="admin"||t.role==="super_admin"){const V=Ht(at(xe,"applications"),Vr("createdAt","desc")),Q=on(V,J=>{m(J.docs.map(ee=>({...ee.data(),id:ee.id})))}),ne=Ht(at(xe,"users")),K=on(ne,J=>{v(J.docs.map(ee=>ee.data()))});return()=>{Q(),K()}}},[t]),t.role==="student")return _.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Overview"}),_.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Welcome back, ",t.displayName]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Total Requests"}),_.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:a.total})]}),_.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:_.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Pending"}),_.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-2",children:"0"})]}),_.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center",children:_.jsx(Uw,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Assigned"}),_.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:a.inReview})]}),_.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:_.jsx(Bw,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Completed"}),_.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:a.accepted})]}),_.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:_.jsx(lg,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})})]}),_.jsxs("div",{className:"bg-gradient-to-r from-primary to-[#128a8d] p-8 rounded-2xl text-white shadow-xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32"}),_.jsxs("div",{className:"relative z-10",children:[_.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Make an Application"}),_.jsx("p",{className:"text-white/90 mb-6",children:"Click here to make a university application"}),_.jsxs("button",{onClick:()=>o(!0),className:"bg-white text-primary px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition flex items-center shadow-lg",children:[_.jsx(hS,{className:"w-5 h-5 mr-2"}),"New Application"]})]})]}),_.jsxs("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border rounded-xl overflow-hidden",children:[_.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-border",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Requests"}),_.jsx("button",{className:"text-sm text-primary hover:text-primary-hover transition",children:"View All "})]})}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full",children:[_.jsx("thead",{className:"bg-gray-50 dark:bg-surface-highlight border-b border-gray-200 dark:border-border",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Request ID"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Student Info"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Expected Collection"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Status"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:"Action"})]})}),_.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-border",children:e.length===0?_.jsx("tr",{children:_.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:'No applications yet. Click "New Request" to get started!'})}):e.slice(0,5).map(V=>_.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-surface-highlight/50 transition",children:[_.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:V.applicationNumber}),_.jsxs("td",{className:"px-6 py-4",children:[_.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-medium",children:V.fullName}),_.jsx("div",{className:"text-xs text-gray-500",children:V.targetUniversities[0]||"-"})]}),_.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:new Date(V.createdAt).toLocaleDateString()}),_.jsx("td",{className:"px-6 py-4",children:_.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${V.status==="Accepted"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":V.status==="In Review"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":V.status==="Rejected"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:V.status})}),_.jsx("td",{className:"px-6 py-4 text-sm",children:_.jsx("button",{className:"text-primary hover:text-primary-hover transition font-medium",children:"Details"})})]},V.id))})]})})]}),i&&_.jsx(ug,{onClose:()=>o(!1),profile:t})]});const q={applicationsReceived:f.filter(V=>V.status==="Pending"||V.status==="In Review").length,applicationsSubmitted:f.filter(V=>V.status==="Submitted"||V.status==="Accepted").length,studentsRegistered:h.filter(V=>V.role==="student").length,totalApplications:f.length};return _.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Dashboard"}),_.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Welcome back, ",t.displayName]})]}),_.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Current Role"}),_.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2 capitalize",children:t.role.replace("_"," ")})]}),_.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:_.jsx(rh,{className:"w-6 h-6 text-primary"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Applications Received"}),_.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:q.applicationsReceived})]}),_.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:_.jsx(vi,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Applications Submitted"}),_.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:q.applicationsSubmitted})]}),_.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:_.jsx(lg,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),_.jsx("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border p-6 rounded-xl",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Students Registered"}),_.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:q.studentsRegistered})]}),_.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:_.jsx(Hw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),_.jsxs("div",{className:"bg-primary p-6 rounded-xl flex items-center justify-between shadow-lg",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Submit Application on Behalf of Student"}),_.jsx("p",{className:"text-white/80 text-sm",children:"Create and submit applications directly from the admin portal"})]}),_.jsxs("button",{onClick:()=>o(!0),className:"bg-white text-primary px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition flex items-center shadow-lg",children:[_.jsx(hS,{className:"w-5 h-5 mr-2"}),"New Application"]})]}),_.jsxs("div",{className:"bg-white dark:bg-surface/50 border border-gray-200 dark:border-border rounded-xl overflow-hidden",children:[_.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-border",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Recent Activity"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>x("all"),className:`px-3 py-1 text-xs font-medium rounded-lg transition ${E==="all"?"bg-primary text-white":"bg-gray-100 dark:bg-surface-highlight text-gray-600 dark:text-gray-300"}`,children:"All"}),_.jsx("button",{onClick:()=>x("applications"),className:`px-3 py-1 text-xs font-medium rounded-lg transition ${E==="applications"?"bg-primary text-white":"bg-gray-100 dark:bg-surface-highlight text-gray-600 dark:text-gray-300"}`,children:"Applications Received"}),_.jsx("button",{onClick:()=>x("resets"),className:`px-3 py-1 text-xs font-medium rounded-lg transition ${E==="resets"?"bg-primary text-white":"bg-gray-100 dark:bg-surface-highlight text-gray-600 dark:text-gray-300"}`,children:"Reset Requests"})]})]})}),_.jsx("div",{className:"p-6",children:_.jsxs("div",{className:"space-y-3",children:[f.slice(0,5).map(V=>_.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-surface-highlight/50 border border-gray-200 dark:border-white/5 rounded-lg hover:bg-gray-100 dark:hover:bg-surface-highlight transition",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"w-2 h-2 bg-primary rounded-full shadow-[0_0_8px_rgba(62,216,219,0.6)]"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:V.fullName}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Application ",V.applicationNumber]})]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${V.status==="Accepted"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":V.status==="In Review"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:V.status}),_.jsx("span",{className:"text-xs text-gray-500 font-mono font-bold",children:new Date(V.createdAt).toLocaleDateString()}),_.jsx("button",{onClick:()=>U(V),className:"px-3 py-1.5 bg-primary text-white text-xs font-medium rounded-lg hover:bg-primary-hover transition",children:"View"})]})]},V.id)),f.length===0&&_.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent activity"})]})})]}),i&&_.jsx(ug,{onClose:()=>o(!1),profile:t}),w&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl w-full max-w-4xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[_.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-border flex justify-between items-center bg-gray-50 dark:bg-surface-highlight sticky top-0 z-10",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.fullName}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Application ID: ",w.applicationNumber]})]}),_.jsx("button",{onClick:()=>U(null),className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition",children:_.jsx(Ps,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Application Details"}),_.jsxs("div",{className:"space-y-2 text-sm",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-gray-500",children:"Status:"})," ",_.jsx("span",{className:"font-semibold",children:w.status})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-gray-500",children:"Highest Qualification:"})," ",_.jsx("span",{className:"font-semibold",children:w.highestQualification})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-gray-500",children:"Budget:"})," ",_.jsx("span",{className:"font-semibold",children:w.budgetPerYear})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-gray-500",children:"Submitted:"})," ",_.jsx("span",{className:"font-semibold",children:new Date(w.createdAt).toLocaleString()})]})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Target Courses"}),_.jsx("ul",{className:"space-y-1 text-sm",children:w.targetCourses.map((V,Q)=>_.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[" ",V]},Q))})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Target Countries"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:w.countries.map((V,Q)=>_.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:V},Q))})]}),w.documents&&w.documents.length>0&&_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-3",children:"Uploaded Documents"}),_.jsx("div",{className:"space-y-2",children:w.documents.map((V,Q)=>_.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-surface-highlight rounded-lg",children:[_.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:V.name}),_.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:"View"})]},Q))})]})]})]})})]})},ug=({onClose:t,profile:e})=>{const[n,i]=oe.useState(!1),[o,a]=oe.useState({fullName:e.displayName||"",targetCourses:[""],targetUniversities:[""],countries:[""],budgetPerYear:"",highestQualification:""}),[u,f]=oe.useState([]),m=(x,w,U)=>{const q=[...o[x]];q[w]=U,a({...o,[x]:q})},h=x=>{o[x].length<3&&a({...o,[x]:[...o[x],""]})},v=(x,w)=>{const U=o[x].filter((q,V)=>V!==w);a({...o,[x]:U.length?U:[""]})},E=async x=>{x.preventDefault(),i(!0);try{const w=`ARC-${new Date().getFullYear()}-${(new Date().getMonth()+1).toString().padStart(2,"0")}-${Math.floor(1e3+Math.random()*9e3)}`,U=[];for(const J of u){const ee=`applications/${w}/documents/${J.file.name}`,le=Po(Uo,ee);await il(le,J.file);const M=await sl(le);U.push({id:Math.random().toString(36).substr(2,9),name:J.file.name,url:M,type:J.type,uploadedAt:Date.now(),status:"Pending"})}let q=0;o.fullName&&q++,o.budgetPerYear&&q++,o.highestQualification&&q++,o.targetCourses[0]&&q++,o.targetUniversities[0]&&q++,o.countries[0]&&q++,U.length>0&&q++;const V=Math.round(q/7*100),Q={id:"",studentId:e.uid,applicationNumber:w,fullName:o.fullName,targetCourses:o.targetCourses.filter(Boolean),targetUniversities:o.targetUniversities.filter(Boolean),countries:o.countries.filter(Boolean),budgetPerYear:o.budgetPerYear,highestQualification:o.highestQualification,documents:U,status:"In Review",percentageCompleted:V,createdAt:Date.now(),lastUpdated:Date.now()};await Br(at(xe,"applications"),Q),await On("CREATE_APPLICATION",`Created application ${w}`,e.uid),await Cs("super_admin","New Application Submitted",`${o.fullName} submitted a new application (${w})`,"info");const ne=Ht(at(xe,"users"),In("role","==","admin")),K=await Hu(ne);for(const J of K.docs)await Cs(J.id,"New Application Submitted",`${o.fullName} submitted a new application (${w})`,"info");t(),alert("Application submitted successfully!")}catch(w){console.error("Error submitting application:",w),alert("Failed to submit application: "+w.message)}finally{i(!1)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 overflow-y-auto",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl w-full max-w-2xl shadow-2xl my-8 flex flex-col max-h-[90vh]",children:[_.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-border flex justify-between items-center sticky top-0 bg-white dark:bg-surface z-10 rounded-t-xl",children:[_.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Application Request"}),_.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_.jsx(Ps,{size:24})})]}),_.jsx("div",{className:"p-6 overflow-y-auto",children:_.jsxs("form",{onSubmit:E,className:"space-y-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-gray-100 dark:border-white/5 pb-2",children:"Personal Details"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Full Name"}),_.jsx("input",{required:!0,value:o.fullName,onChange:x=>a({...o,fullName:x.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Highest Qualification"}),_.jsx("input",{required:!0,value:o.highestQualification,onChange:x=>a({...o,highestQualification:x.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg",placeholder:"e.g. High School Diploma"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Budget Per Year"}),_.jsx("input",{required:!0,value:o.budgetPerYear,onChange:x=>a({...o,budgetPerYear:x.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg",placeholder:"e.g. $15,000 - $20,000"})]})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-gray-100 dark:border-white/5 pb-2",children:"Preferences (Max 3)"}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Target Courses"}),o.targetCourses.map((x,w)=>_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{required:!0,value:x,onChange:U=>m("targetCourses",w,U.target.value),className:"flex-1 p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg",placeholder:"e.g. Computer Science"}),o.targetCourses.length>1&&_.jsx("button",{type:"button",onClick:()=>v("targetCourses",w),className:"text-red-500",children:_.jsx(za,{size:18})})]},w)),o.targetCourses.length<3&&_.jsxs("button",{type:"button",onClick:()=>h("targetCourses"),className:"text-xs text-primary flex items-center",children:[_.jsx(Mu,{size:14,className:"mr-1"})," Add Course"]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Target Universities"}),o.targetUniversities.map((x,w)=>_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{required:!0,value:x,onChange:U=>m("targetUniversities",w,U.target.value),className:"flex-1 p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg",placeholder:"e.g. Oxford University"}),o.targetUniversities.length>1&&_.jsx("button",{type:"button",onClick:()=>v("targetUniversities",w),className:"text-red-500",children:_.jsx(za,{size:18})})]},w)),o.targetUniversities.length<3&&_.jsxs("button",{type:"button",onClick:()=>h("targetUniversities"),className:"text-xs text-primary flex items-center",children:[_.jsx(Mu,{size:14,className:"mr-1"})," Add University"]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1",children:"Target Countries"}),o.countries.map((x,w)=>_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{required:!0,value:x,onChange:U=>m("countries",w,U.target.value),className:"flex-1 p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg",placeholder:"e.g. UK"}),o.countries.length>1&&_.jsx("button",{type:"button",onClick:()=>v("countries",w),className:"text-red-500",children:_.jsx(za,{size:18})})]},w)),o.countries.length<3&&_.jsxs("button",{type:"button",onClick:()=>h("countries"),className:"text-xs text-primary flex items-center",children:[_.jsx(Mu,{size:14,className:"mr-1"})," Add Country"]})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-gray-100 dark:border-white/5 pb-2",children:"Documents"}),_.jsx("div",{className:"bg-gray-50 dark:bg-black/20 p-4 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:_.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[_.jsx(ll,{className:"w-8 h-8 text-gray-400 mb-2"}),_.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Upload relevant documents (Passport, Transcripts, etc.)"}),_.jsx("input",{type:"file",multiple:!0,onChange:x=>{x.target.files&&Array.from(x.target.files).forEach(w=>{f(U=>[...U,{file:w,type:"Other"}])})},className:"hidden",id:"file-upload"}),_.jsx("label",{htmlFor:"file-upload",className:"px-4 py-2 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-lg cursor-pointer hover:bg-gray-50 transition text-sm font-medium",children:"Select Files"})]})}),u.length>0&&_.jsx("div",{className:"space-y-2",children:u.map((x,w)=>_.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-black/20 p-2 rounded",children:[_.jsxs("div",{className:"flex items-center overflow-hidden",children:[_.jsx(vi,{size:16,className:"text-primary mr-2 flex-shrink-0"}),_.jsx("span",{className:"text-sm truncate",children:x.file.name})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("select",{value:x.type,onChange:U=>{const q=[...u];q[w].type=U.target.value,f(q)},className:"text-xs bg-white dark:bg-surface border border-gray-200 dark:border-border rounded p-1",children:[_.jsx("option",{value:"Personal Statement",children:"Personal Statement"}),_.jsx("option",{value:"CV",children:"CV"}),_.jsx("option",{value:"Academic Certificates",children:"Academic Certificates"}),_.jsx("option",{value:"Passport",children:"Passport"}),_.jsx("option",{value:"Other",children:"Other"})]}),_.jsx("button",{type:"button",onClick:()=>f(u.filter((U,q)=>q!==w)),className:"text-red-500",children:_.jsx(Ps,{size:16})})]})]},w))})]}),_.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-border flex justify-end gap-3",children:[_.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-lg border border-gray-200 dark:border-border hover:bg-gray-50 dark:hover:bg-white/5 transition",children:"Cancel"}),_.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 rounded-lg bg-primary text-white font-bold hover:bg-primary-hover transition shadow-lg flex items-center",children:n?"Submitting...":"Submit Application"})]})]})})]})})},C5=({profile:t})=>{const[e,n]=oe.useState([]),[i,o]=oe.useState(null),[a,u]=oe.useState("All"),[f,m]=oe.useState(!1);oe.useEffect(()=>{const E=Ht(at(xe,"applications"),Vr("createdAt","desc")),x=on(E,w=>{n(w.docs.map(U=>({...U.data(),id:U.id})))},w=>{console.error("Applications listener error:",w),n([])});return()=>x()},[]);const h=a==="All"?e:e.filter(E=>E.status===a),v=async(E,x)=>{await _i(mt(xe,"applications",E),{status:x,lastUpdated:Date.now()}),await On("UPDATE_APPLICATION_STATUS",`Updated application ${E} to ${x}`,t.uid)};return _.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:i?_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl overflow-hidden",children:[_.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-border flex justify-between items-center bg-gray-50 dark:bg-surface-highlight",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition",children:_.jsx(ih,{className:"rotate-180"})}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i.fullName}),_.jsxs("p",{className:"text-sm text-gray-500",children:["App ID: ",i.applicationNumber]})]})]}),_.jsx("div",{className:"flex gap-2",children:["In Review","Interview","Offer","Accepted","Rejected"].map(E=>_.jsx("button",{onClick:()=>v(i.id,E),className:`px-3 py-1 rounded text-xs font-bold border transition ${i.status===E?"bg-primary text-white border-primary":"bg-transparent text-gray-500 border-gray-300 dark:border-gray-600 hover:border-primary"}`,children:E},E))})]}),_.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-border pb-2",children:"Applicant Details"}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block",children:"Highest Qualification"})," ",_.jsx("span",{className:"text-gray-900 dark:text-white",children:i.highestQualification})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block",children:"Budget"})," ",_.jsx("span",{className:"text-gray-900 dark:text-white",children:i.budgetPerYear})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block",children:"Email"})," ",_.jsx("span",{className:"text-gray-900 dark:text-white",children:t.email})]})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-border pb-2",children:"Preferences"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"Target Courses"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:i.targetCourses.map(E=>_.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs",children:E},E))})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"Target Universities"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:i.targetUniversities.map(E=>_.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:E},E))})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500 uppercase block mb-1",children:"Target Countries"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:i.countries.map(E=>_.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs",children:E},E))})]})]})]}),_.jsxs("div",{className:"md:col-span-2",children:[_.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 border-b border-gray-200 dark:border-border pb-2",children:"Documents"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:i.documents.map((E,x)=>_.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-surface-highlight/20 rounded border border-gray-200 dark:border-border",children:[_.jsx(vi,{className:"text-primary mr-3"}),_.jsxs("div",{className:"overflow-hidden",children:[_.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:E.name}),_.jsx("div",{className:"text-xs text-gray-500",children:E.type})]})]},x))})]})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Applications"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage and review student applications"})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx("div",{className:"flex bg-gray-100 dark:bg-surface border border-gray-200 dark:border-border rounded-lg p-1",children:["All","In Review","Interview","Offer","Accepted","Rejected"].map(E=>_.jsx("button",{onClick:()=>u(E),className:`px-3 py-1.5 text-xs font-bold rounded-md transition ${a===E?"bg-white dark:bg-surface-highlight text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"}`,children:E},E))}),_.jsxs("button",{onClick:()=>m(!0),className:"bg-primary text-white px-4 py-2 rounded-lg font-bold hover:bg-primary-hover shadow-lg shadow-primary/20 transition flex items-center",children:[_.jsx(Mu,{className:"w-5 h-5 mr-2"})," New Application"]})]})]}),f&&_.jsx(ug,{profile:t,onClose:()=>m(!1)}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(E=>_.jsxs("div",{onClick:()=>o(E),className:"glass-panel p-6 rounded-xl bg-white dark:bg-surface/50 border border-gray-200 dark:border-border hover:border-primary/50 cursor-pointer transition group relative overflow-hidden",children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider ${E.status==="Offer"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":E.status==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:E.status}),_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono font-bold",children:new Date(E.createdAt).toLocaleDateString()})]}),_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1",children:E.fullName}),_.jsx("p",{className:"text-sm text-gray-500 mb-4",children:E.applicationNumber}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[_.jsx(wy,{size:14,className:"mr-2 text-primary"}),_.jsx("span",{className:"truncate",children:E.targetCourses[0]}),E.targetCourses.length>1&&_.jsxs("span",{className:"ml-1 text-gray-400",children:["+",E.targetCourses.length-1]})]}),_.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[_.jsx(sh,{size:14,className:"mr-2 text-primary"}),_.jsx("span",{className:"truncate",children:E.countries[0]})]})]})]},E.id))})]})})},I5=({profile:t})=>{const[e,n]=oe.useState([]),[i,o]=oe.useState([]),[a,u]=oe.useState({totalStudents:0,totalAdmins:0}),[f,m]=oe.useState(!1),[h,v]=oe.useState("users"),[E,x]=oe.useState(null),[w,U]=oe.useState(""),[q,V]=oe.useState(""),[Q,ne]=oe.useState(""),[K,J]=oe.useState("admin"),[ee,le]=oe.useState(!1),[M,R]=oe.useState([]),[I,L]=oe.useState({displayName:t.displayName||"",email:t.email||"",password:"",photoURL:t.photoURL||""}),[k,F]=oe.useState(!1),P=oe.useRef(null);oe.useEffect(()=>{const D=Ht(at(xe,"users")),X=on(D,ue=>{const de=ue.docs.map(ve=>ve.data());n(de),u({totalStudents:de.filter(ve=>ve.role==="student").length,totalAdmins:de.filter(ve=>ve.role==="admin").length})});return()=>X()},[]),oe.useEffect(()=>{const D=Ht(at(xe,"audit_log"),Vr("timestamp","desc"),Lb(50)),X=on(D,ue=>o(ue.docs.map(de=>({...de.data(),id:de.id}))));return()=>X()},[]),oe.useEffect(()=>{const D=Ht(at(xe,"notifications"),In("title","==","Password Reset Request"),In("seen","==",!1)),X=on(D,ue=>R(ue.docs.map(de=>({...de.data(),id:de.id}))));return()=>X()},[]);const Pe=async D=>{const X=D.message.split(" ")[1];if(X&&confirm(`Send password reset email to ${X} and mark request as resolved?`))try{await bT(ni,X),await _i(mt(xe,"notifications",D.id),{seen:!0}),await On("PASSWORD_RESET",`Processed reset for ${X}`,t.uid),alert("Reset email sent and request marked as resolved.")}catch(ue){alert("Error: "+ue.message)}},we=async(D,X)=>{confirm(`Are you sure you want to change this user's role to ${X}?`)&&(await _i(mt(xe,"users",D),{role:X}),await On("ROLE_CHANGE",`Changed ${D} role to ${X}`,t.uid))},$=async D=>{if(confirm(`Are you sure you want to delete ${D.displayName}? This removes their database access.`))try{await cy(mt(xe,"users",D.uid)),await On("USER_DELETE",`Deleted user data for ${D.email}`,t.uid),alert("User data removed. Note: Auth account still exists.")}catch(X){alert("Error: "+X.message)}},ce=async D=>{D.preventDefault(),le(!0);try{const X=pg(iw,"Secondary"),ue=cA(X),de=await Dp(ue,w,q);await bu(de.user,{displayName:Q});const ve={uid:de.user.uid,email:w,displayName:Q,role:K,createdAt:Date.now(),profileCompletion:0};await Fa(mt(xe,"users",de.user.uid),ve),K==="student"&&await Fa(mt(xe,"progress",de.user.uid),{studentId:de.user.uid,currentStage:"Document Collection",history:[{stage:"Document Collection",timestamp:Date.now(),completed:!0}]}),await ZS(ue),await On("USER_CREATE",`Created ${K}: ${w}`,t.uid),alert("User created successfully!"),m(!1),U(""),V(""),ne("")}catch(X){alert("Error creating user: "+X.message)}finally{le(!1)}},_e=async D=>{if(confirm(`Send password reset email to ${D}?`))try{await bT(ni,D),alert("Reset email sent."),await On("PASSWORD_RESET",`Sent reset email to ${D}`,t.uid)}catch(X){alert("Error: "+X.message)}},He=async D=>{D.preventDefault(),F(!0);try{I.displayName!==t.displayName&&(await bu(ni.currentUser,{displayName:I.displayName}),await _i(mt(xe,"users",t.uid),{displayName:I.displayName})),I.email!==t.email&&alert("Email update requires recent login. Please re-authenticate to update email."),I.password&&await WS(ni.currentUser,I.password),await On("PROFILE_UPDATE","Updated own profile settings",t.uid),alert("Profile updated successfully!"),L(X=>({...X,password:""}))}catch(X){alert("Error updating profile: "+X.message)}finally{F(!1)}},Qe=async D=>{if(D.target.files&&D.target.files[0]){const X=D.target.files[0],ue=Po(Uo,`profiles/${t.uid}`);await il(ue,X);const de=await sl(ue);await bu(ni.currentUser,{photoURL:de}),await _i(mt(xe,"users",t.uid),{photoURL:de}),L(ve=>({...ve,photoURL:de}))}};return _.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Super Admin Controls"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage users, system settings, and your account"})]}),_.jsxs("div",{className:"flex bg-gray-100 dark:bg-surface border border-gray-200 dark:border-border rounded-lg p-1",children:[_.jsx("button",{onClick:()=>v("users"),className:`px-4 py-2 text-sm font-medium rounded-md transition ${h==="users"?"bg-white dark:bg-surface-highlight text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"}`,children:"Users"}),_.jsx("button",{onClick:()=>v("settings"),className:`px-4 py-2 text-sm font-medium rounded-md transition ${h==="settings"?"bg-white dark:bg-surface-highlight text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"}`,children:"Account Settings"}),_.jsx("button",{onClick:()=>v("logs"),className:`px-4 py-2 text-sm font-medium rounded-md transition ${h==="logs"?"bg-white dark:bg-surface-highlight text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-900 dark:hover:text-gray-300"}`,children:"Audit Logs"})]})]}),h==="users"&&_.jsxs("div",{className:"space-y-6",children:[_.jsx("div",{className:"flex justify-end",children:_.jsxs("button",{onClick:()=>m(!f),className:"bg-primary text-white px-4 py-2 rounded-lg flex items-center hover:bg-primary-hover shadow-lg shadow-primary/20 transition",children:[_.jsx(T5,{className:"w-4 h-4 mr-2"})," Add User"]})}),f&&_.jsxs("div",{className:"glass-panel p-6 rounded-lg animate-in fade-in slide-in-from-top-4 bg-white dark:bg-surface/50",children:[_.jsx("h3",{className:"font-bold mb-4 text-gray-700 dark:text-gray-200",children:"Create New User"}),_.jsxs("form",{onSubmit:ce,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[_.jsx("input",{required:!0,placeholder:"Full Name",className:"bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border p-3 rounded text-gray-900 dark:text-white focus:border-primary outline-none",value:Q,onChange:D=>ne(D.target.value)}),_.jsx("input",{required:!0,placeholder:"Email",type:"email",className:"bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border p-3 rounded text-gray-900 dark:text-white focus:border-primary outline-none",value:w,onChange:D=>U(D.target.value)}),_.jsx("input",{required:!0,placeholder:"Password",type:"password",className:"bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border p-3 rounded text-gray-900 dark:text-white focus:border-primary outline-none",value:q,onChange:D=>V(D.target.value)}),_.jsxs("select",{className:"bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border p-3 rounded text-gray-900 dark:text-white focus:border-primary outline-none",value:K,onChange:D=>J(D.target.value),children:[_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"admin",children:"Admin"}),_.jsx("option",{value:"super_admin",children:"Super Admin"})]}),_.jsx("button",{disabled:ee,type:"submit",className:"md:col-span-2 bg-green-600 text-white p-3 rounded hover:bg-green-700 font-bold shadow-lg shadow-green-900/50",children:ee?"Creating...":"Create User"})]})]}),M.length>0&&_.jsxs("div",{className:"glass-panel p-6 rounded-lg bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800",children:[_.jsxs("h3",{className:"font-bold text-red-700 dark:text-red-300 mb-4 flex items-center",children:[_.jsx(Dw,{className:"mr-2"})," Password Reset Requests"]}),_.jsx("div",{className:"space-y-3",children:M.map(D=>_.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-black/40 p-3 rounded border border-red-100 dark:border-red-900/30",children:[_.jsxs("div",{children:[_.jsx("div",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm",children:D.message}),_.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(D.timestamp).toLocaleString()})]}),_.jsx("button",{onClick:()=>Pe(D),className:"bg-red-600 text-white px-3 py-1.5 rounded text-xs font-bold hover:bg-red-700 transition shadow-sm",children:"Reset Password"})]},D.id))})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[_.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-surface-highlight rounded border-l-4 border-primary shadow-lg",children:[_.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider",children:"Total Students"}),_.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:a.totalStudents})]}),_.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-surface-highlight rounded border-l-4 border-blue-500 shadow-lg",children:[_.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider",children:"Total Admins"}),_.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:a.totalAdmins})]})]}),_.jsxs("div",{className:"glass-panel rounded-lg overflow-hidden bg-white dark:bg-surface/50",children:[_.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-border bg-gray-50 dark:bg-white/5 font-bold text-gray-700 dark:text-gray-200",children:"User Management"}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-sm text-left",children:[_.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-100 dark:bg-surface-highlight/50",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3",children:"User"}),_.jsx("th",{className:"px-6 py-3",children:"Role"}),_.jsx("th",{className:"px-6 py-3",children:"Actions"})]})}),_.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-border",children:e.map(D=>_.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[_.jsxs("td",{className:"px-6 py-4",children:[_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:D.displayName}),_.jsx("div",{className:"text-xs text-gray-500",children:D.email})]}),_.jsx("td",{className:"px-6 py-4",children:_.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider
                                                    ${D.role==="super_admin"?"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-200 border border-purple-200 dark:border-purple-800":D.role==="admin"?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800":"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-200 border border-green-200 dark:border-green-800"}`,children:D.role.replace("_"," ")})}),_.jsx("td",{className:"px-6 py-4",children:_.jsx("button",{onClick:()=>x(D),className:"px-3 py-1 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded hover:bg-gray-200 dark:hover:bg-surface transition",children:"Manage"})})]},D.uid))})]})})]})]}),h==="settings"&&_.jsxs("div",{className:"glass-panel p-8 rounded-xl max-w-2xl mx-auto bg-white dark:bg-surface/50",children:[_.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Account Settings"}),_.jsxs("div",{className:"flex items-center mb-8",children:[_.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var D;return(D=P.current)==null?void 0:D.click()},children:[_.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-surface-highlight overflow-hidden border-4 border-white dark:border-surface shadow-lg",children:I.photoURL?_.jsx("img",{src:I.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-2xl font-bold",children:I.displayName.charAt(0)})}),_.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:_.jsx(ll,{className:"text-white w-6 h-6"})})]}),_.jsx("input",{type:"file",ref:P,onChange:Qe,className:"hidden",accept:"image/*"}),_.jsxs("div",{className:"ml-6",children:[_.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white",children:t.displayName}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t.email}),_.jsx("p",{className:"text-primary text-xs font-bold uppercase mt-1",children:t.role.replace("_"," ")})]})]}),_.jsxs("form",{onSubmit:He,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),_.jsx("input",{type:"text",value:I.displayName,onChange:D=>L({...I,displayName:D.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:border-primary outline-none"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),_.jsx("input",{type:"email",value:I.email,onChange:D=>L({...I,email:D.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:border-primary outline-none"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password (leave blank to keep current)"}),_.jsx("input",{type:"password",value:I.password,onChange:D=>L({...I,password:D.target.value}),className:"w-full p-3 bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:border-primary outline-none",placeholder:""})]}),_.jsx("div",{className:"pt-4",children:_.jsx("button",{type:"submit",disabled:k,className:"px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-primary-hover shadow-lg shadow-primary/20 transition w-full md:w-auto",children:k?"Saving Changes...":"Save Changes"})})]})]}),h==="logs"&&_.jsxs("div",{className:"glass-panel rounded-lg overflow-hidden bg-white dark:bg-surface/50",children:[_.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-border bg-gray-50 dark:bg-white/5 font-bold text-gray-700 dark:text-gray-200",children:"System Audit Logs"}),_.jsx("div",{className:"max-h-[600px] overflow-y-auto p-4 space-y-2 custom-scrollbar",children:i.map(D=>_.jsxs("div",{className:"text-xs flex justify-between border-b border-gray-200 dark:border-border pb-2 last:border-0",children:[_.jsxs("div",{children:[_.jsxs("span",{className:"font-bold text-primary",children:["[",D.action,"]"]})," ",_.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:D.details})]}),_.jsx("span",{className:"text-gray-500 dark:text-gray-600 font-mono",children:new Date(D.timestamp).toLocaleString()})]},D.id))})]}),E&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[_.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-border flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"Manage User"}),_.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-white",children:_.jsx(Ps,{size:20})})]}),_.jsxs("div",{className:"p-6 space-y-4",children:[_.jsxs("div",{className:"flex items-center mb-4",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xl mr-4",children:E.displayName.charAt(0)}),_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:E.displayName}),_.jsx("p",{className:"text-sm text-gray-500",children:E.email}),_.jsx("span",{className:"text-xs font-mono bg-gray-100 dark:bg-white/5 px-2 py-1 rounded mt-1 inline-block",children:E.role})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("button",{onClick:()=>{_e(E.email),x(null)},className:"w-full flex items-center p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-white/5 transition text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-white/10",children:[_.jsx(n5,{className:"w-5 h-5 mr-3"})," Send Password Reset Email"]}),E.role==="student"&&_.jsxs("button",{onClick:()=>{we(E.uid,"admin"),x(null)},className:"w-full flex items-center p-3 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-900/30",children:[_.jsx(rh,{className:"w-5 h-5 mr-3"})," Promote to Admin"]}),E.role==="admin"&&_.jsxs("button",{onClick:()=>{we(E.uid,"student"),x(null)},className:"w-full flex items-center p-3 rounded-lg hover:bg-orange-50 dark:hover:bg-orange-900/20 transition text-orange-600 dark:text-orange-400 border border-orange-200 dark:border-orange-900/30",children:[_.jsx(Bw,{className:"w-5 h-5 mr-3"})," Demote to Student"]}),_.jsxs("button",{onClick:()=>{$(E),x(null)},className:"w-full flex items-center p-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition text-red-600 dark:text-red-400 border border-red-200 dark:border-red-900/30",children:[_.jsx(za,{className:"w-5 h-5 mr-3"})," Delete Account"]})]})]})]})})]})},N5=({profile:t})=>{const[e,n]=oe.useState({displayName:t.displayName||"",targetCourse:t.targetCourse||"",targetCountry:t.targetCountry||"",budget:t.budget||"",highestQualification:t.highestQualification||""}),[i,o]=oe.useState(!1),[a,u]=oe.useState(""),[f,m]=oe.useState(""),[h,v]=oe.useState(""),E=U=>{n({...e,[U.target.name]:U.target.value})},x=async U=>{if(U.target.files&&U.target.files[0]){const q=U.target.files[0],V=Po(Uo,`profiles/${t.uid}`);await il(V,q);const Q=await sl(V);await bu(ni.currentUser,{photoURL:Q}),await _i(mt(xe,"users",t.uid),{photoURL:Q}),alert("Profile photo updated!")}},w=async U=>{U.preventDefault(),o(!0),v("");try{if(await _i(mt(xe,"users",t.uid),e),a){if(a!==f){v("Passwords do not match"),o(!1);return}if(a.length<6){v("Password must be at least 6 characters"),o(!1);return}await WS(ni.currentUser,a),u(""),m("")}await On("PROFILE_UPDATE","Updated profile details",t.uid),alert("Profile settings saved successfully!")}catch(q){console.error(q),alert("Error saving details: "+q.message)}finally{o(!1)}};return _.jsxs("div",{className:"glass-panel p-8 rounded-xl max-w-2xl mx-auto bg-white dark:bg-surface/50",children:[_.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[_.jsx(qw,{className:"mr-3 text-primary"})," Profile Settings"]}),_.jsxs("div",{className:"mb-8 flex flex-col items-center",children:[_.jsxs("div",{className:"relative w-24 h-24 mb-4",children:[_.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-tr from-primary to-cyan-700 flex items-center justify-center text-white text-3xl font-bold shadow-lg overflow-hidden",children:t.photoURL?_.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):t.displayName.charAt(0)}),_.jsxs("label",{htmlFor:"photo-upload",className:"absolute bottom-0 right-0 bg-white dark:bg-surface border border-gray-200 dark:border-border p-1.5 rounded-full cursor-pointer shadow-md hover:bg-gray-50 transition",children:[_.jsx(ll,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),_.jsx("input",{id:"photo-upload",type:"file",className:"hidden",accept:"image/*",onChange:x})]})]}),_.jsx("p",{className:"text-sm text-gray-500",children:"Click icon to change profile photo"})]}),_.jsxs("form",{onSubmit:w,className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),_.jsx("input",{type:"text",name:"displayName",value:e.displayName,onChange:E,className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary outline-none transition",required:!0})]}),_.jsxs("div",{className:"border-t border-gray-200 dark:border-border pt-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),_.jsx("input",{type:"password",value:a,onChange:U=>u(U.target.value),className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary outline-none transition",placeholder:"Leave blank to keep current"})]}),a&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),_.jsx("input",{type:"password",value:f,onChange:U=>m(U.target.value),className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-primary outline-none transition"})]}),h&&_.jsx("p",{className:"text-red-500 text-sm",children:h})]})]}),_.jsx("div",{className:"flex justify-end pt-4",children:_.jsxs("button",{type:"submit",disabled:i,className:"bg-primary text-white px-8 py-3 rounded-lg font-bold hover:bg-primary-hover shadow-lg shadow-primary/20 transition flex items-center",children:[i?_.jsx(Cy,{className:"w-5 h-5 animate-spin mr-2"}):_.jsx(Mw,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})},R5=({profile:t})=>{const[e,n]=oe.useState([]),[i,o]=oe.useState(null);return oe.useEffect(()=>{const a=Ht(at(xe,"applications"),In("studentId","==",t.uid)),u=on(a,f=>{n(f.docs.map(m=>({...m.data(),id:m.id})))});return()=>u()},[t.uid]),_.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:"My Applications"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Track the status of your university applications"})]}),e.length===0?_.jsxs("div",{className:"text-center py-12 bg-white dark:bg-surface/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700",children:[_.jsx(vi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),_.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No applications yet"}),_.jsx("p",{className:"text-gray-500 mt-1",children:"Contact an admin to start your application process."})]}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>_.jsxs("div",{onClick:()=>o(a),className:"glass-panel p-6 rounded-xl bg-white dark:bg-surface/50 border border-gray-200 dark:border-border hover:border-primary/50 cursor-pointer transition group relative overflow-hidden",children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider ${a.status==="Accepted"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":a.status==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:a.status}),_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono font-bold",children:new Date(a.createdAt).toLocaleDateString()})]}),_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1",children:a.fullName}),_.jsx("p",{className:"text-sm text-gray-500 mb-4",children:a.applicationNumber}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[_.jsx(wy,{size:14,className:"mr-2 text-primary"}),_.jsx("span",{className:"truncate",children:a.targetCourses[0]})]}),_.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[_.jsx(sh,{size:14,className:"mr-2 text-primary"}),_.jsx("span",{className:"truncate",children:a.countries[0]})]})]})]},a.id))}),i&&_.jsx(k5,{app:i,onClose:()=>o(null),profile:t})]})},k5=({app:t,onClose:e,profile:n})=>{const[i,o]=oe.useState(""),[a,u]=oe.useState(null),[f,m]=oe.useState(!1),h=async v=>{if(v.preventDefault(),!(!i&&!a)){m(!0);try{let E="";if(a){const q=Po(Uo,`applications/${t.id}/addendum/${a.name}`);await il(q,a),E=await sl(q)}const x={id:Math.random().toString(36).substr(2,9),text:i,fileUrl:E,fileName:a?a.name:void 0,createdAt:Date.now(),createdBy:n.uid,authorName:n.displayName},w=mt(xe,"applications",t.id),U=await vf(w);if(U.exists()){const V=U.data().addendums||[];await _i(w,{addendums:[...V,x],lastUpdated:Date.now()})}o(""),u(null),alert("Addendum submitted successfully")}catch(E){console.error(E),alert("Failed to submit addendum")}finally{m(!1)}}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl w-full max-w-4xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[_.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-border flex justify-between items-center bg-gray-50 dark:bg-surface-highlight sticky top-0 z-10",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.fullName}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Application ID: ",t.applicationNumber]})]}),_.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition",children:_.jsx(Ps,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"p-6 space-y-8",children:[_.jsx("div",{className:`p-4 rounded-lg flex items-center justify-between ${t.status==="Accepted"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":t.status==="Rejected"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-white/50 rounded-full",children:t.status==="Accepted"?_.jsx(lg,{className:"w-5 h-5"}):t.status==="Rejected"?_.jsx(Pw,{className:"w-5 h-5"}):_.jsx(Uw,{className:"w-5 h-5"})}),_.jsxs("div",{children:[_.jsxs("p",{className:"font-bold text-lg",children:["Status: ",t.status]}),_.jsxs("p",{className:"text-xs opacity-80",children:["Last updated: ",new Date(t.lastUpdated||t.createdAt).toLocaleString()]})]})]})}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{children:[_.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[_.jsx(wy,{className:"w-4 h-4 mr-2 text-primary"})," Application Details"]}),_.jsxs("div",{className:"bg-gray-50 dark:bg-surface-highlight/50 rounded-lg p-4 space-y-3 text-sm",children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{className:"text-gray-500",children:"Highest Qualification"})," ",_.jsx("span",{className:"font-semibold",children:t.highestQualification})]}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{className:"text-gray-500",children:"Budget (Per Year)"})," ",_.jsx("span",{className:"font-semibold",children:t.budgetPerYear})]}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{className:"text-gray-500",children:"Submitted Date"})," ",_.jsx("span",{className:"font-semibold",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),_.jsxs("div",{children:[_.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[_.jsx(sh,{className:"w-4 h-4 mr-2 text-primary"})," Preferences"]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Target Courses"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:t.targetCourses.map((v,E)=>_.jsx("span",{className:"px-2 py-1 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded text-xs font-medium",children:v},E))})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Target Countries"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:t.countries.map((v,E)=>_.jsx("span",{className:"px-2 py-1 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded text-xs font-medium",children:v},E))})]})]})]})]}),_.jsxs("div",{children:[_.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[_.jsx(vi,{className:"w-4 h-4 mr-2 text-primary"})," Submitted Documents"]}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.documents.map((v,E)=>_.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg hover:border-primary transition group",children:[_.jsx("div",{className:"p-2 bg-white dark:bg-surface rounded-lg mr-3 group-hover:text-primary transition-colors",children:_.jsx(vi,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-sm font-medium truncate",children:v.name}),_.jsx("p",{className:"text-xs text-gray-500",children:v.type})]}),_.jsx(Vw,{className:"w-4 h-4 text-gray-400 group-hover:text-primary"})]},E))})]}),_.jsxs("div",{className:"border-t border-gray-200 dark:border-border pt-8",children:[_.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[_.jsx(Af,{className:"w-4 h-4 mr-2 text-primary"})," Addendum & Updates"]}),t.addendums&&t.addendums.length>0&&_.jsx("div",{className:"mb-6 space-y-4",children:t.addendums.map((v,E)=>_.jsxs("div",{className:"bg-gray-50 dark:bg-surface-highlight/30 p-4 rounded-lg border border-gray-100 dark:border-white/5",children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsx("span",{className:"font-semibold text-sm",children:v.authorName}),_.jsx("span",{className:"text-xs text-gray-500",children:new Date(v.createdAt).toLocaleString()})]}),_.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:v.text}),v.fileUrl&&_.jsxs("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center text-xs text-primary hover:underline",children:[_.jsx(vi,{className:"w-3 h-3 mr-1"})," ",v.fileName||"Attached File"]})]},E))}),_.jsxs("form",{onSubmit:h,className:"bg-gray-50 dark:bg-surface-highlight p-4 rounded-lg border border-gray-200 dark:border-border",children:[_.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Add Note or Document"}),_.jsx("textarea",{value:i,onChange:v=>o(v.target.value),placeholder:"Type your message or additional information here...",className:"w-full p-3 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-lg text-sm mb-3 focus:ring-2 focus:ring-primary outline-none",rows:3}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center",children:[_.jsxs("label",{className:"cursor-pointer flex items-center text-xs text-gray-500 hover:text-primary transition",children:[_.jsx(ll,{className:"w-4 h-4 mr-1"}),a?a.name:"Attach File",_.jsx("input",{type:"file",className:"hidden",onChange:v=>v.target.files&&u(v.target.files[0])})]}),a&&_.jsx("button",{type:"button",onClick:()=>u(null),className:"ml-2 text-red-500",children:_.jsx(Ps,{className:"w-3 h-3"})})]}),_.jsx("button",{type:"submit",disabled:f||!i&&!a,className:"px-4 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover disabled:opacity-50 transition",children:f?"Sending...":"Submit Addendum"})]})]})]})]})]})})},M5=({profile:t,setSelectedStudentId:e})=>{const[n,i]=oe.useState([]);return oe.useEffect(()=>{const o=Ht(at(xe,"users"),In("role","==","student"));Hu(o).then(a=>i(a.docs.map(u=>u.data())))},[]),_.jsxs("div",{className:"space-y-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Student Management"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(o=>_.jsxs("div",{className:"glass-panel p-6 rounded-lg hover:border-primary/50 transition cursor-pointer group bg-white dark:bg-surface/50",onClick:()=>e(o.uid),children:[_.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-surface-highlight border border-gray-200 dark:border-border flex items-center justify-center text-gray-900 dark:text-white text-xl font-bold group-hover:bg-primary group-hover:text-white transition",children:o.displayName.charAt(0)}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-primary transition",children:o.displayName}),_.jsx("p",{className:"text-sm text-gray-500",children:o.email})]})]}),_.jsx("div",{className:"flex justify-between mt-4",children:_.jsx("button",{className:"w-full py-2 bg-gray-50 dark:bg-white/5 text-gray-600 dark:text-gray-300 text-sm font-medium rounded border border-gray-200 dark:border-white/10 group-hover:bg-primary group-hover:text-white group-hover:border-primary transition",children:"Manage Student"})})]},o.uid))})]})},D5=({profile:t})=>{const[e,n]=oe.useState({studentName:"",country:"",course:"",university:"",details:""}),[i,o]=oe.useState(""),[a,u]=oe.useState(!1),[f,m]=oe.useState([]),[h,v]=oe.useState("generate");oe.useEffect(()=>{const w=Ht(at(xe,"personal_statements"),In("generatedBy","==",t.uid),Vr("createdAt","desc")),U=on(w,q=>{m(q.docs.map(V=>({...V.data(),id:V.id})))},q=>{console.error("Personal statements listener error:",q),m([])});return()=>U()},[t.uid]);const E=async()=>{if(!(!e.studentName||!e.course)){u(!0);try{const w=await NO({studentName:e.studentName,course:e.course,university:e.university||"university",workExperience:e.details,notes:e.details,country:e.country||"abroad",templateFiles:[]});o(w),await Br(at(xe,"personal_statements"),{...e,content:w,generatedBy:t.uid,createdAt:Date.now()})}catch(w){console.error(w),alert("Failed to generate. Please try again.")}u(!1)}},x=()=>{const w=document.createElement("a"),U=new Blob([i],{type:"text/plain"});w.href=URL.createObjectURL(U),w.download=`${e.studentName}_PS.txt`,document.body.appendChild(w),w.click()};return _.jsxs("div",{className:"glass-panel p-8 rounded-xl bg-white dark:bg-surface/50 min-h-[600px]",children:[_.jsxs("div",{className:"flex justify-between items-center mb-8",children:[_.jsxs("h3",{className:"font-bold text-2xl text-gray-900 dark:text-white flex items-center",children:[_.jsx(bf,{className:"mr-2 text-primary"})," AI Personal Statement Generator"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>v("generate"),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${h==="generate"?"bg-primary text-white":"bg-gray-100 dark:bg-surface text-gray-600 dark:text-gray-300"}`,children:"Generator"}),_.jsx("button",{onClick:()=>v("history"),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${h==="history"?"bg-primary text-white":"bg-gray-100 dark:bg-surface text-gray-600 dark:text-gray-300"}`,children:"History"})]})]}),h==="generate"?_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Student Name"}),_.jsx("input",{className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg outline-none focus:border-primary",value:e.studentName,onChange:w=>n({...e,studentName:w.target.value}),placeholder:"e.g. John Doe"})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Country"}),_.jsx("input",{className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg outline-none focus:border-primary",value:e.country,onChange:w=>n({...e,country:w.target.value}),placeholder:"e.g. UK"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target University"}),_.jsx("input",{className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg outline-none focus:border-primary",value:e.university,onChange:w=>n({...e,university:w.target.value}),placeholder:"e.g. Oxford"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Name"}),_.jsx("input",{className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg outline-none focus:border-primary",value:e.course,onChange:w=>n({...e,course:w.target.value}),placeholder:"e.g. Computer Science"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Specific Details / Achievements"}),_.jsx("textarea",{className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg outline-none focus:border-primary h-32 resize-none",value:e.details,onChange:w=>n({...e,details:w.target.value}),placeholder:"List key achievements, motivations, and experiences..."})]}),_.jsxs("button",{onClick:E,disabled:a||!e.studentName||!e.course,className:"w-full py-4 bg-gradient-to-r from-primary to-cyan-600 text-white rounded-lg font-bold text-lg shadow-lg hover:shadow-primary/25 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[a?_.jsx(Cy,{className:"animate-spin mr-2"}):_.jsx(bf,{className:"mr-2"}),a?"Generating Magic...":"Generate Personal Statement"]})]}),_.jsxs("div",{className:"bg-gray-50 dark:bg-black/20 border border-gray-200 dark:border-border rounded-xl p-6 flex flex-col h-full min-h-[500px]",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h4",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Generated Content"}),i&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>navigator.clipboard.writeText(i),className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded text-gray-500",title:"Copy",children:_.jsx(YO,{size:16})}),_.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded text-gray-500",title:"Download",children:_.jsx(Vw,{size:16})})]})]}),_.jsx("div",{className:"flex-1 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-lg p-4 overflow-y-auto custom-scrollbar text-sm leading-relaxed whitespace-pre-wrap text-gray-800 dark:text-gray-200 font-serif",children:i||_.jsx("span",{className:"text-gray-400 italic",children:"Content will appear here..."})})]})]}):_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.map(w=>_.jsxs("div",{className:"p-6 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl hover:border-primary/50 transition group cursor-pointer",onClick:()=>{n(w),o(w.content),v("generate")},children:[_.jsxs("div",{className:"flex justify-between items-start mb-4",children:[_.jsxs("div",{children:[_.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:w.studentName}),_.jsx("p",{className:"text-xs text-gray-500",children:w.course})]}),_.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-white/5 px-2 py-1 rounded text-gray-500",children:new Date(w.createdAt).toLocaleDateString()})]}),_.jsx("p",{className:"text-xs text-gray-500 line-clamp-3 mb-4",children:w.content}),_.jsx("div",{className:"flex justify-end opacity-0 group-hover:opacity-100 transition",children:_.jsxs("span",{className:"text-xs text-primary font-medium flex items-center",children:["View ",_.jsx(ih,{size:12,className:"ml-1"})]})})]},w.id)),f.length===0&&_.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"No history found."})]})]})},P5=({profile:t,studentId:e})=>{const[n,i]=oe.useState([]),[o,a]=oe.useState(!1),u=t.role==="student"?t.uid:e,f=oe.useRef(null);oe.useEffect(()=>{if(!u)return;const E=Ht(at(xe,"documents"),In("studentId","==",u)),x=on(E,w=>{i(w.docs.map(U=>({...U.data(),id:U.id})))});return()=>x()},[u]);const m=async E=>{if(!E.target.files||!E.target.files[0]||!u)return;a(!0);const x=E.target.files[0];try{const w=Po(Uo,`documents/${u}/${Date.now()}_${x.name}`),U=await il(w,x),q=await sl(U.ref);await Br(at(xe,"documents"),{studentId:u,name:x.name,type:"other",url:q,status:"pending",uploadedAt:Date.now()}),await Cs("admin","New Document",`${t.displayName} uploaded ${x.name}`,"info"),await On("DOC_UPLOAD",`Uploaded ${x.name}`,t.uid)}catch(w){console.error(w),alert("Upload failed")}finally{a(!1)}},h=async(E,x,w)=>{await _i(mt(xe,"documents",E),{status:x}),u&&await Cs(u,`Document ${x}`,`${w} was ${x}`,x==="approved"?"success":"warning")},v=async E=>{if(confirm("Are you sure you want to delete this file?"))try{await cy(mt(xe,"documents",E.id));try{await JP(Po(Uo,E.url))}catch(x){console.log("Storage delete skipped or failed",x)}await On("DOC_DELETE",`Deleted document ${E.name}`,t.uid)}catch(x){alert("Delete failed: "+x.message)}};return t.role!=="student"&&!u?_.jsx("div",{className:"text-center p-10 text-gray-500 font-mono",children:'Select a student from "Student Mgmt" to view documents.'}):_.jsxs("div",{className:"glass-panel p-6 rounded-xl bg-white dark:bg-surface/50",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["Documents ",t.role!=="student"&&_.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"(Admin View)"})]}),t.role==="student"&&_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:"file",className:"hidden",ref:f,onChange:m,disabled:o}),_.jsxs("button",{onClick:()=>{var E;return(E=f.current)==null?void 0:E.click()},className:"flex items-center px-4 py-2 bg-primary text-white rounded hover:bg-primary-hover disabled:opacity-50 shadow-lg shadow-primary/20 transition",children:[_.jsx(ll,{className:"w-4 h-4 mr-2"})," ",o?"Uploading...":"Upload File"]})]})]}),_.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 dark:border-border",children:_.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-border",children:[_.jsx("thead",{className:"bg-gray-50 dark:bg-white/5",children:_.jsxs("tr",{children:[_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"}),_.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),_.jsxs("tbody",{className:"bg-white dark:bg-surface-highlight/20 divide-y divide-gray-200 dark:divide-border",children:[n.length===0&&_.jsx("tr",{children:_.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500 italic",children:"No documents uploaded yet."})}),n.map(E=>_.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition",children:[_.jsxs("td",{className:"px-6 py-4 flex items-center text-sm font-medium text-gray-900 dark:text-gray-200",children:[_.jsx(vi,{className:"w-4 h-4 mr-3 text-primary"}),_.jsx("a",{href:E.url,target:"_blank",rel:"noreferrer",className:"hover:text-primary hover:underline truncate max-w-xs",children:E.name})]}),_.jsx("td",{className:"px-6 py-4",children:_.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider border
                                    ${E.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":E.status==="rejected"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 border-yellow-200 dark:border-yellow-800"}`,children:E.status})}),_.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:new Date(E.uploadedAt).toLocaleDateString()}),_.jsx("td",{className:"px-6 py-4 text-sm flex items-center gap-3",children:t.role!=="student"?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>h(E.id,"approved",E.name),className:"text-green-500 hover:text-green-600 dark:hover:text-green-300",children:_.jsx(oh,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>h(E.id,"rejected",E.name),className:"text-red-500 hover:text-red-600 dark:hover:text-red-300",children:_.jsx(Pw,{className:"w-4 h-4"})}),t.role==="super_admin"&&_.jsx("button",{onClick:()=>v(E),className:"text-gray-400 hover:text-red-500 ml-2",title:"Delete File",children:_.jsx(za,{className:"w-4 h-4"})})]}):_.jsx("span",{className:"text-gray-500 text-xs",children:"Read-only"})})]},E.id))]})]})})]})},mS=({profile:t,studentId:e})=>{const[n,i]=oe.useState([]),[o,a]=oe.useState(""),[u,f]=oe.useState("medium"),[m,h]=oe.useState(""),[v,E]=oe.useState(""),[x,w]=oe.useState([]),[U,q]=oe.useState("all"),V=t.role!=="student"&&!e,Q=t.role==="student"?t.uid:e;oe.useEffect(()=>{if(V){const ee=Ht(at(xe,"users"),In("role","==","student"));Hu(ee).then(R=>w(R.docs.map(I=>I.data())));const le=Ht(at(xe,"tasks"),Vr("createdAt","desc")),M=on(le,R=>i(R.docs.map(I=>({...I.data(),id:I.id}))));return()=>M()}else if(Q){const ee=Ht(at(xe,"tasks"),In("assignedTo","==",Q),Vr("createdAt","desc")),le=on(ee,M=>i(M.docs.map(R=>({...R.data(),id:R.id}))));return()=>le()}},[Q,V]);const ne=async()=>{const ee=V?v:Q;!o||!ee||(await Br(at(xe,"tasks"),{title:o,assignedTo:ee,assignedBy:t.uid,status:"todo",priority:u,dueDate:m?new Date(m).getTime():null,createdAt:Date.now()}),a(""),h(""),V&&E(""),ee!==t.uid&&await Cs(ee,"New Task Assigned",`You have been assigned: ${o}`,"warning"))},K=async ee=>await _i(mt(xe,"tasks",ee.id),{status:ee.status==="completed"?"todo":"completed"}),J=n.filter(ee=>!(U!=="all"&&ee.status!==U));return _.jsxs("div",{className:"glass-panel p-6 rounded-xl bg-white dark:bg-surface/50 h-full flex flex-col",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center",children:[_.jsx(oh,{className:"mr-2 text-primary"}),V?"Global Task Manager":"Tasks"]}),_.jsx("div",{className:"flex gap-2",children:_.jsxs("select",{value:U,onChange:ee=>q(ee.target.value),className:"text-xs bg-gray-50 dark:bg-surface border border-gray-200 dark:border-border rounded p-1 text-gray-900 dark:text-white",children:[_.jsx("option",{value:"all",children:"All Status"}),_.jsx("option",{value:"todo",children:"To Do"}),_.jsx("option",{value:"completed",children:"Completed"})]})})]}),t.role!=="student"&&_.jsxs("div",{className:"bg-gray-50 dark:bg-surface-highlight/20 p-4 rounded-lg mb-6 border border-gray-200 dark:border-border",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[_.jsx("input",{className:"md:col-span-2 p-2 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded text-sm outline-none focus:border-primary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Task Title...",value:o,onChange:ee=>a(ee.target.value)}),V&&_.jsxs("select",{className:"p-2 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded text-sm outline-none text-gray-900 dark:text-white",value:v,onChange:ee=>E(ee.target.value),children:[_.jsx("option",{value:"",children:"Select Student..."}),x.map(ee=>_.jsx("option",{value:ee.uid,children:ee.displayName},ee.uid))]}),_.jsxs("select",{className:"p-2 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded text-sm outline-none text-gray-900 dark:text-white",value:u,onChange:ee=>f(ee.target.value),children:[_.jsx("option",{value:"low",children:"Low Priority"}),_.jsx("option",{value:"medium",children:"Medium Priority"}),_.jsx("option",{value:"high",children:"High Priority"})]})]}),_.jsx("div",{className:"flex justify-end",children:_.jsx("button",{onClick:ne,disabled:!o||V&&!v,className:"px-6 py-2 bg-primary text-white rounded font-bold text-sm hover:bg-primary-hover disabled:opacity-50 transition shadow-lg shadow-primary/20",children:"Assign Task"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3",children:[J.map(ee=>{var le;return _.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-lg hover:border-primary/50 transition group",children:[_.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[_.jsx("button",{onClick:()=>K(ee),className:`w-5 h-5 rounded border flex items-center justify-center transition ${ee.status==="completed"?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-primary"}`,children:ee.status==="completed"&&_.jsx(Mw,{size:12,className:"text-white"})}),_.jsxs("div",{children:[_.jsx("p",{className:`text-sm font-medium ${ee.status==="completed"?"line-through text-gray-400":"text-gray-900 dark:text-gray-200"}`,children:ee.title}),V&&_.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned to: ",_.jsx("span",{className:"text-primary",children:((le=x.find(M=>M.uid===ee.assignedTo))==null?void 0:le.displayName)||"Unknown"})]})]})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:`text-[10px] px-2 py-1 rounded uppercase font-bold tracking-wider ${ee.priority==="high"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ee.priority==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"}`,children:ee.priority}),t.role!=="student"&&_.jsx("button",{onClick:async()=>{confirm("Delete?")&&await cy(mt(xe,"tasks",ee.id))},className:"text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition",children:_.jsx(za,{size:14})})]})]},ee.id)}),J.length===0&&_.jsx("div",{className:"text-center py-12 text-gray-400 italic",children:"No tasks found."})]})]})},bp=({profile:t,studentId:e})=>{const[n,i]=oe.useState([]),[o,a]=oe.useState(""),[u,f]=oe.useState(e||null),[m,h]=oe.useState({}),v=oe.useRef(null),[E,x]=oe.useState({}),[w,U]=oe.useState(null),[q,V]=oe.useState(!1),[Q,ne]=oe.useState(!1),[K,J]=oe.useState([]),[ee,le]=oe.useState("");oe.useEffect(()=>{if(t.role!=="student"){const k=Ht(at(xe,"users"));Hu(k).then(F=>{const P=F.docs.map(we=>we.data());J(P);const Pe={};P.forEach(we=>Pe[we.uid]=we),x(Pe)})}},[t.role]),oe.useEffect(()=>{const k=Ht(at(xe,"messages"),Vr("timestamp","asc")),F=on(k,P=>{const Pe=P.docs.map(we=>({...we.data(),id:we.id}));if(t.role==="student")i(Pe.filter(we=>we.senderId===t.uid||we.receiverId===t.uid));else{const we={};Pe.forEach($=>{const ce=$.senderId===t.uid?$.receiverId:$.senderId;we[ce]||(we[ce]=[]),we[ce].push($)}),h(we),u&&we[u]?i(we[u]):u&&i([])}});return()=>F()},[t.uid,t.role,u]),oe.useEffect(()=>{var k;(k=v.current)==null||k.scrollIntoView({behavior:"smooth"})},[n]);const M=async k=>{if(k&&k.preventDefault(),!o.trim()&&!w||q)return;const F=t.role==="student"?"super_admin":u;if(F){V(!0);try{let P="",Pe="",we="";if(w){const $=Po(Uo,`messages/${Date.now()}_${w.name}`);await il($,w),P=await sl($),Pe=w.type,we=w.name}if(await Br(at(xe,"messages"),{senderId:t.uid,senderName:t.displayName,receiverId:F,content:o,fileUrl:P,fileType:Pe,fileName:we,timestamp:Date.now(),read:!1}),F==="super_admin"){await Cs("super_admin","New Message",`${t.displayName} sent you a message`,"info");const $=Ht(at(xe,"users"),In("role","in",["admin","super_admin"])),ce=await Hu($);for(const _e of ce.docs)await Cs(_e.id,"New Message",`${t.displayName} sent you a message`,"info")}else await Cs(F,"New Message",`${t.displayName} sent you a message`,"info");a(""),U(null)}catch(P){console.error(P),alert("Failed to send message")}finally{V(!1)}}},R=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),M())},I=K.filter(k=>k.uid!==t.uid&&(k.displayName.toLowerCase().includes(ee.toLowerCase())||k.email.toLowerCase().includes(ee.toLowerCase()))),L=k=>E[k]||{displayName:"Unknown User",email:""};return _.jsxs("div",{className:"glass-panel rounded-xl overflow-hidden bg-white dark:bg-surface/50 h-[600px] flex shadow-xl flex-col md:flex-row",children:[t.role!=="student"&&_.jsxs("div",{className:`w-full md:w-80 bg-gray-50 dark:bg-surface-highlight/10 flex flex-col border-r border-gray-200 dark:border-white/5 ${u?"hidden md:flex":"flex"}`,children:[_.jsxs("div",{className:"p-4 flex justify-between items-center bg-white dark:bg-surface/50 border-b border-gray-200 dark:border-white/5",children:[_.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200",children:"Conversations"}),_.jsx("button",{onClick:()=>ne(!0),className:"p-2 bg-primary text-white rounded-full hover:bg-primary-hover shadow-lg shadow-primary/20 transition",children:_.jsx(Mu,{size:18})})]}),_.jsxs("div",{className:"overflow-y-auto flex-1 custom-scrollbar",children:[Object.keys(m).length===0&&_.jsx("div",{className:"p-6 text-center text-gray-400 text-sm",children:"No active conversations"}),Object.keys(m).map(k=>{const F=m[k][m[k].length-1],P=L(k);return _.jsxs("div",{onClick:()=>f(k),className:`p-4 cursor-pointer hover:bg-white dark:hover:bg-white/5 transition border-b border-gray-100 dark:border-white/5 ${u===k?"bg-white dark:bg-white/10 border-l-4 border-l-primary":""}`,children:[_.jsx("div",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:P.displayName}),_.jsx("div",{className:"text-xs text-gray-400 mb-1",children:P.email}),_.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[F.senderId===t.uid?"You: ":"",F.content||"Attachment"]})]},k)})]})]}),_.jsx("div",{className:`flex-1 flex flex-col bg-white dark:bg-surface/50 ${!u&&t.role!=="student"?"hidden md:flex":"flex"}`,children:u||t.role==="student"?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"p-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm flex justify-between items-center border-b border-gray-200 dark:border-white/5",children:_.jsxs("div",{className:"flex items-center",children:[t.role!=="student"&&_.jsx("button",{onClick:()=>f(null),className:"md:hidden mr-3 text-gray-500",children:_.jsx(ih,{className:"rotate-180"})}),_.jsxs("div",{className:"font-bold text-gray-900 dark:text-white flex items-center",children:[_.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),t.role==="student"?"Support Team":L(u).displayName]})]})}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-gray-50/50 dark:bg-black/20",children:[n.map(k=>{var F;return _.jsx("div",{className:`flex ${k.senderId===t.uid?"justify-end":"justify-start"}`,children:_.jsxs("div",{className:`max-w-[80%] p-3 rounded-2xl shadow-sm ${k.senderId===t.uid?"bg-primary text-white rounded-br-none":"bg-white dark:bg-surface-highlight text-gray-800 dark:text-gray-200 rounded-bl-none"}`,children:[k.fileUrl&&_.jsx("div",{className:"mb-2",children:(F=k.fileType)!=null&&F.startsWith("image/")?_.jsx("a",{href:k.fileUrl,target:"_blank",rel:"noopener noreferrer",children:_.jsx("img",{src:k.fileUrl,alt:"attachment",className:"max-w-full rounded-lg max-h-48 object-cover hover:opacity-90 transition"})}):_.jsxs("a",{href:k.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center p-2 bg-black/10 rounded-lg hover:bg-black/20 transition text-xs",children:[_.jsx(vi,{className:"w-4 h-4 mr-2"}),k.fileName||"Attachment"]})}),k.content&&_.jsx("p",{className:"text-sm",children:k.content}),_.jsx("p",{className:`text-[10px] mt-1 ${k.senderId===t.uid?"text-white/70":"text-gray-400"}`,children:new Date(k.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},k.id)}),_.jsx("div",{ref:v})]}),_.jsxs("form",{onSubmit:M,className:"p-4 bg-white dark:bg-surface border-t border-gray-200 dark:border-white/5",children:[w&&_.jsxs("div",{className:"flex items-center mb-2 p-2 bg-gray-100 dark:bg-surface-highlight rounded-lg text-xs",children:[_.jsx("span",{className:"truncate flex-1",children:w.name}),_.jsx("button",{type:"button",onClick:()=>U(null),className:"text-red-500 ml-2",children:_.jsx(Ps,{size:14})})]}),_.jsxs("div",{className:"flex items-end gap-2",children:[_.jsxs("label",{className:"p-2 text-gray-400 hover:text-primary cursor-pointer transition",children:[_.jsx(ll,{size:20}),_.jsx("input",{type:"file",className:"hidden",onChange:k=>k.target.files&&U(k.target.files[0])})]}),_.jsx("textarea",{value:o,onChange:k=>a(k.target.value),onKeyDown:R,placeholder:"Type a message...",className:"flex-1 bg-gray-100 dark:bg-surface-highlight border-0 rounded-xl p-3 text-sm focus:ring-2 focus:ring-primary outline-none resize-none custom-scrollbar",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),_.jsx("button",{type:"submit",disabled:!o.trim()&&!w||q,className:"p-3 bg-primary text-white rounded-xl hover:bg-primary-hover shadow-lg shadow-primary/20 transition disabled:opacity-50 disabled:cursor-not-allowed",children:q?_.jsx(Cy,{className:"w-5 h-5 animate-spin"}):_.jsx(d5,{size:20})})]})]})]}):_.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400",children:[_.jsx(Af,{size:48,className:"mb-4 opacity-20"}),_.jsx("p",{children:"Select a conversation to start messaging"})]})}),Q&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[80vh]",children:[_.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-border flex justify-between items-center",children:[_.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:"New Conversation"}),_.jsx("button",{onClick:()=>ne(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-white",children:_.jsx(Ps,{size:20})})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("input",{autoFocus:!0,placeholder:"Search users...",className:"w-full p-3 bg-gray-50 dark:bg-surface-highlight border border-gray-200 dark:border-border rounded-lg text-gray-900 dark:text-white focus:border-primary outline-none mb-4",value:ee,onChange:k=>le(k.target.value)}),_.jsxs("div",{className:"space-y-2 overflow-y-auto max-h-60 custom-scrollbar",children:[I.map(k=>_.jsxs("button",{onClick:()=>{f(k.uid),ne(!1)},className:"w-full flex items-center p-3 hover:bg-gray-50 dark:hover:bg-surface-highlight rounded-lg transition text-left",children:[_.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold mr-3",children:k.displayName.charAt(0)}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:k.displayName}),_.jsx("div",{className:"text-xs text-gray-500",children:k.email})]})]},k.uid)),I.length===0&&_.jsx("p",{className:"text-center text-gray-500 text-sm py-4",children:"No users found"})]})]})]})})]})},U5=({profile:t,studentId:e})=>{const[n,i]=oe.useState(null),o=e||t.uid;oe.useEffect(()=>{const f=on(mt(xe,"progress",o),m=>{m.exists()&&i(m.data())});return()=>f()},[o]);const a=["Document Collection","Application Review","University Submission","Offer Received","Visa Processing","Completed"],u=async f=>{if(t.role==="student"||!confirm(`Update stage to ${f}?`))return;const m=[...(n==null?void 0:n.history)||[],{stage:f,timestamp:Date.now(),completed:!0}];await Fa(mt(xe,"progress",o),{studentId:o,currentStage:f,history:m},{merge:!0}),await Cs(o,"Application Update",`Your application is now in the ${f} stage.`,"info")};return _.jsxs("div",{className:"glass-panel p-8 rounded-xl bg-white dark:bg-surface/50",children:[_.jsx("h3",{className:"font-bold text-xl mb-8 text-gray-900 dark:text-white",children:"Application Tracker"}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-800"}),_.jsx("div",{className:"space-y-8",children:a.map((f,m)=>{const h=n==null?void 0:n.history.some(x=>x.stage===f),v=(n==null?void 0:n.currentStage)===f,E=n==null?void 0:n.history.find(x=>x.stage===f);return _.jsxs("div",{className:`relative pl-12 transition-all duration-500 ${h||v?"opacity-100":"opacity-40"}`,children:[_.jsx("div",{className:`absolute left-0 w-8 h-8 rounded-full border-4 flex items-center justify-center z-10 transition-all
                                    ${h?"bg-green-500 border-green-500":v?"bg-primary border-primary animate-pulse":"bg-gray-100 dark:bg-surface border-gray-300 dark:border-gray-700"}`,children:h&&_.jsx(oh,{className:"w-4 h-4 text-white"})}),_.jsxs("div",{className:"flex justify-between items-center group",children:[_.jsxs("div",{children:[_.jsx("h4",{className:`font-bold text-lg ${v?"text-primary":"text-gray-900 dark:text-white"}`,children:f}),E&&_.jsx("p",{className:"text-xs text-gray-500 mt-1 font-mono",children:new Date(E.timestamp).toLocaleDateString()})]}),t.role!=="student"&&_.jsx("button",{onClick:()=>u(f),className:"opacity-0 group-hover:opacity-100 text-xs bg-primary/10 text-primary px-2 py-1 rounded hover:bg-primary hover:text-white transition",children:"Set Current"})]})]},f)})})]})]})},V5=({profile:t})=>{const[e,n]=oe.useState("dashboard"),[i,o]=oe.useState(!1),[a,u]=oe.useState([]),[f,m]=oe.useState(!1),[h,v]=oe.useState(!0),[E,x]=oe.useState(0),w=oe.useRef(null),[U,q]=oe.useState(void 0);oe.useEffect(()=>{localStorage.getItem("theme")==="light"?(document.documentElement.classList.remove("dark"),v(!1)):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),v(!0))},[]),oe.useEffect(()=>{const J=ee=>{w.current&&!w.current.contains(ee.target)&&m(!1)};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]),oe.useEffect(()=>{if(!(t!=null&&t.uid))return;const J=[t.uid];t.role==="super_admin"&&J.push("super_admin");const ee=Ht(at(xe,"notifications"),In("userId","in",J),Vr("timestamp","desc"),Lb(10)),le=on(ee,M=>u(M.docs.map(R=>({...R.data(),id:R.id}))),M=>console.error("Notifications listener error:",M));return()=>le()},[t==null?void 0:t.uid,t==null?void 0:t.role]),oe.useEffect(()=>{if(!(t!=null&&t.uid))return;const J=Ht(at(xe,"messages"),In("receiverId","==",t.uid),In("read","==",!1)),ee=on(J,le=>x(le.docs.length),le=>console.error("Messages listener error:",le));return()=>ee()},[t==null?void 0:t.uid]);const V=()=>{h?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),v(!1)):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),v(!0))},Q=async J=>await _i(mt(xe,"notifications",J),{seen:!0}),ne=({studentId:J})=>{const[ee,le]=oe.useState(null);return oe.useEffect(()=>{vf(mt(xe,"users",J)).then(M=>{M.exists()&&le(M.data())})},[J]),ee?_.jsxs("div",{className:"glass-panel p-6 rounded-xl bg-white dark:bg-surface/50 mb-6",children:[_.jsxs("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white flex items-center",children:[_.jsx(Lw,{className:"mr-2 text-primary"})," Application Details"]}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Full Name"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.displayName})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Email"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.email})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Course"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.targetCourse||"-"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Country"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.targetCountry||"-"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Budget"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.budget||"-"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-gray-500 dark:text-gray-400 text-xs uppercase mb-1",children:"Qualification"}),_.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ee.highestQualification||"-"})]})]})]}):null},K=()=>U?_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[_.jsx("button",{onClick:()=>q(void 0),className:"text-sm text-primary hover:text-primary-hover transition",children:" Back to Student List"}),_.jsx("span",{className:"text-gray-400",children:"|"}),_.jsxs("span",{className:"font-bold text-gray-700 dark:text-gray-300 font-mono text-sm",children:["ID: ",U.substring(0,8)]})]}),_.jsx(ne,{studentId:U}),_.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"space-y-6",children:[_.jsx(U5,{profile:t,studentId:U}),_.jsx(P5,{profile:t,studentId:U})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsx(mS,{profile:t,studentId:U}),_.jsx(bp,{profile:t,studentId:U})]})]})]}):_.jsx(M5,{profile:t,setSelectedStudentId:J=>{q(J)}});return _.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-black overflow-hidden transition-colors duration-300",children:[_.jsx(A5,{role:t.role,activeTab:e,setActiveTab:n,mobileOpen:i,setMobileOpen:o,isDark:h,toggleTheme:V,unreadCount:E}),_.jsxs("div",{className:"flex-1 flex flex-col md:ml-64 relative bg-gray-50 dark:bg-black/90",children:[_.jsxs("header",{className:"h-20 bg-white/80 dark:bg-black/50 backdrop-blur-md flex items-center justify-between px-8 z-40 sticky top-0 transition-colors duration-300",children:[_.jsx("div",{className:"flex items-center",children:_.jsx("button",{className:"md:hidden mr-4 text-gray-500 dark:text-gray-400",onClick:()=>o(!0),children:_.jsx(o5,{})})}),_.jsxs("div",{className:"flex items-center space-x-6",children:[_.jsxs("div",{className:"relative",ref:w,children:[_.jsxs("button",{onClick:()=>m(!f),className:"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/5 transition text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[_.jsx(VO,{className:"w-5 h-5"}),a.some(J=>!J.seen)&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full shadow-sm"})]}),f&&_.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white dark:bg-surface border border-gray-200 dark:border-border rounded-xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95",children:[_.jsx("div",{className:"p-4 bg-gray-50 dark:bg-white/5 font-bold text-xs uppercase text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-border tracking-wider",children:"Notifications"}),_.jsxs("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:[a.length===0&&_.jsx("div",{className:"p-6 text-center text-xs text-gray-500",children:"No new notifications"}),a.map(J=>_.jsxs("div",{onClick:()=>{Q(J.id),J.title==="New Message"&&(n(t.role==="student"?"support":"messages"),m(!1))},className:`p-4 border-b border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5 cursor-pointer transition ${J.seen?"":"bg-primary/5"}`,children:[_.jsx("div",{className:`font-semibold text-sm ${J.seen?"text-gray-700 dark:text-gray-300":"text-primary"}`,children:J.title}),_.jsx("div",{className:"text-xs text-gray-500 mt-1",children:J.message})]},J.id))]})]})]}),_.jsxs("div",{className:"flex items-center gap-4 pl-6",children:[_.jsxs("div",{className:"text-right hidden sm:block",children:[_.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-200",children:t.displayName}),_.jsx("div",{className:"text-xs text-gray-500 capitalize",children:t.role.replace("_"," ")})]}),_.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-primary to-cyan-700 flex items-center justify-center text-white font-bold shadow-lg ring-2 ring-white dark:ring-black",children:t.displayName.charAt(0)})]})]})]}),_.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-8 scroll-smooth custom-scrollbar",children:[e==="dashboard"&&_.jsx(w5,{profile:t}),e==="applications"&&(t.role==="admin"||t.role==="super_admin")&&_.jsx(C5,{profile:t}),e==="applications"&&t.role==="student"&&_.jsx(R5,{profile:t}),e==="students"&&(t.role!=="student"?_.jsx(K,{}):_.jsx("div",{children:"Access Denied"})),e==="tasks"&&_.jsx(mS,{profile:t}),e==="messages"&&_.jsx(bp,{profile:t}),e==="support"&&_.jsx(bp,{profile:t}),e==="profile"&&_.jsx(N5,{profile:t}),e==="ai-gen"&&(t.role!=="student"?_.jsx(D5,{profile:t}):_.jsx("div",{children:"Access Denied"})),e==="super-admin"&&(t.role==="super_admin"?_.jsx(I5,{profile:t}):_.jsx("div",{children:"Access Denied"}))]})]})]})},L5=()=>{const[t,e]=oe.useState(null),[n,i]=oe.useState(!0);return oe.useEffect(()=>{let o=null;const a=_1(ni,u=>{o&&o(),u?o=on(mt(xe,"users",u.uid),f=>{if(f.exists())e(f.data());else{const m={uid:u.uid,email:u.email,displayName:u.displayName||"User",role:"student",createdAt:Date.now()};e(m)}i(!1)}):(e(null),i(!1))});return()=>{a(),o&&o()}},[]),n?_.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-black text-primary relative overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-primary/5 animate-pulse"}),_.jsx(rh,{className:"w-16 h-16 mb-6 text-primary drop-shadow-[0_0_15px_rgba(25,125,129,0.8)]"}),_.jsx("div",{className:"text-2xl font-bold text-white tracking-widest",children:"AR CONSULTANTS"}),_.jsx("div",{className:"text-xs text-gray-500 mt-2 font-mono",children:"Initializing System Protocols..."})]}):t?_.jsx(V5,{profile:t}):_.jsx(b5,{setUserProfile:e})},Gw=document.getElementById("root");if(!Gw)throw new Error("Could not find root element to mount to");const O5=kI.createRoot(Gw);O5.render(_.jsx(SI.StrictMode,{children:_.jsx(L5,{})}));
